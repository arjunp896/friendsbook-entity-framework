/*!
 * jQuery Cookie Plugin v1.4.1
 * https://github.com/carhartl/jquery-cookie
 *
 * Copyright 2006, 2014 Klaus Hartl
 * Released under the MIT license
 */
(function(a){if(typeof define==="function"&&define.amd){define(["jquery"],a)}else{if(typeof exports==="object"){a(require("jquery"))}else{a(jQuery)}}}(function(f){var a=/\+/g;function d(i){return b.raw?i:encodeURIComponent(i)}function g(i){return b.raw?i:decodeURIComponent(i)}function h(i){return d(b.json?JSON.stringify(i):String(i))}function c(i){if(i.indexOf('"')===0){i=i.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\")}try{i=decodeURIComponent(i.replace(a," "));return b.json?JSON.parse(i):i}catch(j){}}function e(j,i){var k=b.raw?j:c(j);return f.isFunction(i)?i(k):k}var b=f.cookie=function(q,p,v){if(arguments.length>1&&!f.isFunction(p)){v=f.extend({},b.defaults,v);if(typeof v.expires==="number"){var r=v.expires,u=v.expires=new Date();u.setTime(+u+r*86400000)}return(document.cookie=[d(q),"=",h(p),v.expires?"; expires="+v.expires.toUTCString():"",v.path?"; path="+v.path:"",v.domain?"; domain="+v.domain:"",v.secure?"; secure":""].join(""))}var w=q?undefined:{};var s=document.cookie?document.cookie.split("; "):[];for(var o=0,m=s.length;o<m;o++){var n=s[o].split("=");var j=g(n.shift());var k=n.join("=");if(q&&q===j){w=e(k,p);break}if(!q&&(k=e(k))!==undefined){w[j]=k}}return w};b.defaults={};f.removeCookie=function(j,i){if(f.cookie(j)===undefined){return false}f.cookie(j,"",f.extend({},i,{expires:-1}));return !f.cookie(j)}}));
!function(c){if(typeof ko!=="undefined"&&ko.bindingHandlers&&!ko.bindingHandlers.multiselect){ko.bindingHandlers.multiselect={init:function(h,i,j,g,e){var k=j().selectedOptions;var f=ko.utils.unwrapObservable(i());c(h).multiselect(f);if(a(k)){c(h).multiselect("select",ko.utils.unwrapObservable(k));k.subscribe(function(n){var l=[],m=[];d(n,function(o){switch(o.status){case"added":l.push(o.value);break;case"deleted":m.push(o.value);break}});if(l.length>0){c(h).multiselect("select",l)}if(m.length>0){c(h).multiselect("deselect",m)}},null,"arrayChange")}},update:function(j,k,l,i,e){var h=l().options,g=c(j).data("multiselect"),f=ko.utils.unwrapObservable(k());if(a(h)){h.subscribe(function(m){c(j).multiselect("rebuild")})}if(!g){c(j).multiselect(f)}else{g.updateOriginalOptions()}}}}function a(e){return ko.isObservable(e)&&!(e.destroyAll===undefined)}function d(g,f){for(var e=0;e<g.length;++e){f(g[e])}}function b(e,f){this.$select=c(e);this.options=this.mergeOptions(c.extend({},f,this.$select.data()));this.originalOptions=this.$select.clone()[0].options;this.query="";this.searchTimeout=null;this.options.multiple=this.$select.attr("multiple")==="multiple";this.options.onChange=c.proxy(this.options.onChange,this);this.options.onDropdownShow=c.proxy(this.options.onDropdownShow,this);this.options.onDropdownHide=c.proxy(this.options.onDropdownHide,this);this.options.onDropdownShown=c.proxy(this.options.onDropdownShown,this);this.options.onDropdownHidden=c.proxy(this.options.onDropdownHidden,this);this.buildContainer();this.buildButton();this.buildDropdown();this.buildSelectAll();this.buildDropdownOptions();this.buildFilter();this.updateButtonText();this.updateSelectAll();if(this.options.disableIfEmpty&&c("option",this.$select).length<=0){this.disable()}this.$select.hide().after(this.$container)}b.prototype={defaults:{buttonText:function(f,e){if(f.length===0){return this.nonSelectedText+' <b class="caret"></b>'}else{if(f.length==c("option",c(e)).length){return this.allSelectedText+' <b class="caret"></b>'}else{if(f.length>this.numberDisplayed){return f.length+" "+this.nSelectedText+' <b class="caret"></b>'}else{var g="";f.each(function(){var h=(c(this).attr("label")!==undefined)?c(this).attr("label"):c(this).html();g+=h+", "});return g.substr(0,g.length-2)+' <b class="caret"></b>'}}}},buttonTitle:function(f,e){if(f.length===0){return this.nonSelectedText}else{var g="";f.each(function(){g+=c(this).text()+", "});return g.substr(0,g.length-2)}},label:function(e){return c(e).attr("label")||c(e).html()},onChange:function(e,f){},onDropdownShow:function(e){},onDropdownHide:function(e){},onDropdownShown:function(e){},onDropdownHidden:function(e){},buttonClass:"btn btn-default",buttonWidth:"auto",buttonContainer:'<div class="btn-group" />',dropRight:false,selectedClass:"active",maxHeight:false,checkboxName:false,includeSelectAllOption:false,includeSelectAllIfMoreThan:0,selectAllText:" Select all",selectAllValue:"multiselect-all",selectAllName:false,enableFiltering:false,enableCaseInsensitiveFiltering:false,enableClickableOptGroups:false,filterPlaceholder:"Search",filterBehavior:"text",includeFilterClearBtn:true,preventInputChangeEvent:false,nonSelectedText:"None selected",nSelectedText:"selected",allSelectedText:"All selected",numberDisplayed:3,disableIfEmpty:false,templates:{button:'<button type="button" class="multiselect dropdown-toggle" data-toggle="dropdown"></button>',ul:'<ul class="multiselect-container dropdown-menu"></ul>',filter:'<li class="multiselect-item filter"><div class="input-group"><span class="input-group-addon"><i class="glyphicon glyphicon-search"></i></span><input class="form-control multiselect-search" type="text"></div></li>',filterClearBtn:'<span class="input-group-btn"><button class="btn btn-default multiselect-clear-filter" type="button"><i class="glyphicon glyphicon-remove-circle"></i></button></span>',li:'<li><a href="javascript:void(0);"><label></label></a></li>',divider:'<li class="multiselect-item divider"></li>',liGroup:'<li class="multiselect-item multiselect-group"><label></label></li>'}},constructor:b,buildContainer:function(){this.$container=c(this.options.buttonContainer);this.$container.on("show.bs.dropdown",this.options.onDropdownShow);this.$container.on("hide.bs.dropdown",this.options.onDropdownHide);this.$container.on("shown.bs.dropdown",this.options.onDropdownShown);this.$container.on("hidden.bs.dropdown",this.options.onDropdownHidden)},buildButton:function(){this.$button=c(this.options.templates.button).addClass(this.options.buttonClass);if(this.$select.prop("disabled")){this.disable()}else{this.enable()}if(this.options.buttonWidth&&this.options.buttonWidth!=="auto"){this.$button.css({width:this.options.buttonWidth});this.$container.css({width:this.options.buttonWidth})}var e=this.$select.attr("tabindex");if(e){this.$button.attr("tabindex",e)}this.$container.prepend(this.$button)},buildDropdown:function(){this.$ul=c(this.options.templates.ul);if(this.options.dropRight){this.$ul.addClass("pull-right")}if(this.options.maxHeight){this.$ul.css({"max-height":this.options.maxHeight+"px","overflow-y":"auto","overflow-x":"hidden"})}this.$container.append(this.$ul)},buildDropdownOptions:function(){this.$select.children().each(c.proxy(function(g,h){var f=c(h);var e=f.prop("tagName").toLowerCase();if(f.prop("value")===this.options.selectAllValue){return}if(e==="optgroup"){this.createOptgroup(h)}else{if(e==="option"){if(f.data("role")==="divider"){this.createDivider()}else{this.createOptionValue(h)}}}},this));c("li input",this.$ul).on("change",c.proxy(function(i){var e=c(i.target);var h=e.prop("checked")||false;var f=e.val()===this.options.selectAllValue;if(this.options.selectedClass){if(h){e.closest("li").addClass(this.options.selectedClass)}else{e.closest("li").removeClass(this.options.selectedClass)}}var j=e.val();var k=this.getOptionByValue(j);var l=c("option",this.$select).not(k);var g=c("input",this.$container).not(e);if(f){if(h){this.selectAll()}else{this.deselectAll()}}if(!f){if(h){k.prop("selected",true);if(this.options.multiple){k.prop("selected",true)}else{if(this.options.selectedClass){c(g).closest("li").removeClass(this.options.selectedClass)}c(g).prop("checked",false);l.prop("selected",false);this.$button.click()}if(this.options.selectedClass==="active"){l.closest("a").css("outline","")}}else{k.prop("selected",false)}}this.$select.change();this.updateButtonText();this.updateSelectAll();this.options.onChange(k,h);if(this.options.preventInputChangeEvent){return false}},this));c("li a",this.$ul).on("touchstart click",function(j){j.stopPropagation();var e=c(j.target);if(j.shiftKey){var i=e.prop("checked")||false;if(i){var h=e.closest("li").siblings('li[class="active"]:first');var g=e.closest("li").index();var f=h.index();if(g>f){e.closest("li").prevUntil(h).each(function(){c(this).find("input:first").prop("checked",true).trigger("change")})}else{e.closest("li").nextUntil(h).each(function(){c(this).find("input:first").prop("checked",true).trigger("change")})}}}e.blur()});this.$container.off("keydown.multiselect").on("keydown.multiselect",c.proxy(function(h){if(c('input[type="text"]',this.$container).is(":focus")){return}if(h.keyCode===9&&this.$container.hasClass("open")){this.$button.click()}else{var i=c(this.$container).find("li:not(.divider):not(.disabled) a").filter(":visible");if(!i.length){return}var e=i.index(i.filter(":focus"));if(h.keyCode===38&&e>0){e--}else{if(h.keyCode===40&&e<i.length-1){e++}else{if(!~e){e=0}}}var g=i.eq(e);g.focus();if(h.keyCode===32||h.keyCode===13){var f=g.find("input");f.prop("checked",!f.prop("checked"));f.change()}h.stopPropagation();h.preventDefault()}},this));if(this.options.enableClickableOptGroups&&this.options.multiple){c("li.multiselect-group",this.$ul).on("click",c.proxy(function(g){g.stopPropagation();var h=c(g.target).parent();var f=h.nextUntil("li.multiselect-group");var e=true;var i=f.find("input");i.each(function(){e=e&&c(this).prop("checked")});i.prop("checked",!e).trigger("change")},this))}},createOptionValue:function(h){var m=c(h);if(m.is(":selected")){m.prop("selected",true)}var k=this.options.label(h);var l=m.val();var f=this.options.multiple?"checkbox":"radio";var i=c(this.options.templates.li);var j=c("label",i);j.addClass(f);var e=c("<input/>").attr("type",f);if(this.options.checkboxName){e.attr("name",this.options.checkboxName)}j.append(e);var g=m.prop("selected")||false;e.val(l);if(l===this.options.selectAllValue){i.addClass("multiselect-item multiselect-all");e.parent().parent().addClass("multiselect-all")}j.append(" "+k);j.attr("title",m.attr("title"));this.$ul.append(i);if(m.is(":disabled")){e.attr("disabled","disabled").prop("disabled",true).closest("a").attr("tabindex","-1").closest("li").addClass("disabled")}e.prop("checked",g);if(g&&this.options.selectedClass){e.closest("li").addClass(this.options.selectedClass)}},createDivider:function(f){var e=c(this.options.templates.divider);this.$ul.append(e)},createOptgroup:function(e){var g=c(e).prop("label");var f=c(this.options.templates.liGroup);c("label",f).text(g);if(this.options.enableClickableOptGroups){f.addClass("multiselect-group-clickable")}this.$ul.append(f);if(c(e).is(":disabled")){f.addClass("disabled")}c("option",e).each(c.proxy(function(h,i){this.createOptionValue(i)},this))},buildSelectAll:function(){if(typeof this.options.selectAllValue==="number"){this.options.selectAllValue=this.options.selectAllValue.toString()}var e=this.hasSelectAll();if(!e&&this.options.includeSelectAllOption&&this.options.multiple&&c("option",this.$select).length>this.options.includeSelectAllIfMoreThan){if(this.options.includeSelectAllDivider){this.$ul.prepend(c(this.options.templates.divider))}var g=c(this.options.templates.li);c("label",g).addClass("checkbox");if(this.options.selectAllName){c("label",g).append('<input type="checkbox" name="'+this.options.selectAllName+'" />')}else{c("label",g).append('<input type="checkbox" />')}var f=c("input",g);f.val(this.options.selectAllValue);g.addClass("multiselect-item multiselect-all");f.parent().parent().addClass("multiselect-all");c("label",g).append(" "+this.options.selectAllText);this.$ul.prepend(g);f.prop("checked",false)}},buildFilter:function(){if(this.options.enableFiltering||this.options.enableCaseInsensitiveFiltering){var f=Math.max(this.options.enableFiltering,this.options.enableCaseInsensitiveFiltering);if(this.$select.find("option").length>=f){this.$filter=c(this.options.templates.filter);c("input",this.$filter).attr("placeholder",this.options.filterPlaceholder);if(this.options.includeFilterClearBtn){var e=c(this.options.templates.filterClearBtn);e.on("click",c.proxy(function(g){clearTimeout(this.searchTimeout);this.$filter.find(".multiselect-search").val("");c("li",this.$ul).show().removeClass("filter-hidden");this.updateSelectAll()},this));this.$filter.find(".input-group").append(e)}this.$ul.prepend(this.$filter);this.$filter.val(this.query).on("click",function(g){g.stopPropagation()}).on("input keydown",c.proxy(function(g){if(g.which===13){g.preventDefault()}clearTimeout(this.searchTimeout);this.searchTimeout=this.asyncFunction(c.proxy(function(){if(this.query!==g.target.value){this.query=g.target.value;var h,i;c.each(c("li",this.$ul),c.proxy(function(k,l){var n=c("input",l).val();var o=c("label",l).text();var j="";if((this.options.filterBehavior==="text")){j=o}else{if((this.options.filterBehavior==="value")){j=n}else{if(this.options.filterBehavior==="both"){j=o+"\n"+n}}}if(n!==this.options.selectAllValue&&o){var m=false;if(this.options.enableCaseInsensitiveFiltering&&j.toLowerCase().indexOf(this.query.toLowerCase())>-1){m=true}else{if(j.indexOf(this.query)>-1){m=true}}c(l).toggle(m).toggleClass("filter-hidden",!m);if(c(this).hasClass("multiselect-group")){h=l;i=m}else{if(m){c(h).show().removeClass("filter-hidden")}if(!m&&i){c(l).show().removeClass("filter-hidden")}}}},this))}this.updateSelectAll()},this),300,this)},this))}}},destroy:function(){this.$container.remove();this.$select.show();this.$select.data("multiselect",null)},refresh:function(){c("option",this.$select).each(c.proxy(function(e,f){var g=c("li input",this.$ul).filter(function(){return c(this).val()===c(f).val()});if(c(f).is(":selected")){g.prop("checked",true);if(this.options.selectedClass){g.closest("li").addClass(this.options.selectedClass)}}else{g.prop("checked",false);if(this.options.selectedClass){g.closest("li").removeClass(this.options.selectedClass)}}if(c(f).is(":disabled")){g.attr("disabled","disabled").prop("disabled",true).closest("li").addClass("disabled")}else{g.prop("disabled",false).closest("li").removeClass("disabled")}},this));this.updateButtonText();this.updateSelectAll()},select:function(j,k){if(!c.isArray(j)){j=[j]}for(var e=0;e<j.length;e++){var g=j[e];if(g===null||g===undefined){continue}var h=this.getOptionByValue(g);var f=this.getInputByValue(g);if(h===undefined||f===undefined){continue}if(!this.options.multiple){this.deselectAll(false)}if(this.options.selectedClass){f.closest("li").addClass(this.options.selectedClass)}f.prop("checked",true);h.prop("selected",true)}this.updateButtonText();this.updateSelectAll();if(k&&j.length===1){this.options.onChange(h,true)}},clearSelection:function(){this.deselectAll(false);this.updateButtonText();this.updateSelectAll()},deselect:function(e,k){if(!c.isArray(e)){e=[e]}for(var f=0;f<e.length;f++){var h=e[f];if(h===null||h===undefined){continue}var j=this.getOptionByValue(h);var g=this.getInputByValue(h);if(j===undefined||g===undefined){continue}if(this.options.selectedClass){g.closest("li").removeClass(this.options.selectedClass)}g.prop("checked",false);j.prop("selected",false)}this.updateButtonText();this.updateSelectAll();if(k&&e.length===1){this.options.onChange(j,false)}},selectAll:function(f){var f=typeof f==="undefined"?true:f;var j=c("li input[type='checkbox']:enabled",this.$ul);var h=j.filter(":visible");var i=j.length;var e=h.length;if(f){h.prop("checked",true);c("li:not(.divider):not(.disabled)",this.$ul).filter(":visible").addClass(this.options.selectedClass)}else{j.prop("checked",true);c("li:not(.divider):not(.disabled)",this.$ul).addClass(this.options.selectedClass)}if(i===e||f===false){c("option:enabled",this.$select).prop("selected",true)}else{var g=h.map(function(){return c(this).val()}).get();c("option:enabled",this.$select).filter(function(k){return c.inArray(c(this).val(),g)!==-1}).prop("selected",true)}},deselectAll:function(e){var e=typeof e==="undefined"?true:e;if(e){var g=c("li input[type='checkbox']:enabled",this.$ul).filter(":visible");g.prop("checked",false);var f=g.map(function(){return c(this).val()}).get();c("option:enabled",this.$select).filter(function(h){return c.inArray(c(this).val(),f)!==-1}).prop("selected",false);if(this.options.selectedClass){c("li:not(.divider):not(.disabled)",this.$ul).filter(":visible").removeClass(this.options.selectedClass)}}else{c("li input[type='checkbox']:enabled",this.$ul).prop("checked",false);c("option:enabled",this.$select).prop("selected",false);if(this.options.selectedClass){c("li:not(.divider):not(.disabled)",this.$ul).removeClass(this.options.selectedClass)}}},rebuild:function(){this.$ul.html("");this.options.multiple=this.$select.attr("multiple")==="multiple";this.buildSelectAll();this.buildDropdownOptions();this.buildFilter();this.updateButtonText();this.updateSelectAll();if(this.options.disableIfEmpty&&c("option",this.$select).length<=0){this.disable()}if(this.options.dropRight){this.$ul.addClass("pull-right")}},dataprovider:function(g){var h="";var e=0;var f=c("");c.each(g,function(j,k){var i;if(c.isArray(k.children)){e++;i=c("<optgroup/>").attr({label:k.label||"Group "+e});d(k.children,function(l){i.append(c("<option/>").attr({value:l.value,label:l.label||l.value,title:l.title,selected:!!l.selected}))});h+="</optgroup>"}else{i=c("<option/>").attr({value:k.value,label:k.label||k.value,title:k.title,selected:!!k.selected})}f=f.add(i)});this.$select.empty().append(f);this.rebuild()},enable:function(){this.$select.prop("disabled",false);this.$button.prop("disabled",false).removeClass("disabled")},disable:function(){this.$select.prop("disabled",true);this.$button.prop("disabled",true).addClass("disabled")},setOptions:function(e){this.options=this.mergeOptions(e)},mergeOptions:function(e){return c.extend(true,{},this.defaults,e)},hasSelectAll:function(){return c("li."+this.options.selectAllValue,this.$ul).length>0},updateSelectAll:function(){if(this.hasSelectAll()){var i=c("li:not(.multiselect-item):not(.filter-hidden) input:enabled",this.$ul);var h=i.length;var f=i.filter(":checked").length;var e=c("li."+this.options.selectAllValue,this.$ul);var g=e.find("input");if(f>0&&f===h){g.prop("checked",true);e.addClass(this.options.selectedClass)}else{g.prop("checked",false);e.removeClass(this.options.selectedClass)}}},updateButtonText:function(){var e=this.getSelected();c(".multiselect",this.$container).html(this.options.buttonText(e,this.$select));c(".multiselect",this.$container).attr("title",this.options.buttonTitle(e,this.$select))},getSelected:function(){return c("option",this.$select).filter(":selected")},getOptionByValue:function(h){var e=c("option",this.$select);var j=h.toString();for(var f=0;f<e.length;f=f+1){var g=e[f];if(g.value===j){return c(g)}}},getInputByValue:function(h){var g=c("li input",this.$ul);var j=h.toString();for(var e=0;e<g.length;e=e+1){var f=g[e];if(f.value===j){return c(f)}}},updateOriginalOptions:function(){this.originalOptions=this.$select.clone()[0].options},asyncFunction:function(h,g,e){var f=Array.prototype.slice.call(arguments,3);return setTimeout(function(){h.apply(e||window,f)},g)}};c.fn.multiselect=function(f,g,e){return this.each(function(){var i=c(this).data("multiselect");var h=typeof f==="object"&&f;if(!i){i=new b(this,h);c(this).data("multiselect",i)}if(typeof f==="string"){i[f](g,e);if(f==="destroy"){c(this).data("multiselect",false)}}})};c.fn.multiselect.Constructor=b;c(function(){c("select[data-role=multiselect]").multiselect()})}(window.jQuery);
(function(){function a(b){var c=a.modules[b];if(!c){throw new Error('failed to require "'+b+'"')}if(!("exports" in c)&&typeof c.definition==="function"){c.client=c.component=true;c.definition.call(this,c.exports={},c);delete c.definition}return c.exports}a.modules={};a.register=function(b,c){a.modules[b]={definition:c}};a.define=function(c,b){a.modules[c]={exports:b}};a.register("component~emitter@1.1.2",function(c,d){d.exports=e;function e(f){if(f){return b(f)}}function b(g){for(var f in e.prototype){g[f]=e.prototype[f]}return g}e.prototype.on=e.prototype.addEventListener=function(g,f){this._callbacks=this._callbacks||{};(this._callbacks[g]=this._callbacks[g]||[]).push(f);return this};e.prototype.once=function(i,h){var g=this;this._callbacks=this._callbacks||{};function f(){g.off(i,f);h.apply(this,arguments)}f.fn=h;this.on(i,f);return this};e.prototype.off=e.prototype.removeListener=e.prototype.removeAllListeners=e.prototype.removeEventListener=function(k,h){this._callbacks=this._callbacks||{};if(0==arguments.length){this._callbacks={};return this}var j=this._callbacks[k];if(!j){return this}if(1==arguments.length){delete this._callbacks[k];return this}var f;for(var g=0;g<j.length;g++){f=j[g];if(f===h||f.fn===h){j.splice(g,1);break}}return this};e.prototype.emit=function(k){this._callbacks=this._callbacks||{};var g=[].slice.call(arguments,1),j=this._callbacks[k];if(j){j=j.slice(0);for(var h=0,f=j.length;h<f;++h){j[h].apply(this,g)}}return this};e.prototype.listeners=function(f){this._callbacks=this._callbacks||{};return this._callbacks[f]||[]};e.prototype.hasListeners=function(f){return !!this.listeners(f).length}});a.register("dropzone",function(b,c){c.exports=a("dropzone/lib/dropzone.js")});a.register("dropzone/lib/dropzone.js",function(b,c){(function(){var k,f,e,h,d,i,n,m,l={}.hasOwnProperty,g=function(r,p){for(var o in p){if(l.call(p,o)){r[o]=p[o]}}function q(){this.constructor=r}q.prototype=p.prototype;r.prototype=new q();r.__super__=p.prototype;return r},j=[].slice;f=typeof Emitter!=="undefined"&&Emitter!==null?Emitter:a("component~emitter@1.1.2");n=function(){};k=(function(p){var q;g(o,p);o.prototype.events=["drop","dragstart","dragend","dragenter","dragover","dragleave","addedfile","removedfile","thumbnail","error","errormultiple","processing","processingmultiple","uploadprogress","totaluploadprogress","sending","sendingmultiple","success","successmultiple","canceled","canceledmultiple","complete","completemultiple","reset","maxfilesexceeded","maxfilesreached"];o.prototype.defaultOptions={url:null,method:"post",withCredentials:false,parallelUploads:2,uploadMultiple:false,maxFilesize:256,paramName:"file",createImageThumbnails:true,maxThumbnailFilesize:10,thumbnailWidth:100,thumbnailHeight:100,maxFiles:null,params:{},clickable:true,ignoreHiddenFiles:true,acceptedFiles:null,acceptedMimeTypes:null,autoProcessQueue:true,autoQueue:true,addRemoveLinks:false,previewsContainer:null,dictDefaultMessage:"Drop files here to upload",dictFallbackMessage:"Your browser does not support drag'n'drop file uploads.",dictFallbackText:"Please use the fallback form below to upload your files like in the olden days.",dictFileTooBig:"File is too big ({{filesize}}MiB). Max filesize: {{maxFilesize}}MiB.",dictInvalidFileType:"You can't upload files of this type.",dictResponseError:"Server responded with {{statusCode}} code.",dictCancelUpload:"Cancel upload",dictCancelUploadConfirmation:"Are you sure you want to cancel this upload?",dictRemoveFile:"Remove file",dictRemoveFileConfirmation:null,dictMaxFilesExceeded:"You can not upload any more files.",accept:function(s,r){return r()},init:function(){return n},forceFallback:false,fallback:function(){var w,s,t,v,r,u;this.element.className=""+this.element.className+" dz-browser-not-supported";u=this.element.getElementsByTagName("div");for(v=0,r=u.length;v<r;v++){w=u[v];if(/(^| )dz-message($| )/.test(w.className)){s=w;w.className="dz-message";continue}}if(!s){s=o.createElement('<div class="dz-message"><span></span></div>');this.element.appendChild(s)}t=s.getElementsByTagName("span")[0];if(t){t.textContent=this.options.dictFallbackMessage}return this.element.appendChild(this.getFallbackForm())},resize:function(s){var u,t,r;u={srcX:0,srcY:0,srcWidth:s.width,srcHeight:s.height};t=s.width/s.height;u.optWidth=this.options.thumbnailWidth;u.optHeight=this.options.thumbnailHeight;if((u.optWidth==null)&&(u.optHeight==null)){u.optWidth=u.srcWidth;u.optHeight=u.srcHeight}else{if(u.optWidth==null){u.optWidth=t*u.optHeight}else{if(u.optHeight==null){u.optHeight=(1/t)*u.optWidth}}}r=u.optWidth/u.optHeight;if(s.height<u.optHeight||s.width<u.optWidth){u.trgHeight=u.srcHeight;u.trgWidth=u.srcWidth}else{if(t>r){u.srcHeight=s.height;u.srcWidth=u.srcHeight*r}else{u.srcWidth=s.width;u.srcHeight=u.srcWidth/r}}u.srcX=(s.width-u.srcWidth)/2;u.srcY=(s.height-u.srcHeight)/2;return u},drop:function(r){return this.element.classList.remove("dz-drag-hover")},dragstart:n,dragend:function(r){return this.element.classList.remove("dz-drag-hover")},dragenter:function(r){return this.element.classList.add("dz-drag-hover")},dragover:function(r){return this.element.classList.add("dz-drag-hover")},dragleave:function(r){return this.element.classList.remove("dz-drag-hover")},paste:n,reset:function(){return this.element.classList.remove("dz-started")},addedfile:function(u){var t,C,D,A,z,w,E,s,r,B,y,v,x;if(this.element===this.previewsContainer){this.element.classList.add("dz-started")}if(this.previewsContainer){u.previewElement=o.createElement(this.options.previewTemplate.trim());u.previewTemplate=u.previewElement;this.previewsContainer.appendChild(u.previewElement);B=u.previewElement.querySelectorAll("[data-dz-name]");for(A=0,E=B.length;A<E;A++){t=B[A];t.textContent=u.name}y=u.previewElement.querySelectorAll("[data-dz-size]");for(z=0,s=y.length;z<s;z++){t=y[z];t.innerHTML=this.filesize(u.size)}if(this.options.addRemoveLinks){u._removeLink=o.createElement('<a class="dz-remove" href="javascript:undefined;" data-dz-remove>'+this.options.dictRemoveFile+"</a>");u.previewElement.appendChild(u._removeLink)}C=(function(F){return function(G){G.preventDefault();G.stopPropagation();if(u.status===o.UPLOADING){return o.confirm(F.options.dictCancelUploadConfirmation,function(){return F.removeFile(u)})}else{if(F.options.dictRemoveFileConfirmation){return o.confirm(F.options.dictRemoveFileConfirmation,function(){return F.removeFile(u)})}else{return F.removeFile(u)}}}})(this);v=u.previewElement.querySelectorAll("[data-dz-remove]");x=[];for(w=0,r=v.length;w<r;w++){D=v[w];x.push(D.addEventListener("click",C))}return x}},removedfile:function(r){var s;if(r.previewElement){if((s=r.previewElement)!=null){s.parentNode.removeChild(r.previewElement)}}return this._updateMaxFilesReachedClass()},thumbnail:function(u,x){var t,w,s,v,r;if(u.previewElement){u.previewElement.classList.remove("dz-file-preview");u.previewElement.classList.add("dz-image-preview");v=u.previewElement.querySelectorAll("[data-dz-thumbnail]");r=[];for(w=0,s=v.length;w<s;w++){t=v[w];t.alt=u.name;r.push(t.src=x)}return r}},error:function(t,v){var u,x,s,w,r;if(t.previewElement){t.previewElement.classList.add("dz-error");if(typeof v!=="String"&&v.error){v=v.error}w=t.previewElement.querySelectorAll("[data-dz-errormessage]");r=[];for(x=0,s=w.length;x<s;x++){u=w[x];r.push(u.textContent=v)}return r}},errormultiple:n,processing:function(r){if(r.previewElement){r.previewElement.classList.add("dz-processing");if(r._removeLink){return r._removeLink.textContent=this.options.dictCancelUpload}}},processingmultiple:n,uploadprogress:function(v,t,u){var w,y,s,x,r;if(v.previewElement){x=v.previewElement.querySelectorAll("[data-dz-uploadprogress]");r=[];for(y=0,s=x.length;y<s;y++){w=x[y];r.push(w.style.width=""+t+"%")}return r}},totaluploadprogress:n,sending:n,sendingmultiple:n,success:function(r){if(r.previewElement){return r.previewElement.classList.add("dz-success")}},successmultiple:n,canceled:function(r){return this.emit("error",r,"Upload canceled.")},canceledmultiple:n,complete:function(r){if(r._removeLink){return r._removeLink.textContent=this.options.dictRemoveFile}},completemultiple:n,maxfilesexceeded:n,maxfilesreached:n,previewTemplate:'<div class="dz-preview dz-file-preview">\n  <div class="dz-details">\n    <div class="dz-filename"><span data-dz-name></span></div>\n    <div class="dz-size" data-dz-size></div>\n    <img data-dz-thumbnail />\n  </div>\n  <div class="dz-progress"><span class="dz-upload" data-dz-uploadprogress></span></div>\n  <div class="dz-success-mark"><span>âœ”</span></div>\n  <div class="dz-error-mark"><span>âœ˜</span></div>\n  <div class="dz-error-message"><span data-dz-errormessage></span></div>\n</div>'};q=function(){var t,s,v,w,x,u,r;w=arguments[0],v=2<=arguments.length?j.call(arguments,1):[];for(u=0,r=v.length;u<r;u++){s=v[u];for(t in s){x=s[t];w[t]=x}}return w};function o(t,s){var r,v,u;this.element=t;this.version=o.version;this.defaultOptions.previewTemplate=this.defaultOptions.previewTemplate.replace(/\n*/g,"");this.clickableElements=[];this.listeners=[];this.files=[];if(typeof this.element==="string"){this.element=document.querySelector(this.element)}if(!(this.element&&(this.element.nodeType!=null))){throw new Error("Invalid dropzone element.")}if(this.element.dropzone){throw new Error("Dropzone already attached.")}o.instances.push(this);this.element.dropzone=this;r=(u=o.optionsForElement(this.element))!=null?u:{};this.options=q({},this.defaultOptions,r,s!=null?s:{});if(this.options.forceFallback||!o.isBrowserSupported()){return this.options.fallback.call(this)}if(this.options.url==null){this.options.url=this.element.getAttribute("action")}if(!this.options.url){throw new Error("No URL provided.")}if(this.options.acceptedFiles&&this.options.acceptedMimeTypes){throw new Error("You can't provide both 'acceptedFiles' and 'acceptedMimeTypes'. 'acceptedMimeTypes' is deprecated.")}if(this.options.acceptedMimeTypes){this.options.acceptedFiles=this.options.acceptedMimeTypes;delete this.options.acceptedMimeTypes}this.options.method=this.options.method.toUpperCase();if((v=this.getExistingFallback())&&v.parentNode){v.parentNode.removeChild(v)}if(this.options.previewsContainer!==false){if(this.options.previewsContainer){this.previewsContainer=o.getElement(this.options.previewsContainer,"previewsContainer")}else{this.previewsContainer=this.element}}if(this.options.clickable){if(this.options.clickable===true){this.clickableElements=[this.element]}else{this.clickableElements=o.getElements(this.options.clickable,"clickable")}}this.init()}o.prototype.getAcceptedFiles=function(){var t,v,s,u,r;u=this.files;r=[];for(v=0,s=u.length;v<s;v++){t=u[v];if(t.accepted){r.push(t)}}return r};o.prototype.getRejectedFiles=function(){var t,v,s,u,r;u=this.files;r=[];for(v=0,s=u.length;v<s;v++){t=u[v];if(!t.accepted){r.push(t)}}return r};o.prototype.getFilesWithStatus=function(t){var u,w,s,v,r;v=this.files;r=[];for(w=0,s=v.length;w<s;w++){u=v[w];if(u.status===t){r.push(u)}}return r};o.prototype.getQueuedFiles=function(){return this.getFilesWithStatus(o.QUEUED)};o.prototype.getUploadingFiles=function(){return this.getFilesWithStatus(o.UPLOADING)};o.prototype.getActiveFiles=function(){var t,v,s,u,r;u=this.files;r=[];for(v=0,s=u.length;v<s;v++){t=u[v];if(t.status===o.UPLOADING||t.status===o.QUEUED){r.push(t)}}return r};o.prototype.init=function(){var t,x,w,v,s,u,r;if(this.element.tagName==="form"){this.element.setAttribute("enctype","multipart/form-data")}if(this.element.classList.contains("dropzone")&&!this.element.querySelector(".dz-message")){this.element.appendChild(o.createElement('<div class="dz-default dz-message"><span>'+this.options.dictDefaultMessage+"</span></div>"))}if(this.clickableElements.length){w=(function(y){return function(){if(y.hiddenFileInput){document.body.removeChild(y.hiddenFileInput)}y.hiddenFileInput=document.createElement("input");y.hiddenFileInput.setAttribute("type","file");if((y.options.maxFiles==null)||y.options.maxFiles>1){y.hiddenFileInput.setAttribute("multiple","multiple")}y.hiddenFileInput.className="dz-hidden-input";if(y.options.acceptedFiles!=null){y.hiddenFileInput.setAttribute("accept",y.options.acceptedFiles)}y.hiddenFileInput.style.visibility="hidden";y.hiddenFileInput.style.position="absolute";y.hiddenFileInput.style.top="0";y.hiddenFileInput.style.left="0";y.hiddenFileInput.style.height="0";y.hiddenFileInput.style.width="0";document.body.appendChild(y.hiddenFileInput);return y.hiddenFileInput.addEventListener("change",function(){var A,B,C,z;B=y.hiddenFileInput.files;if(B.length){for(C=0,z=B.length;C<z;C++){A=B[C];y.addFile(A)}}return w()})}})(this);w()}this.URL=(u=window.URL)!=null?u:window.webkitURL;r=this.events;for(v=0,s=r.length;v<s;v++){t=r[v];this.on(t,this.options[t])}this.on("uploadprogress",(function(y){return function(){return y.updateTotalUploadProgress()}})(this));this.on("removedfile",(function(y){return function(){return y.updateTotalUploadProgress()}})(this));this.on("canceled",(function(y){return function(z){return y.emit("complete",z)}})(this));this.on("complete",(function(y){return function(z){if(y.getUploadingFiles().length===0&&y.getQueuedFiles().length===0){return setTimeout((function(){return y.emit("queuecomplete")}),0)}}})(this));x=function(y){y.stopPropagation();if(y.preventDefault){return y.preventDefault()}else{return y.returnValue=false}};this.listeners=[{element:this.element,events:{dragstart:(function(y){return function(z){return y.emit("dragstart",z)}})(this),dragenter:(function(y){return function(z){x(z);return y.emit("dragenter",z)}})(this),dragover:(function(y){return function(A){var z;try{z=A.dataTransfer.effectAllowed}catch(B){}A.dataTransfer.dropEffect="move"===z||"linkMove"===z?"move":"copy";x(A);return y.emit("dragover",A)}})(this),dragleave:(function(y){return function(z){return y.emit("dragleave",z)}})(this),drop:(function(y){return function(z){x(z);return y.drop(z)}})(this),dragend:(function(y){return function(z){return y.emit("dragend",z)}})(this)}}];this.clickableElements.forEach((function(y){return function(z){return y.listeners.push({element:z,events:{click:function(A){if((z!==y.element)||(A.target===y.element||o.elementInside(A.target,y.element.querySelector(".dz-message")))){return y.hiddenFileInput.click()}}}})}})(this));this.enable();return this.options.init.call(this)};o.prototype.destroy=function(){var r;this.disable();this.removeAllFiles(true);if((r=this.hiddenFileInput)!=null?r.parentNode:void 0){this.hiddenFileInput.parentNode.removeChild(this.hiddenFileInput);this.hiddenFileInput=null}delete this.element.dropzone;return o.instances.splice(o.instances.indexOf(this),1)};o.prototype.updateTotalUploadProgress=function(){var t,u,y,r,x,w,s,v;r=0;y=0;t=this.getActiveFiles();if(t.length){v=this.getActiveFiles();for(w=0,s=v.length;w<s;w++){u=v[w];r+=u.upload.bytesSent;y+=u.upload.total}x=100*r/y}else{x=100}return this.emit("totaluploadprogress",x,y,r)};o.prototype._getParamName=function(r){if(typeof this.options.paramName==="function"){return this.options.paramName(r)}else{return""+this.options.paramName+(this.options.uploadMultiple?"["+r+"]":"")}};o.prototype.getFallbackForm=function(){var s,r,u,t;if(s=this.getExistingFallback()){return s}u='<div class="dz-fallback">';if(this.options.dictFallbackText){u+="<p>"+this.options.dictFallbackText+"</p>"}u+='<input type="file" name="'+(this._getParamName(0))+'" '+(this.options.uploadMultiple?'multiple="multiple"':void 0)+' /><input type="submit" value="Upload!"></div>';r=o.createElement(u);if(this.element.tagName!=="FORM"){t=o.createElement('<form action="'+this.options.url+'" enctype="multipart/form-data" method="'+this.options.method+'"></form>');t.appendChild(r)}else{this.element.setAttribute("enctype","multipart/form-data");this.element.setAttribute("method",this.options.method)}return t!=null?t:r};o.prototype.getExistingFallback=function(){var w,t,s,v,r,u;t=function(A){var y,z,x;for(z=0,x=A.length;z<x;z++){y=A[z];if(/(^| )fallback($| )/.test(y.className)){return y}}};u=["div","form"];for(v=0,r=u.length;v<r;v++){s=u[v];if(w=t(this.element.getElementsByTagName(s))){return w}}};o.prototype.setupEventListeners=function(){var u,t,x,w,s,v,r;v=this.listeners;r=[];for(w=0,s=v.length;w<s;w++){u=v[w];r.push((function(){var y,z;y=u.events;z=[];for(t in y){x=y[t];z.push(u.element.addEventListener(t,x,false))}return z})())}return r};o.prototype.removeEventListeners=function(){var u,t,x,w,s,v,r;v=this.listeners;r=[];for(w=0,s=v.length;w<s;w++){u=v[w];r.push((function(){var y,z;y=u.events;z=[];for(t in y){x=y[t];z.push(u.element.removeEventListener(t,x,false))}return z})())}return r};o.prototype.disable=function(){var t,v,s,u,r;this.clickableElements.forEach(function(w){return w.classList.remove("dz-clickable")});this.removeEventListeners();u=this.files;r=[];for(v=0,s=u.length;v<s;v++){t=u[v];r.push(this.cancelUpload(t))}return r};o.prototype.enable=function(){this.clickableElements.forEach(function(r){return r.classList.add("dz-clickable")});return this.setupEventListeners()};o.prototype.filesize=function(s){var r;if(s>=1024*1024*1024*1024/10){s=s/(1024*1024*1024*1024/10);r="TiB"}else{if(s>=1024*1024*1024/10){s=s/(1024*1024*1024/10);r="GiB"}else{if(s>=1024*1024/10){s=s/(1024*1024/10);r="MiB"}else{if(s>=1024/10){s=s/(1024/10);r="KiB"}else{s=s*10;r="b"}}}}return"<strong>"+(Math.round(s)/10)+"</strong> "+r};o.prototype._updateMaxFilesReachedClass=function(){if((this.options.maxFiles!=null)&&this.getAcceptedFiles().length>=this.options.maxFiles){if(this.getAcceptedFiles().length===this.options.maxFiles){this.emit("maxfilesreached",this.files)}return this.element.classList.add("dz-max-files-reached")}else{return this.element.classList.remove("dz-max-files-reached")}};o.prototype.drop=function(t){var s,r;if(!t.dataTransfer){return}this.emit("drop",t);s=t.dataTransfer.files;if(s.length){r=t.dataTransfer.items;if(r&&r.length&&(r[0].webkitGetAsEntry!=null)){this._addFilesFromItems(r)}else{this.handleFiles(s)}}};o.prototype.paste=function(t){var r,s;if((t!=null?(s=t.clipboardData)!=null?s.items:void 0:void 0)==null){return}this.emit("paste",t);r=t.clipboardData.items;if(r.length){return this._addFilesFromItems(r)}};o.prototype.handleFiles=function(u){var t,v,s,r;r=[];for(v=0,s=u.length;v<s;v++){t=u[v];r.push(this.addFile(t))}return r};o.prototype._addFilesFromItems=function(t){var v,u,w,s,r;r=[];for(w=0,s=t.length;w<s;w++){u=t[w];if((u.webkitGetAsEntry!=null)&&(v=u.webkitGetAsEntry())){if(v.isFile){r.push(this.addFile(u.getAsFile()))}else{if(v.isDirectory){r.push(this._addFilesFromDirectory(v,v.name))}else{r.push(void 0)}}}else{if(u.getAsFile!=null){if((u.kind==null)||u.kind==="file"){r.push(this.addFile(u.getAsFile()))}else{r.push(void 0)}}else{r.push(void 0)}}}return r};o.prototype._addFilesFromDirectory=function(r,t){var s,u;s=r.createReader();u=(function(v){return function(w){var y,z,x;for(z=0,x=w.length;z<x;z++){y=w[z];if(y.isFile){y.file(function(A){if(v.options.ignoreHiddenFiles&&A.name.substring(0,1)==="."){return}A.fullPath=""+t+"/"+A.name;return v.addFile(A)})}else{if(y.isDirectory){v._addFilesFromDirectory(y,""+t+"/"+y.name)}}}}})(this);return s.readEntries(u,function(v){return typeof console!=="undefined"&&console!==null?typeof console.log==="function"?console.log(v):void 0:void 0})};o.prototype.accept=function(s,r){if(s.size>this.options.maxFilesize*1024*1024){return r(this.options.dictFileTooBig.replace("{{filesize}}",Math.round(s.size/1024/10.24)/100).replace("{{maxFilesize}}",this.options.maxFilesize))}else{if(!o.isValidFile(s,this.options.acceptedFiles)){return r(this.options.dictInvalidFileType)}else{if((this.options.maxFiles!=null)&&this.getAcceptedFiles().length>=this.options.maxFiles){r(this.options.dictMaxFilesExceeded.replace("{{maxFiles}}",this.options.maxFiles));return this.emit("maxfilesexceeded",s)}else{return this.options.accept.call(this,s,r)}}}};o.prototype.addFile=function(r){r.upload={progress:0,total:r.size,bytesSent:0};this.files.push(r);r.status=o.ADDED;this.emit("addedfile",r);this._enqueueThumbnail(r);return this.accept(r,(function(s){return function(t){if(t){r.accepted=false;s._errorProcessing([r],t)}else{r.accepted=true;if(s.options.autoQueue){s.enqueueFile(r)}}return s._updateMaxFilesReachedClass()}})(this))};o.prototype.enqueueFiles=function(t){var s,u,r;for(u=0,r=t.length;u<r;u++){s=t[u];this.enqueueFile(s)}return null};o.prototype.enqueueFile=function(r){if(r.status===o.ADDED&&r.accepted===true){r.status=o.QUEUED;if(this.options.autoProcessQueue){return setTimeout(((function(s){return function(){return s.processQueue()}})(this)),0)}}else{throw new Error("This file can't be queued because it has already been processed or was rejected.")}};o.prototype._thumbnailQueue=[];o.prototype._processingThumbnail=false;o.prototype._enqueueThumbnail=function(r){if(this.options.createImageThumbnails&&r.type.match(/image.*/)&&r.size<=this.options.maxThumbnailFilesize*1024*1024){this._thumbnailQueue.push(r);return setTimeout(((function(s){return function(){return s._processThumbnailQueue()}})(this)),0)}};o.prototype._processThumbnailQueue=function(){if(this._processingThumbnail||this._thumbnailQueue.length===0){return}this._processingThumbnail=true;return this.createThumbnail(this._thumbnailQueue.shift(),(function(r){return function(){r._processingThumbnail=false;return r._processThumbnailQueue()}})(this))};o.prototype.removeFile=function(r){if(r.status===o.UPLOADING){this.cancelUpload(r)}this.files=m(this.files,r);this.emit("removedfile",r);if(this.files.length===0){return this.emit("reset")}};o.prototype.removeAllFiles=function(v){var s,u,r,t;if(v==null){v=false}t=this.files.slice();for(u=0,r=t.length;u<r;u++){s=t[u];if(s.status!==o.UPLOADING||v){this.removeFile(s)}}return null};o.prototype.createThumbnail=function(s,t){var r;r=new FileReader;r.onload=(function(u){return function(){var v;v=document.createElement("img");v.onload=function(){var y,x,B,D,z,w,C,A;s.width=v.width;s.height=v.height;B=u.options.resize.call(u,s);if(B.trgWidth==null){B.trgWidth=B.optWidth}if(B.trgHeight==null){B.trgHeight=B.optHeight}y=document.createElement("canvas");x=y.getContext("2d");y.width=B.trgWidth;y.height=B.trgHeight;i(x,v,(z=B.srcX)!=null?z:0,(w=B.srcY)!=null?w:0,B.srcWidth,B.srcHeight,(C=B.trgX)!=null?C:0,(A=B.trgY)!=null?A:0,B.trgWidth,B.trgHeight);D=y.toDataURL("image/png");u.emit("thumbnail",s,D);if(t!=null){return t()}};return v.src=r.result}})(this);return r.readAsDataURL(s)};o.prototype.processQueue=function(){var s,u,r,t;u=this.options.parallelUploads;r=this.getUploadingFiles().length;s=r;if(r>=u){return}t=this.getQueuedFiles();if(!(t.length>0)){return}if(this.options.uploadMultiple){return this.processFiles(t.slice(0,u-r))}else{while(s<u){if(!t.length){return}this.processFile(t.shift());s++}}};o.prototype.processFile=function(r){return this.processFiles([r])};o.prototype.processFiles=function(t){var s,u,r;for(u=0,r=t.length;u<r;u++){s=t[u];s.processing=true;s.status=o.UPLOADING;this.emit("processing",s)}if(this.options.uploadMultiple){this.emit("processingmultiple",t)}return this.uploadFiles(t)};o.prototype._getFilesWithXhr=function(t){var r,s;return s=(function(){var x,v,w,u;w=this.files;u=[];for(x=0,v=w.length;x<v;x++){r=w[x];if(r.xhr===t){u.push(r)}}return u}).call(this)};o.prototype.cancelUpload=function(v){var t,u,y,w,s,r,x;if(v.status===o.UPLOADING){u=this._getFilesWithXhr(v.xhr);for(y=0,s=u.length;y<s;y++){t=u[y];t.status=o.CANCELED}v.xhr.abort();for(w=0,r=u.length;w<r;w++){t=u[w];this.emit("canceled",t)}if(this.options.uploadMultiple){this.emit("canceledmultiple",u)}}else{if((x=v.status)===o.ADDED||x===o.QUEUED){v.status=o.CANCELED;this.emit("canceled",v);if(this.options.uploadMultiple){this.emit("canceledmultiple",[v])}}}if(this.options.autoProcessQueue){return this.processQueue()}};o.prototype.uploadFile=function(r){return this.uploadFiles([r])};o.prototype.uploadFiles=function(D){var S,Q,I,N,F,A,R,L,H,O,X,M,E,t,J,P,G,z,x,v,s,U,W,V,T,r,K,C,B,y,w,u;G=new XMLHttpRequest();for(z=0,U=D.length;z<U;z++){S=D[z];S.xhr=G}G.open(this.options.method,this.options.url,true);G.withCredentials=!!this.options.withCredentials;t=null;I=(function(Y){return function(){var ab,aa,Z;Z=[];for(ab=0,aa=D.length;ab<aa;ab++){S=D[ab];Z.push(Y._errorProcessing(D,t||Y.options.dictResponseError.replace("{{statusCode}}",G.status),G))}return Z}})(this);J=(function(Y){return function(ai){var ad,aa,ah,af,ae,ac,ab,Z,ag;if(ai!=null){aa=100*ai.loaded/ai.total;for(ah=0,ac=D.length;ah<ac;ah++){S=D[ah];S.upload={progress:aa,total:ai.total,bytesSent:ai.loaded}}}else{ad=true;aa=100;for(af=0,ab=D.length;af<ab;af++){S=D[af];if(!(S.upload.progress===100&&S.upload.bytesSent===S.upload.total)){ad=false}S.upload.progress=aa;S.upload.bytesSent=S.upload.total}if(ad){return}}ag=[];for(ae=0,Z=D.length;ae<Z;ae++){S=D[ae];ag.push(Y.emit("uploadprogress",S,aa,S.upload.bytesSent))}return ag}})(this);G.onload=(function(Y){return function(aa){var Z;if(D[0].status===o.CANCELED){return}if(G.readyState!==4){return}t=G.responseText;if(G.getResponseHeader("content-type")&&~G.getResponseHeader("content-type").indexOf("application/json")){try{t=JSON.parse(t)}catch(ab){aa=ab;t="Invalid JSON response from server."}}J();if(!((200<=(Z=G.status)&&Z<300))){return I()}else{return Y._finished(D,t,aa)}}})(this);G.onerror=(function(Y){return function(){if(D[0].status===o.CANCELED){return}return I()}})(this);E=(K=G.upload)!=null?K:G;E.onprogress=J;A={Accept:"application/json","Cache-Control":"no-cache","X-Requested-With":"XMLHttpRequest"};if(this.options.headers){q(A,this.options.headers)}for(N in A){F=A[N];G.setRequestHeader(N,F)}Q=new FormData();if(this.options.params){C=this.options.params;for(X in C){P=C[X];Q.append(X,P)}}for(x=0,W=D.length;x<W;x++){S=D[x];this.emit("sending",S,G,Q)}if(this.options.uploadMultiple){this.emit("sendingmultiple",D,G,Q)}if(this.element.tagName==="FORM"){B=this.element.querySelectorAll("input, textarea, select, button");for(v=0,V=B.length;v<V;v++){L=B[v];H=L.getAttribute("name");O=L.getAttribute("type");if(L.tagName==="SELECT"&&L.hasAttribute("multiple")){y=L.options;for(s=0,T=y.length;s<T;s++){M=y[s];if(M.selected){Q.append(H,M.value)}}}else{if(!O||((w=O.toLowerCase())!=="checkbox"&&w!=="radio")||L.checked){Q.append(H,L.value)}}}}for(R=r=0,u=D.length-1;0<=u?r<=u:r>=u;R=0<=u?++r:--r){Q.append(this._getParamName(R),D[R],D[R].name)}return G.send(Q)};o.prototype._finished=function(t,v,w){var s,u,r;for(u=0,r=t.length;u<r;u++){s=t[u];s.status=o.SUCCESS;this.emit("success",s,v,w);this.emit("complete",s)}if(this.options.uploadMultiple){this.emit("successmultiple",t,v,w);this.emit("completemultiple",t)}if(this.options.autoProcessQueue){return this.processQueue()}};o.prototype._errorProcessing=function(u,t,w){var s,v,r;for(v=0,r=u.length;v<r;v++){s=u[v];s.status=o.ERROR;this.emit("error",s,t,w);this.emit("complete",s)}if(this.options.uploadMultiple){this.emit("errormultiple",u,t,w);this.emit("completemultiple",u)}if(this.options.autoProcessQueue){return this.processQueue()}};return o})(f);k.version="3.10.2";k.options={};k.optionsForElement=function(o){if(o.getAttribute("id")){return k.options[e(o.getAttribute("id"))]}else{return void 0}};k.instances=[];k.forElement=function(o){if(typeof o==="string"){o=document.querySelector(o)}if((o!=null?o.dropzone:void 0)==null){throw new Error("No Dropzone found for given element. This is probably because you're trying to access it before Dropzone had the time to initialize. Use the `init` option to setup any additional observers on your Dropzone.")}return o.dropzone};k.autoDiscover=true;k.discover=function(){var t,q,r,s,p,o;if(document.querySelectorAll){r=document.querySelectorAll(".dropzone")}else{r=[];t=function(y){var w,x,v,u;u=[];for(x=0,v=y.length;x<v;x++){w=y[x];if(/(^| )dropzone($| )/.test(w.className)){u.push(r.push(w))}else{u.push(void 0)}}return u};t(document.getElementsByTagName("div"));t(document.getElementsByTagName("form"))}o=[];for(s=0,p=r.length;s<p;s++){q=r[s];if(k.optionsForElement(q)!==false){o.push(new k(q))}else{o.push(void 0)}}return o};k.blacklistedBrowsers=[/opera.*Macintosh.*version\/12/i];k.isBrowserSupported=function(){var p,q,s,o,r;p=true;if(window.File&&window.FileReader&&window.FileList&&window.Blob&&window.FormData&&document.querySelector){if(!("classList" in document.createElement("a"))){p=false}else{r=k.blacklistedBrowsers;for(s=0,o=r.length;s<o;s++){q=r[s];if(q.test(navigator.userAgent)){p=false;continue}}}}else{p=false}return p};m=function(t,q){var r,s,p,o;o=[];for(s=0,p=t.length;s<p;s++){r=t[s];if(r!==q){o.push(r)}}return o};e=function(o){return o.replace(/[\-_](\w)/g,function(p){return p.charAt(1).toUpperCase()})};k.createElement=function(o){var p;p=document.createElement("div");p.innerHTML=o;return p.childNodes[0]};k.elementInside=function(p,o){if(p===o){return true}while(p=p.parentNode){if(p===o){return true}}return false};k.getElement=function(q,o){var p;if(typeof q==="string"){p=document.querySelector(q)}else{if(q.nodeType!=null){p=q}}if(p==null){throw new Error("Invalid `"+o+"` option provided. Please provide a CSS selector or a plain HTML element.")}return p};k.getElements=function(u,p){var w,r,o,t,s,x,q,v;if(u instanceof Array){o=[];try{for(t=0,x=u.length;t<x;t++){r=u[t];o.push(this.getElement(r,p))}}catch(y){w=y;o=null}}else{if(typeof u==="string"){o=[];v=document.querySelectorAll(u);for(s=0,q=v.length;s<q;s++){r=v[s];o.push(r)}}else{if(u.nodeType!=null){o=[u]}}}if(!((o!=null)&&o.length)){throw new Error("Invalid `"+p+"` option provided. Please provide a CSS selector, a plain HTML element or a list of those.")}return o};k.confirm=function(o,q,p){if(window.confirm(o)){return q()}else{if(p!=null){return p()}}};k.isValidFile=function(r,o){var q,u,s,t,p;if(!o){return true}o=o.split(",");u=r.type;q=u.replace(/\/.*$/,"");for(t=0,p=o.length;t<p;t++){s=o[t];s=s.trim();if(s.charAt(0)==="."){if(r.name.toLowerCase().indexOf(s.toLowerCase(),r.name.length-s.length)!==-1){return true}}else{if(/\/\*$/.test(s)){if(q===s.replace(/\/.*$/,"")){return true}}else{if(u===s){return true}}}}return false};if(typeof jQuery!=="undefined"&&jQuery!==null){jQuery.fn.dropzone=function(o){return this.each(function(){return new k(this,o)})}}if(typeof c!=="undefined"&&c!==null){c.exports=k}else{window.Dropzone=k}k.ADDED="added";k.QUEUED="queued";k.ACCEPTED=k.QUEUED;k.UPLOADING="uploading";k.PROCESSING=k.UPLOADING;k.CANCELED="canceled";k.ERROR="error";k.SUCCESS="success";d=function(s){var q,o,y,r,t,x,p,w,u,v;p=s.naturalWidth;x=s.naturalHeight;o=document.createElement("canvas");o.width=1;o.height=x;y=o.getContext("2d");y.drawImage(s,0,0);r=y.getImageData(0,0,1,x).data;v=0;t=x;w=x;while(w>v){q=r[(w-1)*4+3];if(q===0){t=w}else{v=w}w=(t+v)>>1}u=w/x;if(u===0){return 1}else{return u}};i=function(w,p,u,t,v,q,y,x,o,s){var r;r=d(p);return w.drawImage(p,u,t,v,q,y,x,o,s/r)};h=function(q,u){var z,v,p,y,r,o,x,t,s;p=false;s=true;v=q.document;t=v.documentElement;z=(v.addEventListener?"addEventListener":"attachEvent");x=(v.addEventListener?"removeEventListener":"detachEvent");o=(v.addEventListener?"":"on");y=function(A){if(A.type==="readystatechange"&&v.readyState!=="complete"){return}(A.type==="load"?q:v)[x](o+A.type,y,false);if(!p&&(p=true)){return u.call(q,A.type||A)}};r=function(){var A;try{t.doScroll("left")}catch(B){A=B;setTimeout(r,50);return}return y("poll")};if(v.readyState!=="complete"){if(v.createEventObject&&t.doScroll){try{s=!q.frameElement}catch(w){}if(s){r()}}v[z](o+"DOMContentLoaded",y,false);v[z](o+"readystatechange",y,false);return q[z](o+"load",y,false)}};k._autoDiscoverFunction=function(){if(k.autoDiscover){return k.discover()}};h(window,k._autoDiscoverFunction)}).call(this)});if(typeof exports=="object"){module.exports=a("dropzone")}else{if(typeof define=="function"&&define.amd){define([],function(){return a("dropzone")})}else{this["Dropzone"]=a("dropzone")}}})();
(function(c){var b=0;if(!String.prototype.trim){String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}}var a={init:function(){return this.each(function(){var h=c(this),w,f,u,v,k,l,j,s,x,p,q,i,r=this;if(h.data("isActive")){return}h.data("isActive",true);b+=1;this.plugin_count=b;v='<div class="icr__hidden" id="icr-container__'+this.plugin_count+'"></div>';var n=function(){j=h.prop("type");k=h.prop("disabled");l=h.prop("checked");x=h.prop("name");e()};var e=function(){w=h.parent("label");if(w.length>0){w.after(v);u=c("#icr-container__"+r.plugin_count);h.appendTo(u);w.appendTo(u);q=w.html();i=q.replace(/<input["-=a-zA-Z\u0400-\u04FF\s\d\[\]\_]+>{1}/,"");q=i.trim()}else{s=h.prop("id");w=c("label[for='"+s+"']");w.after(v);u=c("#icr-container__"+r.plugin_count);h.appendTo(u);w.appendTo(u);if(w.length>0){q=w.html();i=q.toString();q=i.trim()}else{throw new Error("Label not found!")}}o()};var o=function(){if(k){if(l){p='<span class="icr disabled checked" id="icr-'+r.plugin_count+'">'}else{p='<span class="icr disabled" id="icr-'+r.plugin_count+'">'}}else{if(l){p='<span class="icr enabled checked" id="icr-'+r.plugin_count+'">'}else{p='<span class="icr enabled" id="icr-'+r.plugin_count+'">'}}p+='<span class="icr__'+j+'"></span>';p+='<span class="icr__text">'+q+"</span>";p+="</span>";u.after(p);f=c("#icr-"+r.plugin_count);g()};var g=function(){f.on("click",function(){if(!k){if(l&&j!=="radio"){m()}else{t()}}});f.on("mousedown",function(y){y.preventDefault();return false});h.on("stateChanged",function(){d()})};var t=function(){h.prop("checked","checked");h.trigger("change");c("input[name='"+x+"']").trigger("stateChanged")};var m=function(){h.removeProp("checked");h.trigger("change");c("input[name='"+x+"']").trigger("stateChanged")};var d=function(){l=h.prop("checked");if(l){f.addClass("checked")}else{f.removeClass("checked")}};n()})}};c.fn.ionCheckRadio=function(d){if(a[d]){return a[d].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof d==="object"||!d){return a.init.apply(this,arguments)}else{c.error("Method "+d+" does not exist for jQuery.ionCheckRadio");return false}}}})(jQuery);
(function(a){a.Jcrop=function(e,C){var J=a.extend({},a.Jcrop.defaults),ag,aj=navigator.userAgent.toLowerCase(),ad=/msie/.test(aj),ai=/msie [1-6]\./.test(aj);function n(av){return Math.round(av)+"px"}function E(av){return J.baseClass+"-"+av}function F(){return a.fx.step.hasOwnProperty("backgroundColor")}function G(av){var aw=a(av).offset();return[aw.left,aw.top]}function H(ay){var av=ay.pageX-ag[0];var aA=ay.pageY-ag[1];var ax=J.rotate||0;var az=(ax/90)%4;if(az==1){var aw=av;av=(ay.pageY-ag[1]);aA=-(ay.pageX-ag[0]-a(".jcrop-holder").height())}else{if(az==2){av=-(ay.pageX-ag[0]-a(".jcrop-holder").width());aA=-(ay.pageY-ag[1]-a(".jcrop-holder").height())}else{if(az==3){var aw=av;av=-(ay.pageY-ag[1]-a(".jcrop-holder").width());aA=(ay.pageX-ag[0])}}}return[av,aA]}function B(av){if(typeof(av)!=="object"){av={}}J=a.extend(J,av);a.each(["onChange","onSelect","onRelease","onDblClick"],function(aw,ax){if(typeof(J[ax])!=="function"){J[ax]=function(){}}})}function g(ax,aA,az){ag=G(at);Q.setCursor(ax==="move"?ax:ax+"-resize");if(ax==="move"){return Q.activateHandlers(S(aA),r,az)}var av=ab.getFixed();var aw=t(ax);var ay=ab.getCorner(t(aw));ab.setPressed(ab.getCorner(aw));ab.setCurrent(ay);Q.activateHandlers(I(ax,av),r,az)}function I(aw,av){return function(ax){if(!J.aspectRatio){switch(aw){case"e":ax[1]=av.y2;break;case"w":ax[1]=av.y2;break;case"n":ax[0]=av.x2;break;case"s":ax[0]=av.x2;break}}else{switch(aw){case"e":ax[1]=av.y+1;break;case"w":ax[1]=av.y+1;break;case"n":ax[0]=av.x+1;break;case"s":ax[0]=av.x+1;break}}ab.setCurrent(ax);X.update()}}function S(aw){var av=aw;ar.watchKeys();return function(ax){ab.moveOffset([ax[0]-av[0],ax[1]-av[1]]);av=ax;X.update()}}function t(av){switch(av){case"n":return"sw";case"s":return"nw";case"e":return"nw";case"w":return"ne";case"ne":return"sw";case"nw":return"se";case"se":return"nw";case"sw":return"ne"}}function c(av){return function(aw){if(J.disabled){return false}if((av==="move")&&!J.allowMove){return false}ag=G(at);s=true;g(av,H(aw));aw.stopPropagation();aw.preventDefault();return false}}function V(az,aw,ay){var av=az.width(),ax=az.height();if((av>aw)&&aw>0){av=aw;ax=(aw/az.width())*az.height()}if((ax>ay)&&ay>0){ax=ay;av=(ay/az.height())*az.width()}N=az.width()/av;f=az.height()/ax;az.width(av).height(ax)}function Z(av){return{x:av.x*N,y:av.y*f,x2:av.x2*N,y2:av.y2*f,w:av.w*N,h:av.h*f}}function r(aw){var av=ab.getFixed();if((av.w>J.minSelect[0])&&(av.h>J.minSelect[1])){X.enableHandles();X.done()}else{X.release()}Q.setCursor(J.allowSelect?"crosshair":"default")}function af(av){if(J.disabled){return false}if(!J.allowSelect){return false}s=true;ag=G(at);X.disableHandles();Q.setCursor("crosshair");var aw=H(av);ab.setPressed(aw);X.update();Q.activateHandlers(aq,r,av.type.substring(0,5)==="touch");ar.watchKeys();av.stopPropagation();av.preventDefault();return false}function aq(av){ab.setCurrent(av);X.update()}function ah(){var av=a("<div></div>").addClass(E("tracker"));if(ad){av.css({opacity:0,backgroundColor:"white"})}return av}if(typeof(e)!=="object"){e=a(e)[0]}if(typeof(C)!=="object"){C={}}B(C);var j={border:"none",visibility:"visible",margin:0,padding:0,position:"absolute",top:0,left:0};var Y=a(e),al=true;if(e.tagName=="IMG"){if(Y[0].width!=0&&Y[0].height!=0){Y.width(Y[0].width);Y.height(Y[0].height)}else{var w=new Image();w.src=Y[0].src;Y.width(w.width);Y.height(w.height)}var at=Y.clone().removeAttr("id").css(j).show();at.width(Y.width());at.height(Y.height());Y.after(at).hide()}else{at=Y.css(j).show();al=false;if(J.shade===null){J.shade=true}}V(at,J.boxWidth,J.boxHeight);var R=at.width(),P=at.height(),aa=a("<div />").width(R).height(P).addClass(E("holder")).css({position:"relative",backgroundColor:J.bgColor}).insertAfter(Y).append(at);if(J.addClass){aa.addClass(J.addClass)}var K=a("<div />"),m=a("<div />").width("100%").height("100%").css({zIndex:310,position:"absolute",overflow:"hidden"}),M=a("<div />").width("100%").height("100%").css("zIndex",320),A=a("<div />").css({position:"absolute",zIndex:600}).dblclick(function(){var av=ab.getFixed();J.onDblClick.call(i,av)}).insertBefore(at).append(m,M);if(al){K=a("<img />").attr("src",at.attr("src")).css(j).width(R).height(P),m.append(K)}if(ai){A.css({overflowY:"hidden"})}var v=J.boundary;var b=ah().width(R+(v*2)).height(P+(v*2)).css({position:"absolute",top:n(-v),left:n(-v),zIndex:290}).mousedown(af);var ap=J.bgColor,ac=J.bgOpacity,z,an,q,U,N,f,p=true,s,D,ae;ag=G(at);var T=(function(){function av(){var aC={},aA=["touchstart","touchmove","touchend"],aB=document.createElement("div"),az;try{for(az=0;az<aA.length;az++){var ax=aA[az];ax="on"+ax;var ay=(ax in aB);if(!ay){aB.setAttribute(ax,"return;");ay=typeof aB[ax]=="function"}aC[aA[az]]=ay}return aC.touchstart&&aC.touchend&&aC.touchmove}catch(aD){return false}}function aw(){if((J.touchSupport===true)||(J.touchSupport===false)){return J.touchSupport}else{return av()}}return{createDragger:function(ax){return function(ay){if(J.disabled){return false}if((ax==="move")&&!J.allowMove){return false}ag=G(at);s=true;g(ax,H(T.cfilter(ay)),true);ay.stopPropagation();ay.preventDefault();return false}},newSelection:function(ax){return af(T.cfilter(ax))},cfilter:function(ax){ax.pageX=ax.originalEvent.changedTouches[0].pageX;ax.pageY=ax.originalEvent.changedTouches[0].pageY;return ax},isSupported:av,support:aw()}}());var ab=(function(){var ax=0,aI=0,aw=0,aH=0,aA,ay;function aC(aL){aL=az(aL);aw=ax=aL[0];aH=aI=aL[1]}function aB(aL){aL=az(aL);aA=aL[0]-aw;ay=aL[1]-aH;aw=aL[0];aH=aL[1]}function aK(){return[aA,ay]}function av(aN){var aM=aN[0],aL=aN[1];if(0>ax+aM){aM-=aM+ax}if(0>aI+aL){aL-=aL+aI}if(P<aH+aL){aL+=P-(aH+aL)}if(R<aw+aM){aM+=R-(aw+aM)}ax+=aM;aw+=aM;aI+=aL;aH+=aL}function aD(aL){var aM=aJ();switch(aL){case"ne":return[aM.x2,aM.y];case"nw":return[aM.x,aM.y];case"se":return[aM.x2,aM.y2];case"sw":return[aM.x,aM.y2]}}function aJ(){if(!J.aspectRatio){return aG()}var aN=J.aspectRatio,aU=J.minSize[0]/N,aM=J.maxSize[0]/N,aX=J.maxSize[1]/f,aO=aw-ax,aW=aH-aI,aP=Math.abs(aO),aQ=Math.abs(aW),aS=aP/aQ,aL,aT,aV,aR;if(aM===0){aM=R*10}if(aX===0){aX=P*10}if(aS<aN){aT=aH;aV=aQ*aN;aL=aO<0?ax-aV:aV+ax;if(aL<0){aL=0;aR=Math.abs((aL-ax)/aN);aT=aW<0?aI-aR:aR+aI}else{if(aL>R){aL=R;aR=Math.abs((aL-ax)/aN);aT=aW<0?aI-aR:aR+aI}}}else{aL=aw;aR=aP/aN;aT=aW<0?aI-aR:aI+aR;if(aT<0){aT=0;aV=Math.abs((aT-aI)*aN);aL=aO<0?ax-aV:aV+ax}else{if(aT>P){aT=P;aV=Math.abs(aT-aI)*aN;aL=aO<0?ax-aV:aV+ax}}}if(aL>ax){if(aL-ax<aU){aL=ax+aU}else{if(aL-ax>aM){aL=ax+aM}}if(aT>aI){aT=aI+(aL-ax)/aN}else{aT=aI-(aL-ax)/aN}}else{if(aL<ax){if(ax-aL<aU){aL=ax-aU}else{if(ax-aL>aM){aL=ax-aM}}if(aT>aI){aT=aI+(ax-aL)/aN}else{aT=aI-(ax-aL)/aN}}}if(aL<0){ax-=aL;aL=0}else{if(aL>R){ax-=aL-R;aL=R}}if(aT<0){aI-=aT;aT=0}else{if(aT>P){aI-=aT-P;aT=P}}return aF(aE(ax,aI,aL,aT))}function az(aL){if(aL[0]<0){aL[0]=0}if(aL[1]<0){aL[1]=0}if(aL[0]>R){aL[0]=R}if(aL[1]>P){aL[1]=P}return[Math.round(aL[0]),Math.round(aL[1])]}function aE(aO,aQ,aN,aP){var aS=aO,aR=aN,aM=aQ,aL=aP;if(aN<aO){aS=aN;aR=aO}if(aP<aQ){aM=aP;aL=aQ}return[aS,aM,aR,aL]}function aG(){var aM=aw-ax,aL=aH-aI,aN;if(z&&(Math.abs(aM)>z)){aw=(aM>0)?(ax+z):(ax-z)}if(an&&(Math.abs(aL)>an)){aH=(aL>0)?(aI+an):(aI-an)}if(U/f&&(Math.abs(aL)<U/f)){aH=(aL>0)?(aI+U/f):(aI-U/f)}if(q/N&&(Math.abs(aM)<q/N)){aw=(aM>0)?(ax+q/N):(ax-q/N)}if(ax<0){aw-=ax;ax-=ax}if(aI<0){aH-=aI;aI-=aI}if(aw<0){ax-=aw;aw-=aw}if(aH<0){aI-=aH;aH-=aH}if(aw>R){aN=aw-R;ax-=aN;aw-=aN}if(aH>P){aN=aH-P;aI-=aN;aH-=aN}if(ax>R){aN=ax-P;aH-=aN;aI-=aN}if(aI>P){aN=aI-P;aH-=aN;aI-=aN}return aF(aE(ax,aI,aw,aH))}function aF(aL){return{x:aL[0],y:aL[1],x2:aL[2],y2:aL[3],w:aL[2]-aL[0],h:aL[3]-aL[1]}}return{flipCoords:aE,setPressed:aC,setCurrent:aB,getOffset:aK,moveOffset:av,getCorner:aD,getFixed:aJ}}());var d=(function(){var aA=false,aF=a("<div />").css({position:"absolute",zIndex:240,opacity:0}),az={top:aB(),left:aB().height(P),right:aB().height(P),bottom:aB()};function aH(aI,aJ){az.left.css({height:n(aJ)});az.right.css({height:n(aJ)})}function ax(){return aC(ab.getFixed())}function aC(aI){az.top.css({left:n(aI.x),width:n(aI.w),height:n(aI.y)});az.bottom.css({top:n(aI.y2),left:n(aI.x),width:n(aI.w),height:n(P-aI.y2)});az.right.css({left:n(aI.x2),width:n(R-aI.x2)});az.left.css({width:n(aI.x)})}function aB(){return a("<div />").css({position:"absolute",backgroundColor:J.shadeColor||J.bgColor}).appendTo(aF)}function ay(){if(!aA){aA=true;aF.insertBefore(at);ax();X.setBgOpacity(1,0,1);K.hide();aE(J.shadeColor||J.bgColor,1);if(X.isAwake()){aw(J.bgOpacity,1)}else{aw(1,1)}}}function aE(aI,aJ){h(av(),aI,aJ)}function aG(){if(aA){aF.remove();K.show();aA=false;if(X.isAwake()){X.setBgOpacity(J.bgOpacity,1,1)}else{X.setBgOpacity(1,1,1);X.disableHandles()}h(aa,0,1)}}function aw(aJ,aI){if(aA){if(J.bgFade&&!aI){aF.animate({opacity:1-aJ},{queue:false,duration:J.fadeTime})}else{aF.css({opacity:1-aJ})}}}function aD(){J.shade?ay():aG();if(X.isAwake()){aw(J.bgOpacity)}}function av(){return aF.children()}return{update:ax,updateRaw:aC,getShades:av,setBgColor:aE,enable:ay,disable:aG,resize:aH,refresh:aD,opacity:aw}}());var X=(function(){var aG,aP=370,aC={},aS={},ax={},az=false;function aD(aW){var aX=a("<div />").css({position:"absolute",opacity:J.borderOpacity}).addClass(E(aW));m.append(aX);return aX}function ay(aW,aX){var aY=a("<div />").mousedown(c(aW)).css({cursor:aW+"-resize",position:"absolute",zIndex:aX}).addClass("ord-"+aW);if(T.support){aY.bind("touchstart.jcrop",T.createDragger(aW))}M.append(aY);return aY}function aH(aW){var aX=J.handleSize,aY=ay(aW,aP++).css({opacity:J.handleOpacity}).addClass(E("handle"));if(aX){aY.width(aX).height(aX)}return aY}function aN(aW){return ay(aW,aP++).addClass("jcrop-dragbar")}function aK(aW){var aX;for(aX=0;aX<aW.length;aX++){ax[aW[aX]]=aN(aW[aX])}}function aO(aW){var aX,aY;for(aY=0;aY<aW.length;aY++){switch(aW[aY]){case"n":aX="hline";break;case"s":aX="hline bottom";break;case"e":aX="vline right";break;case"w":aX="vline";break}aC[aW[aY]]=aD(aX)}}function aJ(aW){var aX;for(aX=0;aX<aW.length;aX++){aS[aW[aX]]=aH(aW[aX])}}function aF(aW,aX){if(!J.shade){K.css({top:n(-aX),left:n(-aW)})}A.css({top:n(aX),left:n(aW)})}function aV(aW,aX){A.width(Math.round(aW)).height(Math.round(aX))}function aA(){var aW=ab.getFixed();ab.setPressed([aW.x,aW.y]);ab.setCurrent([aW.x2,aW.y2]);aT()}function aT(aW){if(aG){return aE(aW)}}function aE(aW){var aX=ab.getFixed();aV(aX.w,aX.h);aF(aX.x,aX.y);if(J.shade){d.updateRaw(aX)}aG||aU();if(aW){J.onSelect.call(i,Z(aX))}else{J.onChange.call(i,Z(aX))}}function aw(aX,aY,aW){if(!aG&&!aY){return}if(J.bgFade&&!aW){at.animate({opacity:aX},{queue:false,duration:J.fadeTime})}else{at.css("opacity",aX)}}function aU(){A.show();if(J.shade){d.opacity(ac)}else{aw(ac,true)}aG=true}function aQ(){aR();A.hide();if(J.shade){d.opacity(1)}else{aw(1)}aG=false;J.onRelease.call(i)}function av(){if(az){M.show()}}function aL(){az=true;if(J.allowResize){M.show();return true}}function aR(){az=false;M.hide()}function aM(aW){if(aW){D=true;aR()}else{D=false;aL()}}function aI(){aM(false);aA()}if(J.dragEdges&&a.isArray(J.createDragbars)){aK(J.createDragbars)}if(a.isArray(J.createHandles)){aJ(J.createHandles)}if(J.drawBorders&&a.isArray(J.createBorders)){aO(J.createBorders)}a(document).bind("touchstart.jcrop-ios",function(aW){if(a(aW.currentTarget).hasClass("jcrop-tracker")){aW.stopPropagation()}});var aB=ah().mousedown(c("move")).css({cursor:"move",position:"absolute",zIndex:360});if(T.support){aB.bind("touchstart.jcrop",T.createDragger("move"))}m.append(aB);aR();return{updateVisible:aT,update:aE,release:aQ,refresh:aA,isAwake:function(){return aG},setCursor:function(aW){aB.css("cursor",aW)},enableHandles:aL,enableOnly:function(){az=true},showHandles:av,disableHandles:aR,animMode:aM,setBgOpacity:aw,done:aI}}());var Q=(function(){var aw=function(){},ay=function(){},ax=J.trackDocument;function aF(aG){b.css({zIndex:450});if(aG){a(document).bind("touchmove.jcrop",aE).bind("touchend.jcrop",aB)}else{if(ax){a(document).bind("mousemove.jcrop",av).bind("mouseup.jcrop",az)}}}function aD(){b.css({zIndex:290});a(document).unbind(".jcrop")}function av(aG){aw(H(aG));return false}function az(aG){aG.preventDefault();aG.stopPropagation();if(s){s=false;ay(H(aG));if(X.isAwake()){J.onSelect.call(i,Z(ab.getFixed()))}aD();aw=function(){};ay=function(){}}return false}function aA(aH,aG,aI){s=true;aw=aH;ay=aG;aF(aI);return false}function aE(aG){aw(H(T.cfilter(aG)));return false}function aB(aG){return az(T.cfilter(aG))}function aC(aG){b.css("cursor",aG)}if(!ax){b.mousemove(av).mouseup(az).mouseout(az)}at.before(b);return{activateHandlers:aA,setCursor:aC}}());var ar=(function(){var ay=a('<input type="radio" />').css({position:"fixed",left:"-120px",width:"12px"}).addClass("jcrop-keymgr"),aA=a("<div />").css({position:"absolute",overflow:"hidden"}).append(ay);function aw(){if(J.keySupport){ay.show();ay.focus()}}function az(aB){ay.hide()}function ax(aC,aB,aD){if(J.allowMove){ab.moveOffset([aB,aD]);X.updateVisible(true)}aC.preventDefault();aC.stopPropagation()}function av(aC){if(aC.ctrlKey||aC.metaKey){return true}ae=aC.shiftKey?true:false;var aB=ae?10:1;switch(aC.keyCode){case 37:ax(aC,-aB,0);break;case 39:ax(aC,aB,0);break;case 38:ax(aC,0,-aB);break;case 40:ax(aC,0,aB);break;case 27:if(J.allowSelect){X.release()}break;case 9:return true}return false}if(J.keySupport){ay.keydown(av).blur(az);if(ai||!J.fixedSupport){ay.css({position:"absolute",left:"-20px"});aA.append(ay).insertBefore(at)}else{ay.insertBefore(at)}}return{watchKeys:aw}}());function l(av){aa.removeClass().addClass(E("holder")).addClass(av)}function u(aO,aC){var aI=aO[0]/N,ax=aO[1]/f,aH=aO[2]/N,aw=aO[3]/f;if(D){return}var aG=ab.flipCoords(aI,ax,aH,aw),aM=ab.getFixed(),aJ=[aM.x,aM.y,aM.x2,aM.y2],az=aJ,ay=J.animationDelay,aL=aG[0]-aJ[0],aB=aG[1]-aJ[1],aK=aG[2]-aJ[2],aA=aG[3]-aJ[3],aF=0,aD=J.swingSpeed;aI=az[0];ax=az[1];aH=az[2];aw=az[3];X.animMode(true);var av;function aE(){window.setTimeout(aN,ay)}var aN=(function(){return function(){aF+=(100-aF)/aD;az[0]=Math.round(aI+((aF/100)*aL));az[1]=Math.round(ax+((aF/100)*aB));az[2]=Math.round(aH+((aF/100)*aK));az[3]=Math.round(aw+((aF/100)*aA));if(aF>=99.8){aF=100}if(aF<100){ao(az);aE()}else{X.done();X.animMode(false);if(typeof(aC)==="function"){aC.call(i)}}}}());aE()}function L(av){ao([av[0]/N,av[1]/f,av[2]/N,av[3]/f]);J.onSelect.call(i,Z(ab.getFixed()));X.enableHandles()}function ao(av){ab.setPressed([av[0],av[1]]);ab.setCurrent([av[2],av[3]]);X.update()}function k(){return Z(ab.getFixed())}function am(){return ab.getFixed()}function x(av){B(av);O()}function y(){J.disabled=true;X.disableHandles();X.setCursor("default");Q.setCursor("default")}function W(){J.disabled=false;O()}function o(){X.done();Q.activateHandlers(null,null)}function ak(){aa.remove();Y.show();Y.css("visibility","visible");a(e).removeData("Jcrop")}function au(aw,ax){X.release();y();var av=new Image();av.onload=function(){var ay=av.width;var aA=av.height;var aB=J.boxWidth;var az=J.boxHeight;at.width(ay).height(aA);at.attr("src",aw);K.attr("src",aw);V(at,aB,az);R=at.width();P=at.height();K.width(R).height(P);b.width(R+(v*2)).height(P+(v*2));aa.width(R).height(P);d.resize(R,P);W();if(typeof(ax)==="function"){ax.call(i)}};av.src=aw}function h(ay,av,aw){var ax=av||J.bgColor;if(J.bgFade&&F()&&J.fadeTime&&!aw){ay.animate({backgroundColor:ax},{queue:false,duration:J.fadeTime})}else{ay.css("backgroundColor",ax)}}function O(av){if(J.allowResize){if(av){X.enableOnly()}else{X.enableHandles()}}else{X.disableHandles()}Q.setCursor(J.allowSelect?"crosshair":"default");X.setCursor(J.allowMove?"move":"default");if(J.hasOwnProperty("trueSize")){N=J.trueSize[0]/R;f=J.trueSize[1]/P}if(J.hasOwnProperty("setSelect")){L(J.setSelect);X.done();delete (J.setSelect)}d.refresh();if(J.bgColor!=ap){h(J.shade?d.getShades():aa,J.shade?(J.shadeColor||J.bgColor):J.bgColor);ap=J.bgColor}if(ac!=J.bgOpacity){ac=J.bgOpacity;if(J.shade){d.refresh()}else{X.setBgOpacity(ac)}}z=J.maxSize[0]||0;an=J.maxSize[1]||0;q=J.minSize[0]||0;U=J.minSize[1]||0;if(J.hasOwnProperty("outerImage")){at.attr("src",J.outerImage);delete (J.outerImage)}X.refresh()}if(T.support){b.bind("touchstart.jcrop",T.newSelection)}M.hide();O(true);var i={setImage:au,animateTo:u,setSelect:L,setOptions:x,tellSelect:k,tellScaled:am,setClass:l,disable:y,enable:W,cancel:o,release:X.release,destroy:ak,focus:ar.watchKeys,getBounds:function(){return[R*N,P*f]},getWidgetSize:function(){return[R,P]},getScaleFactor:function(){return[N,f]},getOptions:function(){return J},ui:{holder:aa,selection:A}};if(ad){aa.bind("selectstart",function(){return false})}Y.data("Jcrop",i);return i};a.fn.Jcrop=function(b,d){var c;this.each(function(){if(a(this).data("Jcrop")){if(b==="api"){return a(this).data("Jcrop")}else{a(this).data("Jcrop").setOptions(b)}}else{if(this.tagName=="IMG"){a.Jcrop.Loader(this,function(){a(this).css({display:"block",visibility:"hidden"});c=a.Jcrop(this,b);if(a.isFunction(d)){d.call(c)}})}else{a(this).css({display:"block",visibility:"hidden"});c=a.Jcrop(this,b);if(a.isFunction(d)){d.call(c)}}}});return this};a.Jcrop.Loader=function(f,g,c){var d=a(f),b=d[0];function e(){if(b.complete){d.unbind(".jcloader");if(a.isFunction(g)){g.call(b)}}else{window.setTimeout(e,50)}}d.bind("load.jcloader",e).bind("error.jcloader",function(h){d.unbind(".jcloader");if(a.isFunction(c)){c.call(b)}});if(b.complete&&a.isFunction(g)){d.unbind(".jcloader");g.call(b)}};a.Jcrop.defaults={allowSelect:true,allowMove:true,allowResize:true,trackDocument:true,baseClass:"jcrop",addClass:null,bgColor:"black",bgOpacity:0.6,bgFade:false,borderOpacity:0.4,handleOpacity:0.5,handleSize:null,aspectRatio:0,keySupport:true,createHandles:["n","s","e","w","nw","ne","se","sw"],createDragbars:["n","s","e","w"],createBorders:["n","s","e","w"],drawBorders:true,dragEdges:true,fixedSupport:true,touchSupport:null,shade:null,boxWidth:0,boxHeight:0,boundary:2,fadeTime:400,animationDelay:20,swingSpeed:3,minSelect:[0,0],maxSize:[0,0],minSize:[0,0],onChange:function(){},onSelect:function(){},onDblClick:function(){},onRelease:function(){}}}(jQuery));
/*!
	Autosize 1.18.13
	license: MIT
	http://www.jacklmoore.com/autosize
*/
(function(b){var e={className:"autosizejs",id:"autosizejs",append:"\n",callback:false,resizeDelay:10,placeholder:true},f='<textarea tabindex="-1" style="position:absolute; top:-999px; left:0; right:auto; bottom:auto; border:0; padding: 0; -moz-box-sizing:content-box; -webkit-box-sizing:content-box; box-sizing:content-box; word-wrap:break-word; height:0 !important; min-height:0 !important; overflow:hidden; transition:none; -webkit-transition:none; -moz-transition:none;"/>',a=["fontFamily","fontSize","fontWeight","fontStyle","letterSpacing","textTransform","wordSpacing","textIndent","whiteSpace"],d,c=b(f).data("autosize",true)[0];c.style.lineHeight="99px";if(b(c).css("lineHeight")==="99px"){a.push("lineHeight")}c.style.lineHeight="";b.fn.autosize=function(g){if(!this.length){return this}g=b.extend({},e,g||{});if(c.parentNode!==document.body){b(document.body).append(c)}return this.each(function(){var m=this,l=b(m),s,u,k=0,t=b.isFunction(g.callback),n={height:m.style.height,overflow:m.style.overflow,overflowY:m.style.overflowY,wordWrap:m.style.wordWrap,resize:m.style.resize},p,h=l.width(),j=l.css("resize");if(l.data("autosize")){return}l.data("autosize",true);if(l.css("box-sizing")==="border-box"||l.css("-moz-box-sizing")==="border-box"||l.css("-webkit-box-sizing")==="border-box"){k=l.outerHeight()-l.height()}u=Math.max(parseInt(l.css("minHeight"),10)-k||0,l.height());l.css({overflow:"hidden",overflowY:"hidden",wordWrap:"break-word"});if(j==="vertical"){l.css("resize","none")}else{if(j==="both"){l.css("resize","horizontal")}}function o(){var w;var v=window.getComputedStyle?window.getComputedStyle(m,null):false;if(v){w=m.getBoundingClientRect().width;if(w===0||typeof w!=="number"){w=parseInt(v.width,10)}b.each(["paddingLeft","paddingRight","borderLeftWidth","borderRightWidth"],function(x,y){w-=parseInt(v[y],10)})}else{w=l.width()}c.style.width=Math.max(w,0)+"px"}function r(){var w={};d=m;c.className=g.className;c.id=g.id;s=parseInt(l.css("maxHeight"),10);b.each(a,function(y,z){w[z]=l.css(z)});b(c).css(w).attr("wrap",l.attr("wrap"));o();if(window.chrome){var v=m.style.width;m.style.width="0px";var x=m.offsetWidth;m.style.width=v}}function q(){var v,w;if(d!==m){r()}else{o()}if(!m.value&&g.placeholder){c.value=(l.attr("placeholder")||"")}else{c.value=m.value}c.value+=g.append||"";c.style.overflowY=m.style.overflowY;w=parseInt(m.style.height,10);c.scrollTop=0;c.scrollTop=90000;v=c.scrollTop;if(s&&v>s){m.style.overflowY="scroll";v=s}else{m.style.overflowY="hidden";if(v<u){v=u}}v+=k;if(w!==v){m.style.height=v+"px";if(t){g.callback.call(m,m)}l.trigger("autosize.resized")}}function i(){clearTimeout(p);p=setTimeout(function(){var v=l.width();if(v!==h){h=v;q()}},parseInt(g.resizeDelay,10))}if("onpropertychange" in m){if("oninput" in m){l.on("input.autosize keyup.autosize",q)}else{l.on("propertychange.autosize",function(){if(event.propertyName==="value"){q()}})}}else{l.on("input.autosize",q)}if(g.resizeDelay!==false){b(window).on("resize.autosize",i)}l.on("autosize.resize",q);l.on("autosize.resizeIncludeStyle",function(){d=null;q()});l.on("autosize.destroy",function(){d=null;clearTimeout(p);b(window).off("resize",i);l.off("autosize").off(".autosize").css(n).removeData("autosize")});q()})}}(jQuery||$));
/*!
 * jQuery Popup Overlay
 *
 * @version 1.7.3
 * @requires jQuery v1.7.1+
 * @link http://vast-engineering.github.com/jquery-popup-overlay/
 */
(function(e){var b=e(window);var o={};var m=[];var c=[];var l;var a=null;var g="_open";var i="_close";var k=[];var h=null;var f;var j=/(iPad|iPhone|iPod)/g.test(navigator.userAgent);var d={_init:function(r){var q=e(r);var p=q.data("popupoptions");c[r.id]=false;m[r.id]=0;if(!q.data("popup-initialized")){q.attr("data-popup-initialized","true");d._initonce(r)}if(p.autoopen){setTimeout(function(){d.show(r,0)},0)}},_initonce:function(q){var y=e(q);var s=e("body");var u;var z=y.data("popupoptions");var t;a=parseInt(s.css("margin-right"),10);h=document.body.style.webkitTransition!==undefined||document.body.style.MozTransition!==undefined||document.body.style.msTransition!==undefined||document.body.style.OTransition!==undefined||document.body.style.transition!==undefined;if(z.type=="tooltip"){z.background=false;z.scrolllock=false}if(z.backgroundactive){z.background=false;z.blur=false;z.scrolllock=false}if(z.scrolllock){var w;var p;if(typeof l==="undefined"){w=e('<div style="width:50px;height:50px;overflow:auto"><div/></div>').appendTo("body");p=w.children();l=p.innerWidth()-p.height(99).innerWidth();w.remove()}}if(!y.attr("id")){y.attr("id","j-popup-"+parseInt((Math.random()*100000000),10))}y.addClass("popup_content");s.prepend(q);y.wrap('<div id="'+q.id+'_wrapper" class="popup_wrapper" />');u=e("#"+q.id+"_wrapper");u.css({opacity:0,visibility:"hidden",position:"absolute"});if(j){u.css("cursor","pointer")}if(z.type=="overlay"){u.css("overflow","auto")}y.css({opacity:0,visibility:"hidden",display:"inline-block"});if(z.setzindex&&!z.autozindex){u.css("z-index","100001")}if(!z.outline){y.css("outline","none")}if(z.transition){y.css("transition",z.transition);u.css("transition",z.transition)}y.attr("aria-hidden",true);if((z.background)&&(!e("#"+q.id+"_background").length)){s.prepend('<div id="'+q.id+'_background" class="popup_background"></div>');var v=e("#"+q.id+"_background");v.css({opacity:0,visibility:"hidden",backgroundColor:z.color,position:"fixed",top:0,right:0,bottom:0,left:0});if(z.setzindex&&!z.autozindex){v.css("z-index","100000")}if(z.transition){v.css("transition",z.transition)}}if(z.type=="overlay"){y.css({textAlign:"left",position:"relative",verticalAlign:"middle"});t={position:"fixed",width:"100%",height:"100%",top:0,left:0,textAlign:"center"};if(z.backgroundactive){t.position="relative";t.height="0";t.overflow="visible"}u.css(t);u.append('<div class="popup_align" />');e(".popup_align").css({display:"inline-block",verticalAlign:"middle",height:"100%"})}y.attr("role","dialog");var r=(z.openelement)?z.openelement:("."+q.id+g);e(r).each(function(A,B){e(B).attr("data-popup-ordinal",A);if(!B.id){e(B).attr("id","open_"+parseInt((Math.random()*100000000),10))}});if(!(y.attr("aria-labelledby")||y.attr("aria-label"))){y.attr("aria-labelledby",e(r).attr("id"))}var x=(z.closeelement)?z.closeelement:("."+q.id+i);e(document).on("click",x,function(A){d.hide(q);A.preventDefault()});if(z.action=="hover"){z.keepfocus=false;e(r).on("mouseenter",function(A){d.show(q,e(this).data("popup-ordinal"))});e(r).on("mouseleave",function(A){d.hide(q)})}else{e(document).on("click",r,function(B){B.preventDefault();var A=e(this).data("popup-ordinal");setTimeout(function(){d.show(q,A)},0)})}if(z.detach){y.hide().detach()}else{u.hide()}},show:function(q,v){var z=e(q);if(z.data("popup-visible")){return}if(!z.data("popup-initialized")){d._init(q)}z.attr("data-popup-initialized","true");var r=e("body");var A=z.data("popupoptions");var u=e("#"+q.id+"_wrapper");var x=e("#"+q.id+"_background");n(q,v,A.beforeopen);c[q.id]=v;setTimeout(function(){k.push(q.id)},0);if(A.autozindex){var p=document.getElementsByTagName("*");var t=p.length;var y=0;for(var s=0;s<t;s++){var w=e(p[s]).css("z-index");if(w!=="auto"){w=parseInt(w,10);if(y<w){y=w}}}m[q.id]=y;if(A.background){if(m[q.id]>0){e("#"+q.id+"_background").css({zIndex:(m[q.id]+1)})}}if(m[q.id]>0){u.css({zIndex:(m[q.id]+2)})}}if(A.detach){u.prepend(q);z.show()}else{u.show()}f=setTimeout(function(){u.css({visibility:"visible",opacity:1});e("html").addClass("popup_visible").addClass("popup_visible_"+q.id);z.addClass("popup_content_visible")},20);if(A.scrolllock){r.css("overflow","hidden");if(r.height()>b.height()){r.css("margin-right",a+l)}}if(A.backgroundactive){z.css({top:(b.height()-(z.get(0).offsetHeight+parseInt(z.css("margin-top"),10)+parseInt(z.css("margin-bottom"),10)))/2+"px",})}z.css({visibility:"visible",opacity:1});if(A.background){x.css({visibility:"visible",opacity:A.opacity});setTimeout(function(){x.css({opacity:A.opacity})},0)}z.data("popup-visible",true);d.reposition(q,v);z.data("focusedelementbeforepopup",document.activeElement);if(A.keepfocus){z.attr("tabindex",-1);setTimeout(function(){if(A.focuselement==="closebutton"){e("#"+q.id+" ."+q.id+i+":first").focus()}else{if(A.focuselement){e(A.focuselement).focus()}else{z.focus()}}},A.focusdelay)}e(A.pagecontainer).attr("aria-hidden",true);z.attr("aria-hidden",false);n(q,v,A.onopen);if(h){u.one("transitionend",function(){n(q,v,A.opentransitionend)})}else{n(q,v,A.opentransitionend)}},hide:function(s){if(f){clearTimeout(f)}var u=e("body");var r=e(s);var q=r.data("popupoptions");var t=e("#"+s.id+"_wrapper");var p=e("#"+s.id+"_background");r.data("popup-visible",false);if(k.length===1){e("html").removeClass("popup_visible").removeClass("popup_visible_"+s.id)}else{if(e("html").hasClass("popup_visible_"+s.id)){e("html").removeClass("popup_visible_"+s.id)}}k.pop();if(e("html").hasClass("popup_content_visible")){r.removeClass("popup_content_visible")}if(q.keepfocus){setTimeout(function(){if(e(r.data("focusedelementbeforepopup")).is(":visible")){r.data("focusedelementbeforepopup").focus()}},0)}t.css({visibility:"hidden",opacity:0});r.css({visibility:"hidden",opacity:0});if(q.background){p.css({visibility:"hidden",opacity:0})}e(q.pagecontainer).attr("aria-hidden",false);r.attr("aria-hidden",true);n(s,c[s.id],q.onclose);if(h&&r.css("transition-duration")!=="0s"){r.one("transitionend",function(v){if(!(r.data("popup-visible"))){if(q.detach){r.hide().detach()}else{t.hide()}}if(q.scrolllock){setTimeout(function(){u.css({overflow:"visible","margin-right":a})},10)}n(s,c[s.id],q.closetransitionend)})}else{if(q.detach){r.hide().detach()}else{t.hide()}if(q.scrolllock){setTimeout(function(){u.css({overflow:"visible","margin-right":a})},10)}n(s,c[s.id],q.closetransitionend)}},toggle:function(q,p){if(e(q).data("popup-visible")){d.hide(q)}else{setTimeout(function(){d.show(q,p)},0)}},reposition:function(t,p){var s=e(t);var r=s.data("popupoptions");var u=e("#"+t.id+"_wrapper");var q=e("#"+t.id+"_background");p=p||0;if(r.type=="tooltip"){u.css({position:"absolute"});var v;if(r.tooltipanchor){v=e(r.tooltipanchor)}else{if(r.openelement){v=e(r.openelement).filter('[data-popup-ordinal="'+p+'"]')}else{v=e("."+t.id+g+'[data-popup-ordinal="'+p+'"]')}}var w=v.offset();if(r.horizontal=="right"){u.css("left",w.left+v.outerWidth()+r.offsetleft)}else{if(r.horizontal=="leftedge"){u.css("left",w.left+v.outerWidth()-v.outerWidth()+r.offsetleft)}else{if(r.horizontal=="left"){u.css("right",b.width()-w.left-r.offsetleft)}else{if(r.horizontal=="rightedge"){u.css("right",b.width()-w.left-v.outerWidth()-r.offsetleft)}else{u.css("left",w.left+(v.outerWidth()/2)-(s.outerWidth()/2)-parseFloat(s.css("marginLeft"))+r.offsetleft)}}}}if(r.vertical=="bottom"){u.css("top",w.top+v.outerHeight()+r.offsettop)}else{if(r.vertical=="bottomedge"){u.css("top",w.top+v.outerHeight()-s.outerHeight()+r.offsettop)}else{if(r.vertical=="top"){u.css("bottom",b.height()-w.top-r.offsettop)}else{if(r.vertical=="topedge"){u.css("bottom",b.height()-w.top-s.outerHeight()-r.offsettop)}else{u.css("top",w.top+(v.outerHeight()/2)-(s.outerHeight()/2)-parseFloat(s.css("marginTop"))+r.offsettop)}}}}}else{if(r.type=="overlay"){if(r.horizontal){u.css("text-align",r.horizontal)}else{u.css("text-align","center")}if(r.vertical){s.css("vertical-align",r.vertical)}else{s.css("vertical-align","middle")}}}}};var n=function(r,p,s){var q=(o.openelement)?o.openelement:("."+r.id+g);var t=e(q+'[data-popup-ordinal="'+p+'"]');if(typeof s=="function"){s.call(e(r),r,t)}};e(document).on("keydown",function(r){if(k.length){var p=k[k.length-1];var q=document.getElementById(p);if(e(q).data("popupoptions").escape&&r.keyCode==27&&e(q).data("popup-visible")){d.hide(q)}}});e(document).on("click",function(r){if(k.length){var p=k[k.length-1];var q=document.getElementById(p);if(e(q).data("popupoptions").blur&&!e(r.target).parents().andSelf().is("#"+p)&&e(q).data("popup-visible")&&r.which!==2){d.hide(q);if(e(q).data("popupoptions").type==="overlay"){r.preventDefault()}}}});e(document).on("focusin",function(r){if(k.length){var p=k[k.length-1];var q=document.getElementById(p);if(e(q).data("popupoptions").keepfocus){if(!q.contains(r.target)){r.stopPropagation();q.focus()}}}});e.fn.popup=function(p){return this.each(function(){$el=e(this);if(typeof p==="object"){var q=e.extend({},e.fn.popup.defaults,p);$el.data("popupoptions",q);o=$el.data("popupoptions");d._init(this)}else{if(typeof p==="string"){if(!($el.data("popupoptions"))){$el.data("popupoptions",e.fn.popup.defaults);o=$el.data("popupoptions")}d[p].call(this,this)}else{if(!($el.data("popupoptions"))){$el.data("popupoptions",e.fn.popup.defaults);o=$el.data("popupoptions")}d._init(this)}}})};e.fn.popup.defaults={type:"overlay",autoopen:false,background:true,backgroundactive:false,color:"black",opacity:"0.5",horizontal:"center",vertical:"middle",offsettop:0,offsetleft:0,escape:true,blur:true,setzindex:true,autozindex:false,scrolllock:false,keepfocus:true,focuselement:null,focusdelay:50,outline:false,pagecontainer:null,detach:false,openelement:null,closeelement:null,transition:null,tooltipanchor:null,beforeopen:null,onclose:null,onopen:null,opentransitionend:null,closetransitionend:null}})(jQuery);
/*!
 *         ,/
 *       ,'/
 *     ,' /
 *   ,'  /_____,
 * .'____    ,'
 *      /  ,'
 *     / ,'
 *    /,'
 *   /'
 *
 * Selectric Ïž v1.8.1 (2014-09-01) - http://lcdsantos.github.io/jQuery-Selectric/
 *
 * Copyright (c) 2014 Leonardo Santos; Dual licensed: MIT/GPL
 *
 */
(function(e){var h="selectric",b="Input Items Open Disabled TempShow HideSelect Wrapper Hover Responsive Above Scroll",g=".sl",c={onChange:function(j){e(j).change()},maxHeight:300,keySearchTimeout:500,arrowButtonMarkup:'<b class="button">&#x25be;</b>',disableOnMobile:true,openOnHover:false,expandToItemText:false,responsive:false,preventWindowScroll:true,inheritOriginalWidth:false,customClass:{prefix:h,postfixes:b,camelCase:true},optionsItemBuilder:"{text}"},i={replaceDiacritics:function(l){var m="40-46 50-53 54-57 62-70 71-74 61 47 77".replace(/\d+/g,"\\3$&").split(" "),j=m.length;while(j--){l=l.toLowerCase().replace(RegExp("["+m[j]+"]","g"),"aeiouncy".charAt(j))}return l},format:function(k){var j=arguments;return(""+k).replace(/{(\d+|(\w+))}/g,function(m,l,n){return n&&j[1]?j[1][n]:j[l]})},nextEnabledItem:function(j,k){while(j[k=(k+1)%j.length].disabled){}return k},previousEnabledItem:function(j,k){while(j[k=(k>0?k:j.length)-1].disabled){}return k},toDash:function(j){return j.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()},triggerCallback:function(k,j){var m=j.element,l=j.options["on"+k];if(e.isFunction(l)){l.call(m,m)}e(m).trigger(h+"-"+i.toDash(k))}},d=e(document),a=e(window),f=function(m,z){var G=this,P=e(m),l,q,I,H,O,C,v,B=false,L=false,E,n,r,x,y,k,N,D=/android|ip(hone|od|ad)/i.test(navigator.userAgent),M=P.prop("tabindex");function u(S){G.options=e.extend(true,{},c,G.options,S);G.classes={};G.element=m,i.triggerCallback("BeforeInit",G);if(G.options.disableOnMobile&&D){G.disableOnMobile=true;return}s(true);var R=G.options.customClass,Q=R.postfixes.split(" "),T=P.width();e.each(b.split(" "),function(U,W){var V=R.prefix+Q[U];G.classes[W.toLowerCase()]=R.camelCase?V:i.toDash(V)});l=e("<input/>",{"class":G.classes.input,readonly:D});q=e("<div/>",{"class":G.classes.items,tabindex:-1});I=e("<div/>",{"class":G.classes.scroll});H=e("<div/>",{"class":R.prefix,html:G.options.arrowButtonMarkup});O=e('<p class="label"/>');C=P.wrap("<div>").parent().append(H.prepend(O),q,l);N={open:p,close:o,destroy:s,refresh:F,init:u};P.on(N).wrap('<div class="'+G.classes.hideselect+'">');e.extend(G,N);if(G.options.inheritOriginalWidth&&T>0){C.width(T)}L=true;w()}function w(){G.items=[];var S=P.children(),R="<ul>",Q=S.filter(":selected").index();n=(E=~Q?Q:0);if(k=S.length){S.each(function(V){var T=e(this),X=T.html(),W=T.prop("disabled"),U=G.options.optionsItemBuilder;G.items[V]={value:T.val(),text:X,slug:i.replaceDiacritics(X),disabled:W};R+=i.format('<li class="{1}">{2}</li>',e.trim([V==n?"selected":"",V==k-1?"last":"",W?"disabled":""].join(" ")),e.isFunction(U)?U(G.items[V],T,V):i.format(U,G.items[V]))});q.append(I.html(R+"</ul>"));O.html(G.items[n].text)}H.add(P).off(g);C.prop("class",[G.classes.wrapper,P.prop("class").replace(/\S+/g,h+"-$&"),G.options.responsive?G.classes.responsive:""].join(" "));if(!P.prop("disabled")){C.removeClass(G.classes.disabled).hover(function(){e(this).toggleClass(G.classes.hover)});G.options.openOnHover&&H.on("mouseenter"+g,p);H.on("click"+g,function(T){B?o():p(T)});l.prop({tabindex:M,disabled:false}).off().on({keypress:J,keydown:function(U){J(U);clearTimeout(G.resetStr);G.resetStr=setTimeout(function(){l.val("")},G.options.keySearchTimeout);var T=U.keyCode||U.which;if(T>36&&T<41){j(i[(T<39?"previous":"next")+"EnabledItem"](G.items,E))}},focusin:function(T){l.one("blur",function(){l.blur()});B||p(T)}}).on("oninput" in l[0]?"input":"keyup",function(){if(l.val().length){e.each(G.items,function(T,U){if(RegExp("^"+l.val(),"i").test(U.slug)&&!U.disabled){j(T);return false}})}});P.prop("tabindex",false);v=e("li",q.removeAttr("style")).click(function(){j(e(this).index(),true);return false})}else{C.addClass(G.classes.disabled);l.prop("disabled",true)}i.triggerCallback("Init",G)}function F(){i.triggerCallback("Refresh",G);w()}function J(R){var Q=R.keyCode||R.which;if(Q==13){R.preventDefault()}if(/^(9|13|27)$/.test(Q)){R.stopPropagation();j(E,true)}}function K(){var S=q.closest(":visible").children(":hidden"),R=G.options.maxHeight;S.addClass(G.classes.tempshow);var T=q.outerWidth(),Q=H.outerWidth()-(T-q.width());if(!G.options.expandToItemText||Q>T){y=Q}else{q.css("overflow","scroll");C.width(90000);y=q.width();q.css("overflow","");C.width("")}q.width(y).height()>R&&q.height(R);S.removeClass(G.classes.tempshow)}function p(Q){i.triggerCallback("BeforeOpen",G);if(Q){Q.preventDefault();Q.stopPropagation()}if(L){K();e("."+G.classes.open).removeClass(G.classes.open);B=true;r=q.outerHeight();x=q.height();l.val("").is(":focus")||l.focus();d.on("click"+g,o).on("scroll"+g,A);A();if(G.options.preventWindowScroll){d.on("mousewheel"+g+" DOMMouseScroll"+g,"."+G.classes.scroll,function(U){var S=U.originalEvent,T=e(this).scrollTop(),R=0;if("detail" in S){R=S.detail*-1}if("wheelDelta" in S){R=S.wheelDelta}if("wheelDeltaY" in S){R=S.wheelDeltaY}if("deltaY" in S){R=S.deltaY*-1}if(T==(this.scrollHeight-x)&&R<0||T==0&&R>0){U.preventDefault()}})}if(G.options.openOnHover){clearTimeout(G.closeTimer);C.one("mouseleave"+g,function(){G.closeTimer=setTimeout(o,500)})}C.addClass(G.classes.open);t(E);i.triggerCallback("Open",G)}}function A(){K();C.toggleClass(G.classes.above,C.offset().top+C.outerHeight()+r>a.scrollTop()+a.height())}function o(Q){i.triggerCallback("BeforeClose",G);if(!Q&&n!=E){var R=G.items[E].text;P.prop("selectedIndex",n=E).data("value",R);i.triggerCallback("Change",G);O.html(R)}d.off(g);C.removeClass(G.classes.open);B=false;i.triggerCallback("Close",G)}function j(Q,R){if(!G.items[E=Q].disabled){v.removeClass("selected").eq(Q).addClass("selected");t(Q);R&&o()}}function t(S){var R=v.eq(S).outerHeight(),U=v[S].offsetTop,T=I.scrollTop(),Q=U+R*2;I.scrollTop(Q>T+r?Q-r:U-R<T?U-R:T)}function s(Q){if(L){q.add(H).add(l).remove();!Q&&P.removeData(h).removeData("value");P.prop("tabindex",M).off(g).off(N).unwrap().unwrap();L=false}}u(z)};e.fn[h]=function(j){return this.each(function(){var k=e.data(this,h);if(k&&!k.disableOnMobile){(""+j===j&&k[j])?k[j]():k.init(j)}else{e.data(this,h,new f(this,j))}})}}(jQuery));
"function"!==typeof Object.create&&(Object.create=function(f){function g(){}g.prototype=f;return new g});
(function(f,g,k){var l={init:function(a,b){this.$elem=f(b);this.options=f.extend({},f.fn.owlCarousel.options,this.$elem.data(),a);this.userOptions=a;this.loadContent()},loadContent:function(){function a(a){var d,e="";if("function"===typeof b.options.jsonSuccess)b.options.jsonSuccess.apply(this,[a]);else{for(d in a.owl)a.owl.hasOwnProperty(d)&&(e+=a.owl[d].item);b.$elem.html(e)}b.logIn()}var b=this,e;"function"===typeof b.options.beforeInit&&b.options.beforeInit.apply(this,[b.$elem]);"string"===typeof b.options.jsonPath?
(e=b.options.jsonPath,f.getJSON(e,a)):b.logIn()},logIn:function(){this.$elem.data("owl-originalStyles",this.$elem.attr("style"));this.$elem.data("owl-originalClasses",this.$elem.attr("class"));this.$elem.css({opacity:0});this.orignalItems=this.options.items;this.checkBrowser();this.wrapperWidth=0;this.checkVisible=null;this.setVars()},setVars:function(){if(0===this.$elem.children().length)return!1;this.baseClass();this.eventTypes();this.$userItems=this.$elem.children();this.itemsAmount=this.$userItems.length;
this.wrapItems();this.$owlItems=this.$elem.find(".owl-item");this.$owlWrapper=this.$elem.find(".owl-wrapper");this.playDirection="next";this.prevItem=0;this.prevArr=[0];this.currentItem=0;this.customEvents();this.onStartup()},onStartup:function(){this.updateItems();this.calculateAll();this.buildControls();this.updateControls();this.response();this.moveEvents();this.stopOnHover();this.owlStatus();!1!==this.options.transitionStyle&&this.transitionTypes(this.options.transitionStyle);!0===this.options.autoPlay&&
(this.options.autoPlay=5E3);this.play();this.$elem.find(".owl-wrapper").css("display","block");this.$elem.is(":visible")?this.$elem.css("opacity",1):this.watchVisibility();this.onstartup=!1;this.eachMoveUpdate();"function"===typeof this.options.afterInit&&this.options.afterInit.apply(this,[this.$elem])},eachMoveUpdate:function(){!0===this.options.lazyLoad&&this.lazyLoad();!0===this.options.autoHeight&&this.autoHeight();this.onVisibleItems();"function"===typeof this.options.afterAction&&this.options.afterAction.apply(this,
[this.$elem])},updateVars:function(){"function"===typeof this.options.beforeUpdate&&this.options.beforeUpdate.apply(this,[this.$elem]);this.watchVisibility();this.updateItems();this.calculateAll();this.updatePosition();this.updateControls();this.eachMoveUpdate();"function"===typeof this.options.afterUpdate&&this.options.afterUpdate.apply(this,[this.$elem])},reload:function(){var a=this;g.setTimeout(function(){a.updateVars()},0)},watchVisibility:function(){var a=this;if(!1===a.$elem.is(":visible"))a.$elem.css({opacity:0}),
g.clearInterval(a.autoPlayInterval),g.clearInterval(a.checkVisible);else return!1;a.checkVisible=g.setInterval(function(){a.$elem.is(":visible")&&(a.reload(),a.$elem.animate({opacity:1},200),g.clearInterval(a.checkVisible))},500)},wrapItems:function(){this.$userItems.wrapAll('<div class="owl-wrapper">').wrap('<div class="owl-item"></div>');this.$elem.find(".owl-wrapper").wrap('<div class="owl-wrapper-outer">');this.wrapperOuter=this.$elem.find(".owl-wrapper-outer");this.$elem.css("display","block")},
baseClass:function(){var a=this.$elem.hasClass(this.options.baseClass),b=this.$elem.hasClass(this.options.theme);a||this.$elem.addClass(this.options.baseClass);b||this.$elem.addClass(this.options.theme)},updateItems:function(){var a,b;if(!1===this.options.responsive)return!1;if(!0===this.options.singleItem)return this.options.items=this.orignalItems=1,this.options.itemsCustom=!1,this.options.itemsDesktop=!1,this.options.itemsDesktopSmall=!1,this.options.itemsTablet=!1,this.options.itemsTabletSmall=
!1,this.options.itemsMobile=!1;a=f(this.options.responsiveBaseWidth).width();a>(this.options.itemsDesktop[0]||this.orignalItems)&&(this.options.items=this.orignalItems);if(!1!==this.options.itemsCustom)for(this.options.itemsCustom.sort(function(a,b){return a[0]-b[0]}),b=0;b<this.options.itemsCustom.length;b+=1)this.options.itemsCustom[b][0]<=a&&(this.options.items=this.options.itemsCustom[b][1]);else a<=this.options.itemsDesktop[0]&&!1!==this.options.itemsDesktop&&(this.options.items=this.options.itemsDesktop[1]),
a<=this.options.itemsDesktopSmall[0]&&!1!==this.options.itemsDesktopSmall&&(this.options.items=this.options.itemsDesktopSmall[1]),a<=this.options.itemsTablet[0]&&!1!==this.options.itemsTablet&&(this.options.items=this.options.itemsTablet[1]),a<=this.options.itemsTabletSmall[0]&&!1!==this.options.itemsTabletSmall&&(this.options.items=this.options.itemsTabletSmall[1]),a<=this.options.itemsMobile[0]&&!1!==this.options.itemsMobile&&(this.options.items=this.options.itemsMobile[1]);this.options.items>this.itemsAmount&&
!0===this.options.itemsScaleUp&&(this.options.items=this.itemsAmount)},response:function(){var a=this,b,e;if(!0!==a.options.responsive)return!1;e=f(g).width();a.resizer=function(){f(g).width()!==e&&(!1!==a.options.autoPlay&&g.clearInterval(a.autoPlayInterval),g.clearTimeout(b),b=g.setTimeout(function(){e=f(g).width();a.updateVars()},a.options.responsiveRefreshRate))};f(g).resize(a.resizer)},updatePosition:function(){this.jumpTo(this.currentItem);!1!==this.options.autoPlay&&this.checkAp()},appendItemsSizes:function(){var a=
this,b=0,e=a.itemsAmount-a.options.items;a.$owlItems.each(function(c){var d=f(this);d.css({width:a.itemWidth}).data("owl-item",Number(c));if(0===c%a.options.items||c===e)c>e||(b+=1);d.data("owl-roundPages",b)})},appendWrapperSizes:function(){this.$owlWrapper.css({width:this.$owlItems.length*this.itemWidth*2,left:0});this.appendItemsSizes()},calculateAll:function(){this.calculateWidth();this.appendWrapperSizes();this.loops();this.max()},calculateWidth:function(){this.itemWidth=Math.round(this.$elem.width()/
this.options.items)},max:function(){var a=-1*(this.itemsAmount*this.itemWidth-this.options.items*this.itemWidth);this.options.items>this.itemsAmount?this.maximumPixels=a=this.maximumItem=0:(this.maximumItem=this.itemsAmount-this.options.items,this.maximumPixels=a);return a},min:function(){return 0},loops:function(){var a=0,b=0,e,c;this.positionsInArray=[0];this.pagesInArray=[];for(e=0;e<this.itemsAmount;e+=1)b+=this.itemWidth,this.positionsInArray.push(-b),!0===this.options.scrollPerPage&&(c=f(this.$owlItems[e]),
c=c.data("owl-roundPages"),c!==a&&(this.pagesInArray[a]=this.positionsInArray[e],a=c))},buildControls:function(){if(!0===this.options.navigation||!0===this.options.pagination)this.owlControls=f('<div class="owl-controls"/>').toggleClass("clickable",!this.browser.isTouch).appendTo(this.$elem);!0===this.options.pagination&&this.buildPagination();!0===this.options.navigation&&this.buildButtons()},buildButtons:function(){var a=this,b=f('<div class="owl-buttons"/>');a.owlControls.append(b);a.buttonPrev=
f("<div/>",{"class":"owl-prev",html:a.options.navigationText[0]||""});a.buttonNext=f("<div/>",{"class":"owl-next",html:a.options.navigationText[1]||""});b.append(a.buttonPrev).append(a.buttonNext);b.on("touchstart.owlControls mousedown.owlControls",'div[class^="owl"]',function(a){a.preventDefault()});b.on("touchend.owlControls mouseup.owlControls",'div[class^="owl"]',function(b){b.preventDefault();f(this).hasClass("owl-next")?a.next():a.prev()})},buildPagination:function(){var a=this;a.paginationWrapper=
f('<div class="owl-pagination"/>');a.owlControls.append(a.paginationWrapper);a.paginationWrapper.on("touchend.owlControls mouseup.owlControls",".owl-page",function(b){b.preventDefault();Number(f(this).data("owl-page"))!==a.currentItem&&a.goTo(Number(f(this).data("owl-page")),!0)})},updatePagination:function(){var a,b,e,c,d,g;if(!1===this.options.pagination)return!1;this.paginationWrapper.html("");a=0;b=this.itemsAmount-this.itemsAmount%this.options.items;for(c=0;c<this.itemsAmount;c+=1)0===c%this.options.items&&
(a+=1,b===c&&(e=this.itemsAmount-this.options.items),d=f("<div/>",{"class":"owl-page"}),g=f("<span></span>",{text:!0===this.options.paginationNumbers?a:"","class":!0===this.options.paginationNumbers?"owl-numbers":""}),d.append(g),d.data("owl-page",b===c?e:c),d.data("owl-roundPages",a),this.paginationWrapper.append(d));this.checkPagination()},checkPagination:function(){var a=this;if(!1===a.options.pagination)return!1;a.paginationWrapper.find(".owl-page").each(function(){f(this).data("owl-roundPages")===
f(a.$owlItems[a.currentItem]).data("owl-roundPages")&&(a.paginationWrapper.find(".owl-page").removeClass("active"),f(this).addClass("active"))})},checkNavigation:function(){if(!1===this.options.navigation)return!1;!1===this.options.rewindNav&&(0===this.currentItem&&0===this.maximumItem?(this.buttonPrev.addClass("disabled"),this.buttonNext.addClass("disabled")):0===this.currentItem&&0!==this.maximumItem?(this.buttonPrev.addClass("disabled"),this.buttonNext.removeClass("disabled")):this.currentItem===
this.maximumItem?(this.buttonPrev.removeClass("disabled"),this.buttonNext.addClass("disabled")):0!==this.currentItem&&this.currentItem!==this.maximumItem&&(this.buttonPrev.removeClass("disabled"),this.buttonNext.removeClass("disabled")))},updateControls:function(){this.updatePagination();this.checkNavigation();this.owlControls&&(this.options.items>=this.itemsAmount?this.owlControls.hide():this.owlControls.show())},destroyControls:function(){this.owlControls&&this.owlControls.remove()},next:function(a){if(this.isTransition)return!1;
this.currentItem+=!0===this.options.scrollPerPage?this.options.items:1;if(this.currentItem>this.maximumItem+(!0===this.options.scrollPerPage?this.options.items-1:0))if(!0===this.options.rewindNav)this.currentItem=0,a="rewind";else return this.currentItem=this.maximumItem,!1;this.goTo(this.currentItem,a)},prev:function(a){if(this.isTransition)return!1;this.currentItem=!0===this.options.scrollPerPage&&0<this.currentItem&&this.currentItem<this.options.items?0:this.currentItem-(!0===this.options.scrollPerPage?
this.options.items:1);if(0>this.currentItem)if(!0===this.options.rewindNav)this.currentItem=this.maximumItem,a="rewind";else return this.currentItem=0,!1;this.goTo(this.currentItem,a)},goTo:function(a,b,e){var c=this;if(c.isTransition)return!1;"function"===typeof c.options.beforeMove&&c.options.beforeMove.apply(this,[c.$elem]);a>=c.maximumItem?a=c.maximumItem:0>=a&&(a=0);c.currentItem=c.owl.currentItem=a;if(!1!==c.options.transitionStyle&&"drag"!==e&&1===c.options.items&&!0===c.browser.support3d)return c.swapSpeed(0),
!0===c.browser.support3d?c.transition3d(c.positionsInArray[a]):c.css2slide(c.positionsInArray[a],1),c.afterGo(),c.singleItemTransition(),!1;a=c.positionsInArray[a];!0===c.browser.support3d?(c.isCss3Finish=!1,!0===b?(c.swapSpeed("paginationSpeed"),g.setTimeout(function(){c.isCss3Finish=!0},c.options.paginationSpeed)):"rewind"===b?(c.swapSpeed(c.options.rewindSpeed),g.setTimeout(function(){c.isCss3Finish=!0},c.options.rewindSpeed)):(c.swapSpeed("slideSpeed"),g.setTimeout(function(){c.isCss3Finish=!0},
c.options.slideSpeed)),c.transition3d(a)):!0===b?c.css2slide(a,c.options.paginationSpeed):"rewind"===b?c.css2slide(a,c.options.rewindSpeed):c.css2slide(a,c.options.slideSpeed);c.afterGo()},jumpTo:function(a){"function"===typeof this.options.beforeMove&&this.options.beforeMove.apply(this,[this.$elem]);a>=this.maximumItem||-1===a?a=this.maximumItem:0>=a&&(a=0);this.swapSpeed(0);!0===this.browser.support3d?this.transition3d(this.positionsInArray[a]):this.css2slide(this.positionsInArray[a],1);this.currentItem=
this.owl.currentItem=a;this.afterGo()},afterGo:function(){this.prevArr.push(this.currentItem);this.prevItem=this.owl.prevItem=this.prevArr[this.prevArr.length-2];this.prevArr.shift(0);this.prevItem!==this.currentItem&&(this.checkPagination(),this.checkNavigation(),this.eachMoveUpdate(),!1!==this.options.autoPlay&&this.checkAp());"function"===typeof this.options.afterMove&&this.prevItem!==this.currentItem&&this.options.afterMove.apply(this,[this.$elem])},stop:function(){this.apStatus="stop";g.clearInterval(this.autoPlayInterval)},
checkAp:function(){"stop"!==this.apStatus&&this.play()},play:function(){var a=this;a.apStatus="play";if(!1===a.options.autoPlay)return!1;g.clearInterval(a.autoPlayInterval);a.autoPlayInterval=g.setInterval(function(){a.next(!0)},a.options.autoPlay)},swapSpeed:function(a){"slideSpeed"===a?this.$owlWrapper.css(this.addCssSpeed(this.options.slideSpeed)):"paginationSpeed"===a?this.$owlWrapper.css(this.addCssSpeed(this.options.paginationSpeed)):"string"!==typeof a&&this.$owlWrapper.css(this.addCssSpeed(a))},
addCssSpeed:function(a){return{"-webkit-transition":"all "+a+"ms ease","-moz-transition":"all "+a+"ms ease","-o-transition":"all "+a+"ms ease",transition:"all "+a+"ms ease"}},removeTransition:function(){return{"-webkit-transition":"","-moz-transition":"","-o-transition":"",transition:""}},doTranslate:function(a){return{"-webkit-transform":"translate3d("+a+"px, 0px, 0px)","-moz-transform":"translate3d("+a+"px, 0px, 0px)","-o-transform":"translate3d("+a+"px, 0px, 0px)","-ms-transform":"translate3d("+
a+"px, 0px, 0px)",transform:"translate3d("+a+"px, 0px,0px)"}},transition3d:function(a){this.$owlWrapper.css(this.doTranslate(a))},css2move:function(a){this.$owlWrapper.css({left:a})},css2slide:function(a,b){var e=this;e.isCssFinish=!1;e.$owlWrapper.stop(!0,!0).animate({left:a},{duration:b||e.options.slideSpeed,complete:function(){e.isCssFinish=!0}})},checkBrowser:function(){var a=k.createElement("div");a.style.cssText="  -moz-transform:translate3d(0px, 0px, 0px); -ms-transform:translate3d(0px, 0px, 0px); -o-transform:translate3d(0px, 0px, 0px); -webkit-transform:translate3d(0px, 0px, 0px); transform:translate3d(0px, 0px, 0px)";
a=a.style.cssText.match(/translate3d\(0px, 0px, 0px\)/g);this.browser={support3d:null!==a&&1===a.length,isTouch:"ontouchstart"in g||g.navigator.msMaxTouchPoints}},moveEvents:function(){if(!1!==this.options.mouseDrag||!1!==this.options.touchDrag)this.gestures(),this.disabledEvents()},eventTypes:function(){var a=["s","e","x"];this.ev_types={};!0===this.options.mouseDrag&&!0===this.options.touchDrag?a=["touchstart.owl mousedown.owl","touchmove.owl mousemove.owl","touchend.owl touchcancel.owl mouseup.owl"]:
!1===this.options.mouseDrag&&!0===this.options.touchDrag?a=["touchstart.owl","touchmove.owl","touchend.owl touchcancel.owl"]:!0===this.options.mouseDrag&&!1===this.options.touchDrag&&(a=["mousedown.owl","mousemove.owl","mouseup.owl"]);this.ev_types.start=a[0];this.ev_types.move=a[1];this.ev_types.end=a[2]},disabledEvents:function(){this.$elem.on("dragstart.owl",function(a){a.preventDefault()});this.$elem.on("mousedown.disableTextSelect",function(a){return f(a.target).is("input, textarea, select, option")})},
gestures:function(){function a(a){if(void 0!==a.touches)return{x:a.touches[0].pageX,y:a.touches[0].pageY};if(void 0===a.touches){if(void 0!==a.pageX)return{x:a.pageX,y:a.pageY};if(void 0===a.pageX)return{x:a.clientX,y:a.clientY}}}function b(a){"on"===a?(f(k).on(d.ev_types.move,e),f(k).on(d.ev_types.end,c)):"off"===a&&(f(k).off(d.ev_types.move),f(k).off(d.ev_types.end))}function e(b){b=b.originalEvent||b||g.event;d.newPosX=a(b).x-h.offsetX;d.newPosY=a(b).y-h.offsetY;d.newRelativeX=d.newPosX-h.relativePos;
"function"===typeof d.options.startDragging&&!0!==h.dragging&&0!==d.newRelativeX&&(h.dragging=!0,d.options.startDragging.apply(d,[d.$elem]));(8<d.newRelativeX||-8>d.newRelativeX)&&!0===d.browser.isTouch&&(void 0!==b.preventDefault?b.preventDefault():b.returnValue=!1,h.sliding=!0);(10<d.newPosY||-10>d.newPosY)&&!1===h.sliding&&f(k).off("touchmove.owl");d.newPosX=Math.max(Math.min(d.newPosX,d.newRelativeX/5),d.maximumPixels+d.newRelativeX/5);!0===d.browser.support3d?d.transition3d(d.newPosX):d.css2move(d.newPosX)}
function c(a){a=a.originalEvent||a||g.event;var c;a.target=a.target||a.srcElement;h.dragging=!1;!0!==d.browser.isTouch&&d.$owlWrapper.removeClass("grabbing");d.dragDirection=0>d.newRelativeX?d.owl.dragDirection="left":d.owl.dragDirection="right";0!==d.newRelativeX&&(c=d.getNewPosition(),d.goTo(c,!1,"drag"),h.targetElement===a.target&&!0!==d.browser.isTouch&&(f(a.target).on("click.disable",function(a){a.stopImmediatePropagation();a.stopPropagation();a.preventDefault();f(a.target).off("click.disable")}),
a=f._data(a.target,"events").click,c=a.pop(),a.splice(0,0,c)));b("off")}var d=this,h={offsetX:0,offsetY:0,baseElWidth:0,relativePos:0,position:null,minSwipe:null,maxSwipe:null,sliding:null,dargging:null,targetElement:null};d.isCssFinish=!0;d.$elem.on(d.ev_types.start,".owl-wrapper",function(c){c=c.originalEvent||c||g.event;var e;if(3===c.which)return!1;if(!(d.itemsAmount<=d.options.items)){if(!1===d.isCssFinish&&!d.options.dragBeforeAnimFinish||!1===d.isCss3Finish&&!d.options.dragBeforeAnimFinish)return!1;
!1!==d.options.autoPlay&&g.clearInterval(d.autoPlayInterval);!0===d.browser.isTouch||d.$owlWrapper.hasClass("grabbing")||d.$owlWrapper.addClass("grabbing");d.newPosX=0;d.newRelativeX=0;f(this).css(d.removeTransition());e=f(this).position();h.relativePos=e.left;h.offsetX=a(c).x-e.left;h.offsetY=a(c).y-e.top;b("on");h.sliding=!1;h.targetElement=c.target||c.srcElement}})},getNewPosition:function(){var a=this.closestItem();a>this.maximumItem?a=this.currentItem=this.maximumItem:0<=this.newPosX&&(this.currentItem=
a=0);return a},closestItem:function(){var a=this,b=!0===a.options.scrollPerPage?a.pagesInArray:a.positionsInArray,e=a.newPosX,c=null;f.each(b,function(d,g){e-a.itemWidth/20>b[d+1]&&e-a.itemWidth/20<g&&"left"===a.moveDirection()?(c=g,a.currentItem=!0===a.options.scrollPerPage?f.inArray(c,a.positionsInArray):d):e+a.itemWidth/20<g&&e+a.itemWidth/20>(b[d+1]||b[d]-a.itemWidth)&&"right"===a.moveDirection()&&(!0===a.options.scrollPerPage?(c=b[d+1]||b[b.length-1],a.currentItem=f.inArray(c,a.positionsInArray)):
(c=b[d+1],a.currentItem=d+1))});return a.currentItem},moveDirection:function(){var a;0>this.newRelativeX?(a="right",this.playDirection="next"):(a="left",this.playDirection="prev");return a},customEvents:function(){var a=this;a.$elem.on("owl.next",function(){a.next()});a.$elem.on("owl.prev",function(){a.prev()});a.$elem.on("owl.play",function(b,e){a.options.autoPlay=e;a.play();a.hoverStatus="play"});a.$elem.on("owl.stop",function(){a.stop();a.hoverStatus="stop"});a.$elem.on("owl.goTo",function(b,e){a.goTo(e)});
a.$elem.on("owl.jumpTo",function(b,e){a.jumpTo(e)})},stopOnHover:function(){var a=this;!0===a.options.stopOnHover&&!0!==a.browser.isTouch&&!1!==a.options.autoPlay&&(a.$elem.on("mouseover",function(){a.stop()}),a.$elem.on("mouseout",function(){"stop"!==a.hoverStatus&&a.play()}))},lazyLoad:function(){var a,b,e,c,d;if(!1===this.options.lazyLoad)return!1;for(a=0;a<this.itemsAmount;a+=1)b=f(this.$owlItems[a]),"loaded"!==b.data("owl-loaded")&&(e=b.data("owl-item"),c=b.find(".lazyOwl"),"string"!==typeof c.data("src")?
b.data("owl-loaded","loaded"):(void 0===b.data("owl-loaded")&&(c.hide(),b.addClass("loading").data("owl-loaded","checked")),(d=!0===this.options.lazyFollow?e>=this.currentItem:!0)&&e<this.currentItem+this.options.items&&c.length&&this.lazyPreload(b,c)))},lazyPreload:function(a,b){function e(){a.data("owl-loaded","loaded").removeClass("loading");b.removeAttr("data-src");"fade"===d.options.lazyEffect?b.fadeIn(400):b.show();"function"===typeof d.options.afterLazyLoad&&d.options.afterLazyLoad.apply(this,
[d.$elem])}function c(){f+=1;d.completeImg(b.get(0))||!0===k?e():100>=f?g.setTimeout(c,100):e()}var d=this,f=0,k;"DIV"===b.prop("tagName")?(b.css("background-image","url("+b.data("src")+")"),k=!0):b[0].src=b.data("src");c()},autoHeight:function(){function a(){var a=f(e.$owlItems[e.currentItem]).height();e.wrapperOuter.css("height",a+"px");e.wrapperOuter.hasClass("autoHeight")||g.setTimeout(function(){e.wrapperOuter.addClass("autoHeight")},0)}function b(){d+=1;e.completeImg(c.get(0))?a():100>=d?g.setTimeout(b,
100):e.wrapperOuter.css("height","")}var e=this,c=f(e.$owlItems[e.currentItem]).find("img"),d;void 0!==c.get(0)?(d=0,b()):a()},completeImg:function(a){return!a.complete||"undefined"!==typeof a.naturalWidth&&0===a.naturalWidth?!1:!0},onVisibleItems:function(){var a;!0===this.options.addClassActive&&this.$owlItems.removeClass("active");this.visibleItems=[];for(a=this.currentItem;a<this.currentItem+this.options.items;a+=1)this.visibleItems.push(a),!0===this.options.addClassActive&&f(this.$owlItems[a]).addClass("active");
this.owl.visibleItems=this.visibleItems},transitionTypes:function(a){this.outClass="owl-"+a+"-out";this.inClass="owl-"+a+"-in"},singleItemTransition:function(){var a=this,b=a.outClass,e=a.inClass,c=a.$owlItems.eq(a.currentItem),d=a.$owlItems.eq(a.prevItem),f=Math.abs(a.positionsInArray[a.currentItem])+a.positionsInArray[a.prevItem],g=Math.abs(a.positionsInArray[a.currentItem])+a.itemWidth/2;a.isTransition=!0;a.$owlWrapper.addClass("owl-origin").css({"-webkit-transform-origin":g+"px","-moz-perspective-origin":g+
"px","perspective-origin":g+"px"});d.css({position:"relative",left:f+"px"}).addClass(b).on("webkitAnimationEnd oAnimationEnd MSAnimationEnd animationend",function(){a.endPrev=!0;d.off("webkitAnimationEnd oAnimationEnd MSAnimationEnd animationend");a.clearTransStyle(d,b)});c.addClass(e).on("webkitAnimationEnd oAnimationEnd MSAnimationEnd animationend",function(){a.endCurrent=!0;c.off("webkitAnimationEnd oAnimationEnd MSAnimationEnd animationend");a.clearTransStyle(c,e)})},clearTransStyle:function(a,
b){a.css({position:"",left:""}).removeClass(b);this.endPrev&&this.endCurrent&&(this.$owlWrapper.removeClass("owl-origin"),this.isTransition=this.endCurrent=this.endPrev=!1)},owlStatus:function(){this.owl={userOptions:this.userOptions,baseElement:this.$elem,userItems:this.$userItems,owlItems:this.$owlItems,currentItem:this.currentItem,prevItem:this.prevItem,visibleItems:this.visibleItems,isTouch:this.browser.isTouch,browser:this.browser,dragDirection:this.dragDirection}},clearEvents:function(){this.$elem.off(".owl owl mousedown.disableTextSelect");
f(k).off(".owl owl");f(g).off("resize",this.resizer)},unWrap:function(){0!==this.$elem.children().length&&(this.$owlWrapper.unwrap(),this.$userItems.unwrap().unwrap(),this.owlControls&&this.owlControls.remove());this.clearEvents();this.$elem.attr("style",this.$elem.data("owl-originalStyles")||"").attr("class",this.$elem.data("owl-originalClasses"))},destroy:function(){this.stop();g.clearInterval(this.checkVisible);this.unWrap();this.$elem.removeData()},reinit:function(a){a=f.extend({},this.userOptions,
a);this.unWrap();this.init(a,this.$elem)},addItem:function(a,b){var e;if(!a)return!1;if(0===this.$elem.children().length)return this.$elem.append(a),this.setVars(),!1;this.unWrap();e=void 0===b||-1===b?-1:b;e>=this.$userItems.length||-1===e?this.$userItems.eq(-1).after(a):this.$userItems.eq(e).before(a);this.setVars()},removeItem:function(a){if(0===this.$elem.children().length)return!1;a=void 0===a||-1===a?-1:a;this.unWrap();this.$userItems.eq(a).remove();this.setVars()}};f.fn.owlCarousel=function(a){return this.each(function(){if(!0===
f(this).data("owl-init"))return!1;f(this).data("owl-init",!0);var b=Object.create(l);b.init(a,this);f.data(this,"owlCarousel",b)})};f.fn.owlCarousel.options={items:5,itemsCustom:!1,itemsDesktop:[1199,4],itemsDesktopSmall:[979,3],itemsTablet:[768,2],itemsTabletSmall:!1,itemsMobile:[479,1],singleItem:!1,itemsScaleUp:!1,slideSpeed:200,paginationSpeed:800,rewindSpeed:1E3,autoPlay:!1,stopOnHover:!1,navigation:!1,navigationText:["prev","next"],rewindNav:!0,scrollPerPage:!1,pagination:!0,paginationNumbers:!1,
responsive:!0,responsiveRefreshRate:200,responsiveBaseWidth:g,baseClass:"owl-carousel",theme:"owl-theme",lazyLoad:!1,lazyFollow:!0,lazyEffect:"fade",autoHeight:!1,jsonPath:!1,jsonSuccess:!1,dragBeforeAnimFinish:!0,mouseDrag:!0,touchDrag:!0,addClassActive:!1,transitionStyle:!1,beforeUpdate:!1,afterUpdate:!1,beforeInit:!1,afterInit:!1,beforeMove:!1,afterMove:!1,afterAction:!1,startDragging:!1,afterLazyLoad:!1}})(jQuery,window,document);
/* ===========================================================
# bootstrap-tour - v0.9.3
# http://bootstraptour.com
# ==============================================================
# Copyright 2012-2013 Ulrich Sossou
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.
*/
!function(a,b){var c,d;return d=b.document,c=function(){function c(c){var d;try{d=b.localStorage}catch(e){d=!1}this._options=a.extend({name:"tour",steps:[],container:"body",keyboard:!0,storage:d,debug:!1,backdrop:!1,redirect:!0,orphan:!1,duration:!1,basePath:"",template:"<div class='popover'> <div class='arrow'></div> <h3 class='popover-title'></h3> <div class='popover-content'></div> <div class='popover-navigation'> <div class='btn-group'> <button class='btn btn-sm btn-default' data-role='prev'>&laquo; Prev</button> <button class='btn btn-sm btn-default' data-role='next'>Next &raquo;</button> <button class='btn btn-sm btn-default' data-role='pause-resume' data-pause-text='Pause' data-resume-text='Resume'>Pause</button> </div> <button class='btn btn-sm btn-default' data-role='end'>End tour</button> </div> </div>",afterSetState:function(){},afterGetState:function(){},afterRemoveState:function(){},onStart:function(){},onEnd:function(){},onShow:function(){},onShown:function(){},onHide:function(){},onHidden:function(){},onNext:function(){},onPrev:function(){},onPause:function(){},onResume:function(){}},c),this._force=!1,this._inited=!1,this.backdrop={overlay:null,$element:null,$background:null,backgroundShown:!1,overlayElementShown:!1}}return c.prototype.addSteps=function(a){var b,c,d;for(c=0,d=a.length;d>c;c++)b=a[c],this.addStep(b);return this},c.prototype.addStep=function(a){return this._options.steps.push(a),this},c.prototype.getStep=function(b){return null!=this._options.steps[b]?a.extend({id:"step-"+b,path:"",placement:"right",title:"",content:"<p></p>",next:b===this._options.steps.length-1?-1:b+1,prev:b-1,animation:!0,container:this._options.container,backdrop:this._options.backdrop,redirect:this._options.redirect,orphan:this._options.orphan,duration:this._options.duration,template:this._options.template,onShow:this._options.onShow,onShown:this._options.onShown,onHide:this._options.onHide,onHidden:this._options.onHidden,onNext:this._options.onNext,onPrev:this._options.onPrev,onPause:this._options.onPause,onResume:this._options.onResume},this._options.steps[b]):void 0},c.prototype.init=function(a){return this._force=a,this.ended()?(this._debug("Tour ended, init prevented."),this):(this.setCurrentStep(),this._initMouseNavigation(),this._initKeyboardNavigation(),this._onResize(function(a){return function(){return a.showStep(a._current)}}(this)),null!==this._current&&this.showStep(this._current),this._inited=!0,this)},c.prototype.start=function(a){var b;return null==a&&(a=!1),this._inited||this.init(a),null===this._current&&(b=this._makePromise(null!=this._options.onStart?this._options.onStart(this):void 0),this._callOnPromiseDone(b,this.showStep,0)),this},c.prototype.next=function(){var a;return a=this.hideStep(this._current),this._callOnPromiseDone(a,this._showNextStep)},c.prototype.prev=function(){var a;return a=this.hideStep(this._current),this._callOnPromiseDone(a,this._showPrevStep)},c.prototype.goTo=function(a){var b;return b=this.hideStep(this._current),this._callOnPromiseDone(b,this.showStep,a)},c.prototype.end=function(){var c,e;return c=function(c){return function(){return a(d).off("click.tour-"+c._options.name),a(d).off("keyup.tour-"+c._options.name),a(b).off("resize.tour-"+c._options.name),c._setState("end","yes"),c._inited=!1,c._force=!1,c._clearTimer(),null!=c._options.onEnd?c._options.onEnd(c):void 0}}(this),e=this.hideStep(this._current),this._callOnPromiseDone(e,c)},c.prototype.ended=function(){return!this._force&&!!this._getState("end")},c.prototype.restart=function(){return this._removeState("current_step"),this._removeState("end"),this.start()},c.prototype.pause=function(){var a;return a=this.getStep(this._current),a&&a.duration?(this._paused=!0,this._duration-=(new Date).getTime()-this._start,b.clearTimeout(this._timer),this._debug("Paused/Stopped step "+(this._current+1)+" timer ("+this._duration+" remaining)."),null!=a.onPause?a.onPause(this,this._duration):void 0):this},c.prototype.resume=function(){var a;return a=this.getStep(this._current),a&&a.duration?(this._paused=!1,this._start=(new Date).getTime(),this._duration=this._duration||a.duration,this._timer=b.setTimeout(function(a){return function(){return a._isLast()?a.next():a.end()}}(this),this._duration),this._debug("Started step "+(this._current+1)+" timer with duration "+this._duration),null!=a.onResume&&this._duration!==a.duration?a.onResume(this,this._duration):void 0):this},c.prototype.hideStep=function(b){var c,d,e;return(e=this.getStep(b))?(this._clearTimer(),d=this._makePromise(null!=e.onHide?e.onHide(this,b):void 0),c=function(c){return function(){var d;return d=a(e.element),d.data("bs.popover")||d.data("popover")||(d=a("body")),d.popover("destroy").removeClass("tour-"+c._options.name+"-element tour-"+c._options.name+"-"+b+"-element"),e.reflex&&d.css("cursor","").off("click.tour-"+c._options.name),e.backdrop&&c._hideBackdrop(),null!=e.onHidden?e.onHidden(c):void 0}}(this),this._callOnPromiseDone(d,c),d):void 0},c.prototype.showStep=function(a){var b,c,e,f;return this.ended()?(this._debug("Tour ended, showStep prevented."),this):(f=this.getStep(a))?(e=a<this._current,b=this._makePromise(null!=f.onShow?f.onShow(this,a):void 0),c=function(b){return function(){var c,g;if(b.setCurrentStep(a),g=function(){switch({}.toString.call(f.path)){case"[object Function]":return f.path();case"[object String]":return this._options.basePath+f.path;default:return f.path}}.call(b),c=[d.location.pathname,d.location.hash].join(""),b._isRedirect(g,c))return void b._redirect(f,g);if(b._isOrphan(f)){if(!f.orphan)return b._debug("Skip the orphan step "+(b._current+1)+". Orphan option is false and the element doesn't exist or is hidden."),void(e?b._showPrevStep():b._showNextStep());b._debug("Show the orphan step "+(b._current+1)+". Orphans option is true.")}return f.backdrop&&b._showBackdrop(b._isOrphan(f)?void 0:f.element),b._scrollIntoView(f.element,function(){return b.getCurrentStep()===a?(null!=f.element&&f.backdrop&&b._showOverlayElement(f.element),b._showPopover(f,a),null!=f.onShown&&f.onShown(b),b._debug("Step "+(b._current+1)+" of "+b._options.steps.length)):void 0}),f.duration?b.resume():void 0}}(this),this._callOnPromiseDone(b,c),b):void 0},c.prototype.getCurrentStep=function(){return this._current},c.prototype.setCurrentStep=function(a){return null!=a?(this._current=a,this._setState("current_step",a)):(this._current=this._getState("current_step"),this._current=null===this._current?null:parseInt(this._current,10)),this},c.prototype._setState=function(a,b){var c,d;if(this._options.storage){d=""+this._options.name+"_"+a;try{this._options.storage.setItem(d,b)}catch(e){c=e,c.code===DOMException.QUOTA_EXCEEDED_ERR&&this.debug("LocalStorage quota exceeded. State storage failed.")}return this._options.afterSetState(d,b)}return null==this._state&&(this._state={}),this._state[a]=b},c.prototype._removeState=function(a){var b;return this._options.storage?(b=""+this._options.name+"_"+a,this._options.storage.removeItem(b),this._options.afterRemoveState(b)):null!=this._state?delete this._state[a]:void 0},c.prototype._getState=function(a){var b,c;return this._options.storage?(b=""+this._options.name+"_"+a,c=this._options.storage.getItem(b)):null!=this._state&&(c=this._state[a]),(void 0===c||"null"===c)&&(c=null),this._options.afterGetState(a,c),c},c.prototype._showNextStep=function(){var a,b,c;return c=this.getStep(this._current),b=function(a){return function(){return a.showStep(c.next)}}(this),a=this._makePromise(null!=c.onNext?c.onNext(this):void 0),this._callOnPromiseDone(a,b)},c.prototype._showPrevStep=function(){var a,b,c;return c=this.getStep(this._current),b=function(a){return function(){return a.showStep(c.prev)}}(this),a=this._makePromise(null!=c.onPrev?c.onPrev(this):void 0),this._callOnPromiseDone(a,b)},c.prototype._debug=function(a){return this._options.debug?b.console.log("Bootstrap Tour '"+this._options.name+"' | "+a):void 0},c.prototype._isRedirect=function(a,b){return null!=a&&""!==a&&("[object RegExp]"==={}.toString.call(a)&&!a.test(b)||"[object String]"==={}.toString.call(a)&&a.replace(/\?.*$/,"").replace(/\/?$/,"")!==b.replace(/\/?$/,""))},c.prototype._redirect=function(b,c){return a.isFunction(b.redirect)?b.redirect.call(this,c):b.redirect===!0?(this._debug("Redirect to "+c),d.location.href=c):void 0},c.prototype._isOrphan=function(b){return null==b.element||!a(b.element).length||a(b.element).is(":hidden")&&"http://www.w3.org/2000/svg"!==a(b.element)[0].namespaceURI},c.prototype._isLast=function(){return this._current<this._options.steps.length-1},c.prototype._showPopover=function(b,c){var d,e,f,g,h,i;return a(".tour-"+this._options.name).remove(),i=a.extend({},this._options),f=a(a.isFunction(b.template)?b.template(c,b):b.template),e=f.find(".popover-navigation"),h=this._isOrphan(b),h&&(b.element="body",b.placement="top",f=f.addClass("orphan")),d=a(b.element),f.addClass("tour-"+this._options.name+" tour-"+this._options.name+"-"+c),d.addClass("tour-"+this._options.name+"-element tour-"+this._options.name+"-"+c+"-element"),b.options&&a.extend(i,b.options),b.reflex&&!h&&d.css("cursor","pointer").on("click.tour-"+this._options.name,function(a){return function(){return a._isLast()?a.next():a.end()}}(this)),b.prev<0&&e.find("[data-role='prev']").addClass("disabled"),b.next<0&&e.find("[data-role='next']").addClass("disabled"),b.duration||e.find("[data-role='pause-resume']").remove(),b.template=f.clone().wrap("<div>").parent().html(),d.popover({placement:b.placement,trigger:"manual",title:b.title,content:b.content,html:!0,animation:b.animation,container:b.container,template:b.template,selector:b.element}).popover("show"),g=d.data("bs.popover")?d.data("bs.popover").tip():d.data("popover").tip(),g.attr("id",b.id),this._reposition(g,b),h?this._center(g):void 0},c.prototype._reposition=function(b,c){var e,f,g,h,i,j,k;if(h=b[0].offsetWidth,f=b[0].offsetHeight,k=b.offset(),i=k.left,j=k.top,e=a(d).outerHeight()-k.top-b.outerHeight(),0>e&&(k.top=k.top+e),g=a("html").outerWidth()-k.left-b.outerWidth(),0>g&&(k.left=k.left+g),k.top<0&&(k.top=0),k.left<0&&(k.left=0),b.offset(k),"bottom"===c.placement||"top"===c.placement){if(i!==k.left)return this._replaceArrow(b,2*(k.left-i),h,"left")}else if(j!==k.top)return this._replaceArrow(b,2*(k.top-j),f,"top")},c.prototype._center=function(c){return c.css("top",a(b).outerHeight()/2-c.outerHeight()/2)},c.prototype._replaceArrow=function(a,b,c,d){return a.find(".arrow").css(d,b?50*(1-b/c)+"%":"")},c.prototype._scrollIntoView=function(c,d){var e,f,g,h,i,j;return e=a(c),e.length?(f=a(b),h=e.offset().top,j=f.height(),i=Math.max(0,h-j/2),this._debug("Scroll into view. ScrollTop: "+i+". Element offset: "+h+". Window height: "+j+"."),g=0,a("body,html").stop(!0,!0).animate({scrollTop:Math.ceil(i)},function(a){return function(){return 2===++g?(d(),a._debug("Scroll into view. Animation end element offset: "+e.offset().top+". Window height: "+f.height()+".")):void 0}}(this))):d()},c.prototype._onResize=function(c,d){return a(b).on("resize.tour-"+this._options.name,function(){return clearTimeout(d),d=setTimeout(c,100)})},c.prototype._initMouseNavigation=function(){var b;return b=this,a(d).off("click.tour-"+this._options.name,".popover.tour-"+this._options.name+" *[data-role='prev']:not(.disabled)").off("click.tour-"+this._options.name,".popover.tour-"+this._options.name+" *[data-role='next']:not(.disabled)").off("click.tour-"+this._options.name,".popover.tour-"+this._options.name+" *[data-role='end']").off("click.tour-"+this._options.name,".popover.tour-"+this._options.name+" *[data-role='pause-resume']").on("click.tour-"+this._options.name,".popover.tour-"+this._options.name+" *[data-role='next']:not(.disabled)",function(a){return function(b){return b.preventDefault(),a.next()}}(this)).on("click.tour-"+this._options.name,".popover.tour-"+this._options.name+" *[data-role='prev']:not(.disabled)",function(a){return function(b){return b.preventDefault(),a.prev()}}(this)).on("click.tour-"+this._options.name,".popover.tour-"+this._options.name+" *[data-role='end']",function(a){return function(b){return b.preventDefault(),a.end()}}(this)).on("click.tour-"+this._options.name,".popover.tour-"+this._options.name+" *[data-role='pause-resume']",function(c){var d;return c.preventDefault(),d=a(this),d.text(d.data(b._paused?"pause-text":"resume-text")),b._paused?b.resume():b.pause()})},c.prototype._initKeyboardNavigation=function(){return this._options.keyboard?a(d).on("keyup.tour-"+this._options.name,function(a){return function(b){if(b.which)switch(b.which){case 39:return b.preventDefault(),a._isLast()?a.next():a.end();case 37:if(b.preventDefault(),a._current>0)return a.prev();break;case 27:return b.preventDefault(),a.end()}}}(this)):void 0},c.prototype._makePromise=function(b){return b&&a.isFunction(b.then)?b:null},c.prototype._callOnPromiseDone=function(a,b,c){return a?a.then(function(a){return function(){return b.call(a,c)}}(this)):b.call(this,c)},c.prototype._showBackdrop=function(){return this.backdrop.backgroundShown?void 0:(this.backdrop=a("<div/>",{"class":"tour-backdrop"}),this.backdrop.backgroundShown=!0,a("body").append(this.backdrop))},c.prototype._hideBackdrop=function(){return this._hideOverlayElement(),this._hideBackground()},c.prototype._hideBackground=function(){return this.backdrop?(this.backdrop.remove(),this.backdrop.overlay=null,this.backdrop.backgroundShown=!1):void 0},c.prototype._showOverlayElement=function(b){var c,d,e;return d=a(b),d&&0!==d.length&&!this.backdrop.overlayElementShown?(this.backdrop.overlayElementShown=!0,c=a("<div/>"),e=d.offset(),e.top=e.top,e.left=e.left,c.width(d.innerWidth()).height(d.innerHeight()).addClass("tour-step-background").offset(e),d.addClass("tour-step-backdrop"),a("body").append(c),this.backdrop.$element=d,this.backdrop.$background=c):void 0},c.prototype._hideOverlayElement=function(){return this.backdrop.overlayElementShown?(this.backdrop.$element.removeClass("tour-step-backdrop"),this.backdrop.$background.remove(),this.backdrop.$element=null,this.backdrop.$background=null,this.backdrop.overlayElementShown=!1):void 0},c.prototype._clearTimer=function(){return b.clearTimeout(this._timer),this._timer=null,this._duration=null},c}(),b.Tour=c}(jQuery,window);
(function(e,t){Croppic=function(e,t){var n=this;n.id=e;n.obj=$("#"+e);n.outputDiv=n.obj;n.options={uploadUrl:"",uploadData:{},cropUrl:"",cropData:{},outputUrlId:"",imgEyecandy:true,imgEyecandyOpacity:.2,zoomFactor:10,rotateFactor:5,doubleZoomControls:true,rotateControls:true,modal:false,customUploadButtonId:"",loaderHtml:"",scaleToFill:true,loadPicture:"",onReset:null,onBeforeImgUpload:null,onAfterImgUpload:null,onImgDrag:null,onImgZoom:null,onImgRotate:null,onBeforeImgCrop:null,onAfterImgCrop:null,onError:null};for(i in t)n.options[i]=t[i];n.init()};Croppic.prototype={id:"",imgInitW:0,imgInitH:0,imgW:0,imgH:0,objW:0,objH:0,actualRotation:0,windowW:0,windowH:$(e).height(),obj:{},outputDiv:{},outputUrlObj:{},img:{},defaultImg:{},croppedImg:{},imgEyecandy:{},form:{},cropControlsUpload:{},cropControlsCrop:{},cropControlZoomMuchIn:{},cropControlZoomMuchOut:{},cropControlZoomIn:{},cropControlZoomOut:{},cropControlCrop:{},cropControlReset:{},cropControlRemoveCroppedImage:{},modal:{},loader:{},init:function(){var e=this;e.objW=e.obj.width();e.objH=e.obj.height();e.actualRotation=0;if($.isEmptyObject(e.defaultImg)){e.defaultImg=e.obj.find("img")}e.createImgUploadControls();if($.isEmptyObject(e.options.loadPicture)){e.bindImgUploadControl()}else{e.loadExistingImage()}},createImgUploadControls:function(){var e=this;var t="";if(e.options.customUploadButtonId===""){t='<i class="cropControlUpload"></i>'}var n='<i class="cropControlRemoveCroppedImage"></i>';if($.isEmptyObject(e.croppedImg)){n=""}if(!$.isEmptyObject(e.options.loadPicture)){t=""}var r='<div class="cropControls cropControlsUpload"> '+t+n+" </div>";e.outputDiv.append(r);e.cropControlsUpload=e.outputDiv.find(".cropControlsUpload");if(e.options.customUploadButtonId===""){e.imgUploadControl=e.outputDiv.find(".cropControlUpload")}else{e.imgUploadControl=$("#"+e.options.customUploadButtonId);e.imgUploadControl.show()}if(!$.isEmptyObject(e.croppedImg)){e.cropControlRemoveCroppedImage=e.outputDiv.find(".cropControlRemoveCroppedImage")}},bindImgUploadControl:function(){var e=this;var n='<form class="'+e.id+'_imgUploadForm" style="position: absolute; visibility: hidden; top:0;">  <input type="file" name="img">  </form>';e.outputDiv.append(n);e.form=e.outputDiv.find("."+e.id+"_imgUploadForm");e.imgUploadControl.off("click");e.imgUploadControl.on("click",function(){e.form.find('input[type="file"]').trigger("click")});if(!$.isEmptyObject(e.croppedImg)){e.cropControlRemoveCroppedImage.on("click",function(){e.croppedImg.remove();$(this).hide();if(!$.isEmptyObject(e.defaultImg)){e.obj.append(e.defaultImg)}if(e.options.outputUrlId!==""){$("#"+e.options.outputUrlId).val("")}})}e.form.find('input[type="file"]').change(function(){if(e.options.onBeforeImgUpload)e.options.onBeforeImgUpload.call(e);e.showLoader();e.imgUploadControl.hide();var n=new FormData(e.form[0]);for(var r in e.options.uploadData){if(e.options.uploadData.hasOwnProperty(r)){n.append(r,e.options.uploadData[r])}}$.ajax({url:e.options.uploadUrl,data:n,context:t.body,cache:false,contentType:false,processData:false,type:"POST"}).always(function(t){response=typeof t=="object"?t:jQuery.parseJSON(t);if(response.status=="success"){e.imgInitW=e.imgW=response.width;e.imgInitH=e.imgH=response.height;if(e.options.modal){e.createModal()}if(!$.isEmptyObject(e.croppedImg)){e.croppedImg.remove()}e.imgUrl=response.url;var n=$('<img src="'+response.url+'">');e.obj.append(n);n.load(function(){e.initCropper();e.hideLoader();if(e.options.onAfterImgUpload)e.options.onAfterImgUpload.call(e)})}if(response.status=="error"){if(e.options.onError)e.options.onError.call(e,response.message);e.hideLoader();setTimeout(function(){e.reset()},2e3)}})})},loadExistingImage:function(){var e=this;if($.isEmptyObject(e.croppedImg)){if(e.options.onBeforeImgUpload)e.options.onBeforeImgUpload.call(e);e.showLoader();if(e.options.modal){e.createModal()}if(!$.isEmptyObject(e.croppedImg)){e.croppedImg.remove()}e.imgUrl=e.options.loadPicture;var t=$('<img src="'+e.options.loadPicture+'">');e.obj.append(t);t.load(function(){e.imgInitW=e.imgW=this.width;e.imgInitH=e.imgH=this.height;e.initCropper();e.hideLoader();if(e.options.onAfterImgUpload)e.options.onAfterImgUpload.call(e)})}else{e.cropControlRemoveCroppedImage.on("click",function(){e.croppedImg.remove();$(this).hide();if(!$.isEmptyObject(e.defaultImg)){e.obj.append(e.defaultImg)}if(e.options.outputUrlId!==""){$("#"+e.options.outputUrlId).val("")}e.croppedImg="";e.reset()})}},createModal:function(){var e=this;var t=e.windowH/2-e.objH/2;var n='<div id="croppicModal">'+'<div id="croppicModalObj" style="width:'+e.objW+"px; height:"+e.objH+"px; margin:0 auto; margin-top:"+t+'px; position: relative;"> </div>'+"</div>";$("body").append(n);e.modal=$("#croppicModal");e.obj=$("#croppicModalObj")},destroyModal:function(){var e=this;e.obj=e.outputDiv;e.modal.remove()},initCropper:function(){var e=this;e.img=e.obj.find("img");e.img.wrap('<div class="cropImgWrapper" style="overflow:hidden; z-index:1; position:absolute; width:'+e.objW+"px; height:"+e.objH+'px;"></div>');e.createCropControls();if(e.options.imgEyecandy){e.createEyecandy()}e.initDrag();e.initialScaleImg()},createEyecandy:function(){var e=this;e.imgEyecandy=e.img.clone();e.imgEyecandy.css({"z-index":"0",opacity:e.options.imgEyecandyOpacity}).appendTo(e.obj)},destroyEyecandy:function(){var e=this;e.imgEyecandy.remove()},initialScaleImg:function(){var e=this;e.zoom(-e.imgInitW);e.zoom(40);e.img.css({left:-(e.imgW-e.objW)/2,top:-(e.imgH-e.objH)/2,position:"relative"});if(e.options.imgEyecandy){e.imgEyecandy.css({left:-(e.imgW-e.objW)/2,top:-(e.imgH-e.objH)/2,position:"relative"})}},createCropControls:function(){var e=this;var t="";var n='<i class="cropControlZoomIn"></i>';var r='<i class="cropControlZoomOut"></i>';var i="";var s="";var o="";var u='<i class="cropControlCrop"></i>';var a='<i class="cropControlReset"></i>';var f;if(e.options.doubleZoomControls){t='<i class="cropControlZoomMuchIn"></i>';i='<i class="cropControlZoomMuchOut"></i>'}if(e.options.rotateControls){s='<i class="cropControlRotateLeft"></i>';o='<i class="cropControlRotateRight"></i>'}f='<div class="cropControls cropControlsCrop">'+t+n+r+i+s+o+u+a+"</div>";e.obj.append(f);e.cropControlsCrop=e.obj.find(".cropControlsCrop");if(e.options.doubleZoomControls){e.cropControlZoomMuchIn=e.cropControlsCrop.find(".cropControlZoomMuchIn");e.cropControlZoomMuchIn.on("click",function(){e.zoom(e.options.zoomFactor*10)});e.cropControlZoomMuchOut=e.cropControlsCrop.find(".cropControlZoomMuchOut");e.cropControlZoomMuchOut.on("click",function(){e.zoom(-e.options.zoomFactor*10)})}e.cropControlZoomIn=e.cropControlsCrop.find(".cropControlZoomIn");e.cropControlZoomIn.on("click",function(){e.zoom(e.options.zoomFactor)});e.cropControlZoomOut=e.cropControlsCrop.find(".cropControlZoomOut");e.cropControlZoomOut.on("click",function(){e.zoom(-e.options.zoomFactor)});e.cropControlZoomIn=e.cropControlsCrop.find(".cropControlRotateLeft");e.cropControlZoomIn.on("click",function(){e.rotate(-e.options.rotateFactor)});e.cropControlZoomOut=e.cropControlsCrop.find(".cropControlRotateRight");e.cropControlZoomOut.on("click",function(){e.rotate(e.options.rotateFactor)});e.cropControlCrop=e.cropControlsCrop.find(".cropControlCrop");e.cropControlCrop.on("click",function(){e.crop()});e.cropControlReset=e.cropControlsCrop.find(".cropControlReset");e.cropControlReset.on("click",function(){e.reset()})},initDrag:function(){var e=this;e.img.on("mousedown",function(t){t.preventDefault();var n=e.img.css("z-index"),r=e.img.outerHeight(),i=e.img.outerWidth(),s=e.img.offset().top+r-t.pageY,o=e.img.offset().left+i-t.pageX;e.img.css("z-index",1e3).on("mousemove",function(t){var u=t.pageY+s-r;var a=t.pageX+o-i;e.img.offset({top:u,left:a}).on("mouseup",function(){$(this).removeClass("draggable").css("z-index",n)});if(e.options.imgEyecandy){e.imgEyecandy.offset({top:u,left:a})}if(e.objH<e.imgH){if(parseInt(e.img.css("top"))>0){e.img.css("top",0);if(e.options.imgEyecandy){e.imgEyecandy.css("top",0)}}var f=-(e.imgH-e.objH);if(parseInt(e.img.css("top"))<f){e.img.css("top",f);if(e.options.imgEyecandy){e.imgEyecandy.css("top",f)}}}else{if(parseInt(e.img.css("top"))<0){e.img.css("top",0);if(e.options.imgEyecandy){e.imgEyecandy.css("top",0)}}var f=e.objH-e.imgH;if(parseInt(e.img.css("top"))>f){e.img.css("top",f);if(e.options.imgEyecandy){e.imgEyecandy.css("top",f)}}}if(e.objW<e.imgW){if(parseInt(e.img.css("left"))>0){e.img.css("left",0);if(e.options.imgEyecandy){e.imgEyecandy.css("left",0)}}var l=-(e.imgW-e.objW);if(parseInt(e.img.css("left"))<l){e.img.css("left",l);if(e.options.imgEyecandy){e.imgEyecandy.css("left",l)}}}else{if(parseInt(e.img.css("left"))<0){e.img.css("left",0);if(e.options.imgEyecandy){e.imgEyecandy.css("left",0)}}var l=e.objW-e.imgW;if(parseInt(e.img.css("left"))>l){e.img.css("left",l);if(e.options.imgEyecandy){e.imgEyecandy.css("left",l)}}}if(e.options.onImgDrag)e.options.onImgDrag.call(e)})}).on("mouseup",function(){e.img.off("mousemove")}).on("mouseout",function(){e.img.off("mousemove")})},rotate:function(e){var t=this;t.actualRotation+=e;t.img.css({"-webkit-transform":"rotate("+t.actualRotation+"deg)","-moz-transform":"rotate("+t.actualRotation+"deg)",transform:"rotate("+t.actualRotation+"deg)"});if(t.options.imgEyecandy){t.imgEyecandy.css({"-webkit-transform":"rotate("+t.actualRotation+"deg)","-moz-transform":"rotate("+t.actualRotation+"deg)",transform:"rotate("+t.actualRotation+"deg)"})}if(typeof t.options.onImgRotate=="function")t.options.onImgRotate.call(t)},zoom:function(e){var t=this;var n=t.imgW/t.imgH;var r=t.imgW+e;var i=r/n;var s=true;if(r<t.objW||i<t.objH){if(r-t.objW<i-t.objH){r=t.objW;i=r/n}else{i=t.objH;r=n*i}s=false}if(!t.options.scaleToFill&&(r>t.imgInitW||i>t.imgInitH)){if(r-t.imgInitW<i-t.imgInitH){r=t.imgInitW;i=r/n}else{i=t.imgInitH;r=n*i}s=false}t.imgW=r;t.img.width(r);t.imgH=i;t.img.height(i);var o=parseInt(t.img.css("top"))-e/2;var u=parseInt(t.img.css("left"))-e/2;if(o>0){o=0}if(u>0){u=0}var a=-(i-t.objH);if(o<a){o=a}var f=-(r-t.objW);if(u<f){u=f}if(s){t.img.css({top:o,left:u})}if(t.options.imgEyecandy){t.imgEyecandy.width(r);t.imgEyecandy.height(i);if(s){t.imgEyecandy.css({top:o,left:u})}}if(t.options.onImgZoom)t.options.onImgZoom.call(t)},crop:function(){var e=this;if(e.options.onBeforeImgCrop)e.options.onBeforeImgCrop.call(e);e.cropControlsCrop.hide();e.showLoader();var n={imgUrl:e.imgUrl,imgInitW:e.imgInitW,imgInitH:e.imgInitH,imgW:e.imgW,imgH:e.imgH,imgY1:Math.abs(parseInt(e.img.css("top"))),imgX1:Math.abs(parseInt(e.img.css("left"))),cropH:e.objH,cropW:e.objW,rotation:e.actualRotation};var r=new FormData;for(var i in n){if(n.hasOwnProperty(i)){r.append(i,n[i])}}for(var i in e.options.cropData){if(e.options.cropData.hasOwnProperty(i)){r.append(i,e.options.cropData[i])}}$.ajax({url:e.options.cropUrl,data:r,context:t.body,cache:false,contentType:false,processData:false,type:"POST"}).always(function(t){response=typeof t=="object"?t:jQuery.parseJSON(t);if(response.status=="success"){if(e.options.imgEyecandy)e.imgEyecandy.hide();e.destroy();e.obj.append('<img class="croppedImg" src="'+response.url+'">');if(e.options.outputUrlId!==""){$("#"+e.options.outputUrlId).val(response.url)}e.croppedImg=e.obj.find(".croppedImg");e.init();e.hideLoader()}if(response.status=="error"){if(e.options.onError)e.options.onError.call(e,response.message);e.hideLoader();setTimeout(function(){e.reset()},2e3)}if(e.options.onAfterImgCrop)e.options.onAfterImgCrop.call(e)})},showLoader:function(){var e=this;e.obj.append(e.options.loaderHtml);e.loader=e.obj.find(".loader")},hideLoader:function(){var e=this;e.loader.remove()},reset:function(){var e=this;e.destroy();e.init();if(!$.isEmptyObject(e.croppedImg)){e.obj.append(e.croppedImg);if(e.options.outputUrlId!==""){$("#"+e.options.outputUrlId).val(e.croppedImg.attr("url"))}}if(typeof e.options.onReset=="function")e.options.onReset.call(e)},destroy:function(){var e=this;if(e.options.modal&&!$.isEmptyObject(e.modal)){e.destroyModal()}if(e.options.imgEyecandy&&!$.isEmptyObject(e.imgEyecandy)){e.destroyEyecandy()}if(!$.isEmptyObject(e.cropControlsUpload)){e.cropControlsUpload.remove()}if(!$.isEmptyObject(e.cropControlsCrop)){e.cropControlsCrop.remove()}if(!$.isEmptyObject(e.loader)){e.loader.remove()}if(!$.isEmptyObject(e.form)){e.form.remove()}e.obj.html("")}}})(window,document)
/*!
 * Fresco - A Beautiful Responsive Lightbox - v1.6.2
 * (c) 2012-2014 Nick Stakenburg
 *
 * http://www.frescojs.com
 *
 * License: http://www.frescojs.com/license
 */
eval(function(p,a,c,k,e,r){e=function(c){return(c<a?'':e(parseInt(c/a)))+((c=c%a)>35?String.fromCharCode(c+29):c.toString(36))};if(!''.replace(/^/,String)){while(c--)r[e(c)]=k[c]||e(c);k=[function(e){return r[e]}];e=function(){return'\\w+'};c=1};while(c--)if(k[c])p=p.replace(new RegExp('\\b'+e(c)+'\\b','g'),k[c]);return p}('(J(i){"J"==8Z 5L&&5L.90?5L(["91"],i):2a&&!16.75&&(16.75=i(2a))})(J($){J 1e(i){K t={};1Z(K e 4m i)t[e]=i[e]+"1e";T t}J 5M(){K i=A.3a();T i.M>i.L?"4n":"4Z"}J 5N(i){T 51.76.2u(51,i.77(" ","").3H(","))}J 5O(){1Z(K i="",t=5N("92,97,93,78,94,95");!/^([a-52-Z])+/.53(i);)i=1a[t]().96(36).54(2,5);T i}J 5N(i){T 51.76.2u(51,i.3H(","))}J 5P(i){16.5Q&&5Q[5Q.5P?"5P":"98"](i)}J 5R(i,t){U(!1G.79)T t(!1,1),2v 0;K e={L:i.L,M:i.M},s={L:3V,M:3V},n=1,o=1;e.L>s.L&&(n=s.L/e.L),e.M>s.M&&(o=s.M/e.M);K a=1a.1V(n,o);1>a&&(e.L*=a,e.M*=a);K r=2j 5S,h=$("<4o>").2w(e)[0],d=h.5T("2d");d.99=.8,d.9a(i,0,0,e.L,e.M),r.3I=J(){t(r,a)};7a{r.2Q=h.5U("1q/7b")}7c(l){t(!1,1)}}J 56(i,t){1Z(K e 4m t)t[e]&&t[e].7d&&t[e].7d===9b?(i[e]=$.1b({},i[e])||{},56(i[e],t[e])):i[e]=t[e];T i}J 3m(i,t){T 56($.1b({},i),t)}J 3W(){I.1z.2u(I,2C.2b(1J))}J 5V(){I.1z.2u(I,2C.2b(1J))}J 5W(){I.1z.2u(I,2C.2b(1J))}J 5X(){I.1z.2u(I,2C.2b(1J))}J 5Y(){I.1z.2u(I,2C.2b(1J))}J 3X(){I.1z.2u(I,2C.2b(1J))}J 5Z(){I.1z.2u(I,2C.2b(1J))}J 4p(i){K t={11:"1q"};T $.1h(H,J(e,s){K n=s.1j(i);n&&(t=n,t.11=e,t.1u=i)}),t}J 57(i){K t=(i||"").77(/\\?.*/g,"").7e(/\\.([^.]{3,4})$/);T t?t[1].60():1A}K j={};$.1b(j,{61:"1.6.2"}),j.3J={7f:{1v:{1r:{1i:0,1f:0,3n:9c,58:!0},1K:{1i:0,1f:62,2F:63},14:{1i:3V,3o:0,2p:62,2F:63},9d:{9e:3V,9f:3V},16:{1i:9g,1f:62,1s:9h},W:{1i:63,1f:3V,2F:9i}},59:{W:{1i:7g,1f:7g,2F:9j},16:{1i:10}},5a:{1n:!0,2x:!0,5b:!0},2R:!1,3Y:"1H-1C",3b:"2k",1M:{2q:!0},1s:!1,3K:!0,7h:{2k:{21:20,2y:20},x:{21:0,2y:0},y:{21:0,2y:0},2S:{21:0,2y:0}},14:!0,1R:{L:{4n:.8,4Z:.6}},W:"1W",1N:{64:1,5c:1,9k:1,9l:1,4n:0,2R:0},22:{64:1,2T:1,9m:1,7i:1,9n:3,2R:0,9o:1,9p:0,9q:"7j"},5d:{1q:{},1N:{L:7k},22:{L:7k,M:7l}}},7m:{},23:{},7n:{}};K q=J(i){J t(t){K e=9r(t+"([\\\\d.]+)").5e(i);T e?65(e[1]):!0}T{1k:!(!16.9s||-1!==i.2U("66"))&&t("9t "),66:i.2U("66")>-1&&(!!16.67&&67.61&&65(67.61())||7.55),3Z:i.2U("7o/")>-1&&t("7o/"),7p:i.2U("7p")>-1&&-1===i.2U("9u")&&t("9v:"),4q:!!i.7e(/9w.*9x.*9y/),68:i.2U("68")>-1&&t("68/"),7q:i.2U("7r")>-1&&t("7r/"),3p:i.2U("3p")>-1&&t("3p "),5f:i.2U("5f")>-1&&t("5f/")}}(7s.9z),2C=9A.2V.9B,2l={5g:J(i){T i&&1==i.7t},13:{9C:J(){J i(i){1Z(K t=i;t&&t.7u;)t=t.7u;T t}T J(t){K e=i(t);T!(!e||!e.4r)}}()}};(J(){J i(i){K t;U(i.4s.7v?t=i.4s.7v/9D:i.4s.7w&&(t=-i.4s.7w/3),t){K e=$.9E("23:5h");$(i.3c).9F(e,t),e.9G()&&i.3d(),e.9H()&&i.2W()}}$(2c.40).1O("5h 9I",i)})();K z=J(){K i=0,t=5O()+5O();T J(e){1Z(e=e||t,i++;$("#"+e+i)[0];)i++;T e+i}}(),3L={};(J(){K i={};$.1h(["9J","9K","9L","9M","9N"],J(t,e){i[e]=J(i){T 1a.9O(i,t+2)}}),$.1b(i,{9P:J(i){T 1-1a.9Q(i*1a.9R/2)}}),$.1h(i,J(i,t){3L["9S"+i]=t,3L["9T"+i]=J(i){T 1-t(1-i)},3L["9U"+i]=J(i){T.5>i?t(2*i)/2:1-t(-2*i+2)/2}}),$.1h(3L,J(i,t){$.3L[i]||($.3L[i]=t)})})();K A={3a:J(){K i={L:$(16).L(),M:$(16).M()};U(q.4q){K t=2c.40.9V/16.69;i.M=16.7x*t}T i}},3q={3r:J(i){K t=$.1b({2e:"2S"},1J[1]||{});t.2G||(t.2G=$.1b({},V.2z));K e=t.2G,s=$.1b({},i),n=1,o=5;t.3s&&(e.L-=2*t.3s,e.M-=2*t.3s);K a={M:!0,L:!0};2D(t.2e){1D"2k":a={};1D"L":1D"M":a={},a[t.2e]=!0}1Z(;o>0&&(a.L&&s.L>e.L||a.M&&s.M>e.M);){K r=1,h=1;a.L&&s.L>e.L&&(r=e.L/s.L),a.M&&s.M>e.M&&(h=e.M/s.M);K n=1a.1V(r,h);s={L:1a.2X(i.L*n),M:1a.2X(i.M*n)},o--}T s.L=1a.1x(s.L,0),s.M=1a.1x(s.M,0),s}},1G=J(){J i(i){T e(i,"7y")}J t(i,t){1Z(K e 4m i)U(2v 0!==s.41[i[e]])T"7y"==t?i[e]:!0;T!1}J e(i,e){K s=i.9W(0).7z()+i.54(1),o=(i+" "+n.9X(s+" ")+s).3H(" ");T t(o,e)}K s=2c.6a("12"),n="9Y 9Z O a0 a1".3H(" ");T{4o:J(){K i=2c.6a("4o");T!(!i.5T||!i.5T("2d"))}(),1R:J(){7a{T!!("a2"4m 16||16.7A&&2c a3 7A)}7c(i){T!1}}(),6b:!(!16.6b||q.1k&&9>q.1k),15:{7B:e("7B"),a4:i}}}();1G.24=1G.1R&&(q.4q||q.3p||q.5f||q.7q||!/^(a5|a6|a7)/.53(7s.a8)),1G.79=1G.4o&&J(){K i=2c.6a("4o");T i.5U&&0===i.5U("1q/6c").2U("1j:1q/6c")}();K B={1I:J(i,t,e){"J"==$.11(t)&&(e=t,t={}),t=$.1b({3M:!1,11:!1,a9:aa,2Y:!0},t||{});K s=B.1B.1I(i),n=t.11||4p(i).11,o={11:n,42:e};U(!s){K a;(a=B.3t.1I(i))&&a.17&&(s=a,B.1B.1S(i,a.17,a.1j))}U(s)e&&e($.1b({},s.17),s.1j);2r 2D(t.3M&&B.1K.2m(i),n){1D"1q":K r=2j 5S;r.3I=J(){r.3I=J(){},s={17:{L:r.L,M:r.M}},o.1q=r,t.2Y?5R(r,J(n,a){o.2Y=n,o.4t=a,B.1B.1S(i,s.17,o),t.3M&&B.1K.2m(i),e&&e(s.17,o)}):(B.1B.1S(i,s.17,o),t.3M&&B.1K.2m(i),e&&e(s.17,o))},r.2Q=i,t.3M&&B.1K.1S(i,{1q:r,11:n});2Z;1D"1N":K h=4p(i).3u,d="4u"+(16.2H&&"4v:"==16.2H.4w?"s":"")+":",l=$.7C(d+"//1N.31/5c/7D.7E?1u="+d+"//1N.31/"+h+"&42=?",$.Y(J(s){K n={17:{L:s.L,M:s.M}};B.1B.1S(i,n.17,o),t.3M&&B.1K.2m(i),e&&e(n.17,o)},I));t.3M&&B.1K.1S(i,{5i:l,11:n})}}};B.6d=J(){T I.1z.2u(I,2C.2b(1J))},$.1b(B.6d.2V,{1z:J(){I.1B=[]},1I:J(i){1Z(K t=1A,e=0;I.1B.1t>e;e++)I.1B[e]&&I.1B[e].1u==i&&(t=I.1B[e]);T t},1S:J(i,t,e){I.25(i),I.1B.2s({1u:i,17:t,1j:e})},25:J(i){1Z(K t=0;I.1B.1t>t;t++)I.1B[t]&&I.1B[t].1u==i&&43 I.1B[t]},ab:J(i){K t=1I(i.1u);t?$.1b(t,i):I.1B.2s(i)}}),B.1B=2j B.6d,B.3W=J(){T I.1z.2u(I,2C.2b(1J))},$.1b(B.3W.2V,{1z:J(){I.1B=[]},1S:J(i,t){I.2m(i),I.1B.2s({1u:i,1j:t})},1I:J(i){1Z(K t=1A,e=0;I.1B.1t>e;e++)I.1B[e]&&I.1B[e].1u==i&&(t=I.1B[e]);T t},2m:J(i){1Z(K t=I.1B,e=0;t.1t>e;e++)U(t[e]&&t[e].1u==i&&t[e].1j){K s=t[e].1j;2D(s.11){1D"1q":s.1q&&s.1q.3I&&(s.1q.3I=J(){});2Z;1D"1N":s.5i&&(s.5i.ac(),s.5i=1A)}43 t[e]}}}),B.1K=2j B.3W,B.3K=J(i,t,e){U("J"==$.11(t)&&(e=t,t={}),t=$.1b({2Y:!0,6e:!1},t||{}),!t.6e||!B.3t.1I(i)){K s;U((s=B.3t.1I(i))&&s.17)T"J"==$.11(e)&&e($.1b({},s.17),s.1j),2v 0;K n={1u:i,1j:{11:"1q"}},o=2j 5S;n.1j.1q=o,o.3I=J(){o.3I=J(){},n.17={L:o.L,M:o.M},t.2Y?5R(o,J(i,t){$.1b(n.1j,{2Y:i,4t:t}),"J"==$.11(e)&&e(n.17,n.1j)}):"J"==$.11(e)&&e(n.17,n.1j)},B.3t.1B.1X(n),o.2Q=i}},B.3t={1I:J(i){T B.3t.1B.1I(i)},7F:J(i){K t=I.1I(i);T t&&t.17}},B.3t.1B=J(){J i(i){1Z(K t=1A,s=0,n=e.1t;n>s;s++)e[s]&&e[s].1u&&e[s].1u==i&&(t=e[s]);T t}J t(i){e.2s(i)}K e=[];T{1I:i,1X:t}}();K C=J(){J i(i,s,n){i=i||{},n=n||{},i.3N=i.3N||(j.3J[D.44]?D.44:"23"),q.1k&&7>q.1k&&(i.3N="7n");K o=i.3N?$.1b({},j.3J[i.3N]||j.3J[D.44]):{},a=3m(e,o);s&&a.5d[s]&&(a=3m(a.5d[s],a),43 a.5d);K r=3m(a,i);U((1G.24||"1R"==r.W)&&(r.W="1W"),r.2e||(r.3b?"5j"==$.11(r.3b)?r.2e="2k":$.11("46"==r.3b)&&(r.2e="x"==r.3b?"M":"y"==r.3b?"L":"2S"==r.3b?"2k":"2S"):r.2e="2S"),r.2e?"5j"==$.11(r.2e)&&(r.2e="2S"):r.2e="2k",1G.24&&(r.2e="2S"),r.2T&&(r.2T="46"==$.11(r.2T)?3m(a.2T||e.2T||t.2T,{11:r.2T}):3m(t.2T,r.2T)),!r.1v||1G.24&&!r.59?(r.1v={},$.1h(t.1v,J(i,t){$.1h(r.1v[i]=$.1b({},t),J(t){r.1v[i][t]=0})})):1G.24&&r.59&&(r.1v=3m(r.1v,r.59)),q.1k&&9>q.1k&&56(r.1v,{1r:{1i:0,1f:0},14:{3o:0},16:{1i:0,1f:0},W:{1i:0,1f:0}}),(1G.24||q.1k&&7>q.1k)&&(r.14=!1),r.5a&&"1q"!=s&&$.1b(r.5a,{1n:!1,2x:!1}),!r.1o&&"5j"!=$.11(r.1o)){K h=!1;2D(s){1D"22":K d="4u"+(16.2H&&"4v:"==16.2H.4w?"s":"")+":";h=d+"//5k.22.31/6f/"+n.3u+"/0.7G";2Z;1D"1q":1D"1N":h=!0}r.1o=h}T r}K t=j.3J.7f,e=3m(t,j.3J.7m);T{7H:i}}();$.1b(3W.2V,{1z:J(i){I.3O=i,I.Q=$.1b({14:F,2f:"N-1K"},1J[1]||{}),I.Q.14&&(I.14=I.Q.14),I.2A(),I.3v()},2A:J(){U($(2c.4r).X(I.13=$("<12>").R(I.Q.2f).1f().X(I.4x=$("<12>").R(I.Q.2f+"-4x").X($("<12>").R(I.Q.2f+"-32")).X($("<12>").R(I.Q.2f+"-33")))),q.1k&&7>q.1k){K i=I.13[0].41;i.1s="6g",i.47("1p","((!!16.2a ? 2a(16).4y() + (.5 * 2a(16).M()) : 0) + \'1e\')"),i.47("1n","((!!16.2a ? 2a(16).5l() + (.5 * 2a(16).L()): 0) + \'1e\')")}},48:J(i){I.13[0].2f=I.Q.2f+" "+I.Q.2f+"-"+i},3v:J(){I.13.1O("2g",$.Y(J(){I.3O.1f()},I))},7I:J(i){I.6h();K t=V.19&&V.19[V.1c-1];I.13.1L(1,0).3P(t?t.P.Q.1v.1K.1i:0,1,i)},1L:J(i,t){K e=V.19&&V.19[V.1c-1];I.13.1L(1,0).2F(t?0:e?e.P.Q.1v.1K.ad:0).4z(e.P.Q.1v.1K.1f,i)},6h:J(){K i=0,t="21"==I.14.1w.34;U(I.14){I.14.35();K i=I.14.1w.14[t?"M":"L"]}I.4x.15(1e({"1g-1p":I.3O.P.Q.14?t?i*-.5:0:0,"1g-1n":I.3O.P.Q.14?t?0:.5*i:0}))}}),$.1b(5V.2V,{1z:J(i){I.Q=$.1b({2f:"N-1M"},1J[1]||{}),I.3O=i,I.2A(),q.1k&&9>q.1k&&$(16).1O("1Y",$.Y(J(){I.13&&I.13.2I(":1P")&&I.1x()},I)),I.6i()},2A:J(){U(I.13=$("<12>").R(I.Q.2f).X(I.32=$("<12>").R(I.Q.2f+"-32")),1G.24&&I.13.R(I.Q.2f+"-7J-1R-1Q"),I.7K=I.13.2w("6j"),$(2c.4r).3Q(I.13),q.1k&&7>q.1k){I.13.15({1s:"6g"});K i=I.13[0].41;i.47("1p","((!!16.2a ? 2a(16).4y() : 0) + \'1e\')"),i.47("1n","((!!16.2a ? 2a(16).5l() : 0) + \'1e\')")}I.13.1f(),I.13.1O("2g",$.Y(J(){K i=I.3O.P;U(i){K t=i.Q;U(t.1M&&!t.1M.2q)T}I.3O.1f()},I)),I.13.1O("23:5h",J(i){i.2W()})},48:J(i){I.13[0].2f=I.7K+" "+I.Q.2f+"-"+i},ae:J(i){I.Q=i,I.6i()},6i:J(){I.1x()},1i:J(i){I.1x(),I.13.1L(1,0);K t=V.19&&V.19[V.1c-1];T I.49(1,t?t.P.Q.1v.16.1i:0,i),I},1f:J(i){K t=V.19&&V.19[V.1c-1];T I.13.1L(1,0).4z(t?t.P.Q.1v.16.1f||0:0,"7L",i),I},49:J(i,t,e){I.13.3P(t||0,i,"7L",e)},6k:J(){K i={};T $.1h(["L","M"],J(t,e){K s=e.54(0,1).7z()+e.54(1),n=2c.40;i[e]=(q.1k?1a.1x(n["4x"+s],n["6l"+s]):q.3Z?2c.4r["6l"+s]:n["6l"+s])||0}),i},1x:J(){K i;q.4q&&q.3Z&&7M.18>q.3Z&&(i=I.6k(),I.13.15(1e(i))),q.1k&&9>q.1k&&I.13.15(1e({M:$(16).M(),L:$(16).L()})),1G.24&&!i&&I.13.15(1e({M:I.6k().M}))}}),$.1b(5W.2V,{1z:J(){I.2t={},I.5m=0},1S:J(i,t,e){U("46"==$.11(i)&&I.2m(i),"J"==$.11(i)){1Z(e=t,t=i;I.2t["7N"+I.5m];)I.5m++;i="7N"+I.5m}I.2t[i]=16.4A($.Y(J(){t&&t(),I.2t[i]=1A,43 I.2t[i]},I),e)},1I:J(i){T I.2t[i]},2m:J(i){i||($.1h(I.2t,$.Y(J(i,t){16.4B(t),I.2t[i]=1A,43 I.2t[i]},I)),I.2t={}),I.2t[i]&&(16.4B(I.2t[i]),I.2t[i]=1A,43 I.2t[i])}}),$.1b(5X.2V,{1z:J(){I.6m={}},1S:J(i,t){I.6m[i]=t},1I:J(i){T I.6m[i]||!1}});K D={44:"23",1z:J(){I.3w=[],I.3w.6n=$({}),I.3w.7O=$({}),I.2E=2j 5X,I.3x=2j 5W,I.2A(),I.3v(),I.48(I.44)},2A:J(){U(I.1M=2j 5V(I),$(2c.4r).3Q(I.13=$("<12>").R("N-16").X(I.3e=$("<12>").R("N-3e").1f().X(I.2n=$("<12>").R("N-2n").X(I.3n=$("<12>").R("N-2n-3n"))).X(I.14=$("<12>").R("N-14")))),I.1K=2j 3W(I),q.1k&&7>q.1k){K i=I.13[0].41;i.1s="6g",i.47("1p","((!!16.2a ? 2a(16).4y() : 0) + \'1e\')"),i.47("1n","((!!16.2a ? 2a(16).5l() : 0) + \'1e\')")}U(q.1k){9>q.1k&&I.13.R("N-af");1Z(K t=6;9>=t;t++)t>q.1k&&I.13.R("N-ag"+t)}1G.1R&&I.13.R("N-1R-1Q"),1G.24&&I.13.R("N-7J-1R-1Q"),I.13.1j("6j-7P",I.13[0].2f),F.1z(I.13),V.1z(I.13),E.1z(),I.13.1f()},48:J(i,t){t=t||{},i&&(t.3N=i),I.1M.48(i);K e=I.13.1j("6j-7P");T I.13[0].2f=e+" N-16-"+i,I},6o:J(i){j.3J[i]&&(I.44=i)},3v:J(){$(2c.40).3f(".23[4C]","2g",J(i,t){U(!G.3y){i.3d(),i.2W();K t=i.ah;V.3z({x:i.4a,y:i.4b}),G.1i(t)}}),$(2c.40).1O("2g",J(i){V.3z({x:i.4a,y:i.4b})}),I.13.3f(".N-W-26, .N-1T-26","2g",$.Y(J(i){i.3d()},I)),$(2c.40).3f(".N-1M, .N-W, .N-1l, .N-3e","2g",$.Y(J(i){K t=D.P;U(!$(i.3c).3R(".N-1F")[0]){U(t){K e=t.Q;U(e.1M&&!e.1M.2q)T}i.2W(),i.3d(),D.1f()}},I)),I.13.1O("23:5h",J(i){i.2W()})},2p:J(i,t){K e=$.1b({},1J[2]||{});I.4c(),I.2h=!0;K s=2>i.1t;U($.1h(i,J(i,t){T t.Q.1o?2v 0:(s=!0,!1)}),s&&$.1h(i,J(i,t){t.Q.1o=!1,t.Q.14=!1}),2>i.1t){K n=i[0].Q.3Y;n&&"2q"!=n&&(i[0].Q.3Y="2q")}I.4d=i,F.2p(i),V.2p(i),E.1Q={5b:!0},t&&I.38(t,$.Y(J(){I.2h&&(I.2h=!1,e.42&&e.42())},I))},7Q:J(){U(!I.2E.1I("4D")){K i=$("5n, 6p, ai"),t=[];i.1h(J(i,e){K s;$(e).2I("6p, 5n")&&(s=$(e).2B(\'6q[aj="7R"]\')[0])&&s.7S&&"7T"==s.7S.60()||$(e).2I("[7R=\'7T\']")||t.2s({13:e,3g:$(e).15("3g")})}),$.1h(t,J(i,t){$(t.13).15({3g:"ak"})}),I.2E.1S("4D",t)}},7U:J(){K i=I.2E.1I("4D");i&&i.1t>0&&$.1h(i,J(i,t){$(t.13).15({3g:t.3g})}),I.2E.1S("4D",1A)},al:J(){K i=I.2E.1I("4D");i&&$.1h(i,$.Y(J(i,t){K e;(e=$(t.13).3R(".am-1r")[0])&&e==I.1r[0]&&$(t.13).15({3g:t.3g})},I))},1i:J(){K i=J(){};T J(t){K e=V.19&&V.19[V.1c-1],s=I.3w.6n,n=e&&e.P.Q.1v.16.1f||0;U(I.2E.1I("1P"))T"J"==$.11(t)&&t(),2v 0;I.2E.1S("1P",!0),s.3A([]),I.7Q(),e&&"J"==$.11(e.P.Q.7V)&&e.P.Q.7V.2b(j);K o=2;s.3A($.Y(J(i){e.P.Q.1M&&I.1M.1i($.Y(J(){1>--o&&i()},I)),I.3x.1S("1i-16",$.Y(J(){I.7W(J(){1>--o&&i()})},I),n>1?1a.1V(.5*n,50):1)},I)),i(),s.3A($.Y(J(i){E.4E(),i()},I)),s.3A($.Y(J(i){F.7X(),i()},I)),"J"==$.11(t)&&s.3A($.Y(J(i){t(),i()}),I)}}(),7W:J(i){V.1Y(),1G.24&&(I.6r={1p:I.13.15("1p")},D.13.15({1p:$(16).4y()})),I.13.1i(),I.3e.1L(!0);K t=V.19&&V.19[V.1c-1];T I.49(1,t.P.Q.1v.16.1i,$.Y(J(){i&&i()},I)),I},1f:J(){K i=V.19&&V.19[V.1c-1],t=I.3w.6n;t.3A([]),I.6s(),I.1K.1L(1A,!0);K e=1;t.3A($.Y(J(t){K s=i.P.Q.1v.16.1f||0;I.3e.1L(!0,!0).4z(s,"6t",$.Y(J(){I.13.1f(),V.7Y(),1>--e&&(I.6u(),t())},I)),i.P.Q.1M&&(e++,I.3x.1S("1f-1M",$.Y(J(){I.1M.1f($.Y(J(){1>--e&&(I.6u(),t())},I))},I),s>1?1a.1V(.5*s,an):1))},I))},6u:J(){I.2E.1S("1P",!1),I.7U(),E.4e(),F.6v();K i=V.19&&V.19[V.1c-1];i&&"J"==$.11(i.P.Q.7Z)&&i.P.Q.7Z.2b(j),I.3x.2m(),I.4c()},4c:J(){K i=$.1b({6w:!1,5o:!1},1J[0]||{});"J"==$.11(i.5o)&&i.5o.2b(j),I.6s(),I.3x.2m(),I.1s=-1,I.4d=1A,F.2m(),1G.24&&I.6r&&I.13.15(I.6r),I.2h=!1,D.2E.1S("4F",!1),I.4F&&($(I.4F).1L().25(),I.4F=1A),I.6x&&($(I.6x).1L().25(),I.6x=1A),"J"==$.11(i.6w)&&i.6w.2b(j)},49:J(i,t,e){I.3e.1L(!0,!0).3P(t||0,i||1,"6y",e)},6s:J(){I.3w.7O.3A([]),I.3e.1L(!0)},38:J(i,t){i&&I.1s!=i&&(I.3x.2m("4F"),I.1c,I.1s=i,I.P=I.4d[i-1],I.48(I.P.Q&&I.P.Q.3N,I.P.Q),V.38(i,t))}};"5p"==$.11(q.3p)&&3>q.3p&&$.1h(D,J(i,t){"J"==$.11(t)&&(D[i]=J(){T I})});K E={1Q:!1,4G:{1n:37,2x:39,5b:27},4E:J(){I.6z()},4e:J(){I.1Q=!1},1z:J(){I.6z(),$(2c).ao($.Y(I.80,I)).ap($.Y(I.81,I)),E.4e()},6z:J(){K i=V.19&&V.19[V.1c-1];I.1Q=i&&i.P.Q.5a},80:J(i){U(I.1Q&&D.13.2I(":1P")){K t=I.6A(i.4G);U(t&&(!t||!I.1Q||I.1Q[t]))2D(i.2W(),i.3d(),t){1D"1n":V.1H();2Z;1D"2x":V.1C()}}},81:J(i){U(I.1Q&&D.4d){K t=I.6A(i.4G);U(t&&(!t||!I.1Q||I.1Q[t]))2D(t){1D"5b":D.1f()}}},6A:J(i){1Z(K t 4m I.4G)U(I.4G[t]==i)T t;T 1A}},V={1z:J(i){i&&(I.13=i,I.1c=-1,I.3h=[],I.2J=0,I.2K=[],I.82=[],I.3w=[],I.3w.28=$({}),I.2n=I.13.2B(".N-2n:3S"),I.3n=I.13.2B(".N-2n-3n:3S"),I.83=I.13.2B(".N-83:3S"),I.6B(5M()),I.5q(),I.3v())},6B:J(){K i={4n:"4Z",4Z:"4n"};T J(t){I.2n.R("N-2n-"+t).2L("N-2n-"+i[t])}}(),3v:J(){$(16).1O("1Y",$.Y(J(){D.2E.1I("1P")&&I.1Y()},I)),$(16).1O("aq",$.Y(J(){I.6B(5M()),D.2E.1I("1P")&&I.1Y()},I)),I.2n.3f(".N-1d","2g",$.Y(J(i){i.3d(),I.3z({x:i.4a,y:i.4b});K t=$(i.3c).3R(".N-1d").1j("1d");I[t]()},I))},2p:J(i){I.19&&($.1h(I.19,J(i,t){t.25()}),I.19=1A,I.ar=!1,I.2K=[],I.82=[]),I.2J=0,I.3n.84("41"),I.19=[];K t=!1;$.1h(i,$.Y(J(i,e){I.19.2s(2j 5Y(e,i+1)),!t&&e.1m&&(t=!0)},I)),I.as=!t,I.5q()},85:J(i){q.1k&&9>q.1k?(I.3z({x:i.4a,y:i.4b}),I.1s()):I.5r=4A($.Y(J(){I.3z({x:i.4a,y:i.4b}),I.1s()},I),30)},86:J(){I.5r&&(4B(I.5r),I.5r=1A)},87:J(){1G.24||I.4H||I.13.1O("6C",I.4H=$.Y(I.85,I))},88:J(){!1G.24&&I.4H&&(I.13.at("6C",I.4H),I.4H=1A,I.86())},38:J(i,t){I.89(),I.1c=i;K e=I.19[i-1];e.P.Q.W;K s=1;I.3n.X(e.1l),I.2n.2B(".N-1l").2L("N-1l-3T"),e.1l.R("N-1l-3T"),F.38(i),e.2p($.Y(J(){!e||e&&!e.P||I.1i(i,J(){e&&e.P&&(t&&t(),"J"==$.11(e.P.Q.8a)&&1>--s&&e.P.Q.8a.2b(j,i))})},I)),I.8b()},8b:J(){U(I.19&&I.19.1t>1){K i=I.4I(),t=i.1H,e=i.1C,s={1H:t!=I.1c&&I.19[t-1],1C:e!=I.1c&&I.19[e-1]};1==I.1c&&(s.1H=1A),I.1c==I.19.1t&&(s.1C=1A),$.1h(s,$.Y(J(i,t){K e=t&&t.P;e&&"1q"==e.11&&e.Q.3K&&B.3K(e.1u,{6e:!0})},I))}},4I:J(){U(!I.19)T{};K i=I.1c,t=I.19.1t,e=1>=i?t:i-1,s=i>=t?1:i+1;T{1H:e,1C:s}},8c:J(){K i=V.19&&V.19[V.1c-1];T i&&i.P.Q.2R&&I.19&&I.19.1t>1||1!=I.1c},1H:J(i){K t=I.8c();(i||t)&&D.38(I.4I().1H)},8d:J(){K i=V.19&&V.19[V.1c-1];T i&&i.P.Q.2R&&I.19&&I.19.1t>1||I.19&&I.19.1t>1&&1!=I.4I().1C},1C:J(i){K t=I.8d();(i||t)&&D.38(I.4I().1C)},8e:J(i){I.8f(i)||I.3h.2s(i)},8g:J(i){I.3h=$.8h(I.3h,J(t){T t!=i})},8f:J(i){T $.8i(i,I.3h)>-1},3z:J(i){i.y-=$(16).4y(),i.x-=$(16).5l(),F.1P()&&"2y"==F.1w.34&&(i.x-=F.1w.14.L);K t={y:1a.1V(1a.1x(i.y/I.1E.M,0),1),x:1a.1V(1a.1x(i.x/I.1E.L,0),1)},e=20,s={x:"L",y:"M"},n={};$.1h("x y".3H(" "),$.Y(J(i,o){n[o]=1a.1V(1a.1x(e/I.1E[s[o]],0),1),t[o]*=1+2*n[o],t[o]-=n[o],t[o]=1a.1V(1a.1x(t[o],0),1)},I)),I.8j(t)},8j:J(i){I.6D=i},1s:J(){1>I.2K.1t||$.1h(I.2K,J(i,t){t.1s()})},1Y:J(){q.1k&&7>q.1k||F.1Y(),I.5q(),I.2n.15(1e(I.1E)),$.1h(I.19,J(i,t){t.1Y()}),1G.24&&(I.2n.15({L:"78%"}),D.1M.1x())},5q:J(){K i=A.3a(),t=I.19&&I.19[0].P.Q.W;U(F.1P()){F.35();K e="21"==F.1w.34,s=e?"M":"L",n=F.1w.14[s],o={1n:e?0:n};i[s]-=n,I.2n.15(1e(o))}2r I.2n.84("41");K a=$.1b({},i);2D(I.2J=0,t){1D"1W":$.1h(I.19,$.Y(J(i,t){D.13.1i();K e=!1;t.4J(J(){e=t.2q.2I(":1P")}),4f=t.2q,I.19.1t>1&&(t.6E&&(4f=4f.1X(t.6E)),t.4g&&(4f=4f.1X(t.4g)));K s=0;t.4J(J(){$.1h(4f,J(i,t){s=1a.1x(s,$(t).au(!0))})}),I.2J=1a.1x(I.2J,s)||0},I)),a.L-=2*(I.2J||0)}I.1E=i,I.2z=a,I.av=1p},aw:J(){T{1H:I.1c-1>0,1C:I.1c+1<=I.19.1t}},1i:J(i,t){K e=[];$.1h(I.19,J(t,s){s.1c!=i&&e.2s(s)});K s=e.1t+1,n=I.19[I.1c-1];F[n.P.Q.14?"1i":"1f"](),I.1Y();K o=n.P.Q.1v.1r.58;$.1h(e,$.Y(J(e,n){n.1f($.Y(J(){o?t&&1>=s--&&t():2>=s--&&I.19[i-1].1i(t)},I))},I)),o&&I.19[i-1].1i(J(){t&&1>=s--&&t()})},7Y:J(){$.1h(I.3h,$.Y(J(i,t){K e=I.19[t-1];e.5s(),e.1f()},I)),F.1f(),I.3z({x:0,y:0})},ax:J(i){$.1h(I.19,$.Y(J(t,e){e.1s!=i&&e.1f()},I))},8k:J(i){I.8l(i)||(I.2K.2s(I.19[i-1]),1==I.2K.1t&&I.87())},ay:J(){I.2K=[]},6F:J(i){I.2K=$.8h(I.2K,J(t){T t.1c!=i}),1>I.2K.1t&&I.88()},8l:J(i){K t=!1;T $.1h(I.2K,J(e,s){T s.1c==i?(t=!0,!1):2v 0}),t},2G:J(){K i=I.1E;T D.az&&(i.L-=aA),i},89:J(){$.1h(I.19,$.Y(J(i,t){t.6G()},I))}};$.1b(5Y.2V,{1z:J(i,t){I.P=i,I.1c=t,I.1E={},I.2A()},25:J(){I.5t(),I.4K&&(V.6F(I.1c),I.4K=!1),I.5s(),I.4c(),I.1l.25(),I.1l=1A,I.W&&(I.W.25(),I.W=1A),I.P=1A,I.1E={},I.6G()},2A:J(){K i=I.P.Q.W,t=D.4d.1t;V.3n.X(I.1l=$("<12>").R("N-1l").X(I.1T=$("<12>").R("N-1T").R("N-1T-2M-W-"+i).R("N-1T-2M-11-"+I.P.11))),I.1T.X(I.4h=$("<12>").R("N-1T-26").X(I.6H=$("<12>").R("N-1T-3i").X(I.5u=$("<12>").R("N-1T-8m-3s").X(I.3j=$("<12>").R("N-1T-1y"))))),"1q"==I.P.11&&"1R"!=i&&(I.3k=$("<12>").R("N-6I-1q")),I.1l.1i();K e=I.P.Q.3Y;U("1q"==I.P.11&&("1C"==e&&(I.P.Q.2R||!I.P.Q.2R&&I.1c!=D.4d.1t)||"2q"==e)&&I.1l.R("N-1l-2N-"+e.60()),"1W"==i?I.1l.3Q(I.W=$("<12>").R("N-W N-W-1W")):I.1l.X(I.W=$("<12>").R("N-W N-W-2O")),I.4h.1O("2g",$.Y(J(i){i.3c==I.4h[0]&&I.P.Q.1M&&I.P.Q.1M.2q&&D.1f()},I)),"1W"==I.P.Q.W?I.W.X(I.29=$("<12>").R("N-W-1y-1W")):(I.W.X(I.6J=$("<12>").R("N-W-26").X(I.5v=$("<12>").R("N-W-3i").X(I.6K=$("<12>").R("N-W-8m-3s").X(I.8n=$("<12>").R("N-W-aB").X(I.29=$("<12>").R("N-W-1y")))))),I.3k&&I.29.X(I.3k.5w())),t>1&&(I.29.X(I.4L=$("<12>").R("N-1d N-1d-1C").X(I.4g=$("<12>").R("N-1d-2o").X($("<12>").R("N-1d-2o-33"))).1j("1d","1C")),I.1c!=t||I.P.Q.2R||(I.4L.R("N-1d-4M"),I.4g.R("N-1d-2o-4M")),I.29.X(I.4N=$("<12>").R("N-1d N-1d-1H").X(I.5x=$("<12>").R("N-1d-2o").X($("<12>").R("N-1d-2o-33"))).1j("1d","1H")),1!=I.1c||I.P.Q.2R||(I.4N.R("N-1d-4M"),I.5x.R("N-1d-2o-4M"))),I.3k&&"2O"==I.P.Q.W&&I.29.2B(".N-1d").3Q(I.3k.5w()),I.1l.R("N-2P-1m"),(I.P.1m||"2O"==I.P.Q.W&&!I.P.1m)&&I["2O"==I.P.Q.W?"29":"1l"].X(I.1F=$("<12>").R("N-1F N-1F-"+I.P.Q.W).X(I.aC=$("<12>").R("N-1F-32")).X(I.6L=$("<12>").R("N-1F-3i"))),I.P.1m&&(I.1l.2L("N-2P-1m").R("N-2M-1m"),I.6L.X(I.1m=$("<12>").R("N-1m").6M(I.P.1m))),t>1&&I.P.Q.1s){K s=I.1c+" / "+t;I.1l.R("N-2M-1s");K i=I.P.Q.W;I["2O"==i?"6L":"29"]["2O"==i?"3Q":"X"](I.6E=$("<12>").R("N-1s").X($("<12>").R("N-1s-32")).X($("<6N>").R("N-1s-aD").6M(s)))}I.29.X(I.2q=$("<12>").R("N-2q").1O("2g",J(){D.1f()}).X($("<6N>").R("N-2q-32")).X($("<6N>").R("N-2q-33"))),"1q"==I.P.11&&"2q"==I.P.Q.3Y&&I["1W"==I.P.Q.W?"3j":"5v"].1O("2g",J(i){$(i.3c).3R(".N-1F")[0]||(i.2W(),i.3d(),D.1f())}),I.1l.1f()},6O:J(i){U(!I.P.1m)T 0;"1W"==I.P.Q.W&&(i=1a.1V(i,V.2z.L));K t,e=I.1F.15("L");T I.1F.15({L:i+"1e"}),t=65(I.1F.15("M")),I.1F.15({L:e}),t},4J:J(i,t){K e=[],s=D.13.1X(D.3e).1X(I.1l).1X(I.W);t&&(s=s.1X(t)),$.1h(s,J(i,t){e.2s({1P:$(t).2I(":1P"),13:$(t).1i()})}),i(),$.1h(e,J(i,t){t.1P||t.13.1f()})},3U:J(){I.35();K i=I.1E.1x,t=I.P.Q.W,e=I.6P,s=I.8o,n=I.5y,o=3q.3r(i,{2e:e,W:t,3s:n}),a=$.1b({},o);U(n&&(a=3q.3r(a,{2G:o,W:t}),o.L+=2*n,o.M+=2*n),s.21||s.2y){K r=$.1b({},V.2z);n&&(r.L-=2*n,r.M-=2*n),r={L:1a.1x(r.L-2*s.21,0),M:1a.1x(r.M-2*s.2y,0)},a=3q.3r(a,{2e:e,2G:r,W:t})}K h={1m:!0},d=!1;U("1W"==t){K s={M:o.M-a.M,L:o.L-a.L},l=$.1b({},a);I.1m&&I.1l.4O("N-2P-1m");K u;U(I.1m){u=I.1m,I.1F.2L("N-2P-1m");K p=I.1l.4O("N-2P-1m");I.1l.2L("N-2P-1m");K c=I.1l.4O("N-2M-1m");I.1l.R("N-2M-1m")}D.13.15({3g:"1P"}),I.4J($.Y(J(){1Z(K i=0,o=2;o>i;){h.M=I.6O(a.L);K r=.5*(V.2z.M-2*n-(s.2y?2*s.2y:0)-a.M);h.M>r&&(a=3q.3r(a,{2G:$.1b({},{L:a.L,M:1a.1x(a.M-h.M,0)}),2e:e,W:t})),i++}h.M=I.6O(a.L);K d=A.3a();(5z>=d.M&&5A>=d.L||5z>=d.L&&5A>=d.M||h.M>=.5*a.M||h.M>=.6*a.L)&&(h.1m=!1,h.M=0,a=l)},I),u),D.13.15({3g:"1P"}),p&&I.1l.R("N-2P-1m"),c&&I.1l.R("N-2M-1m");K m={M:o.M-a.M,L:o.L-a.L};o.M+=s.M-m.M,o.L+=s.L-m.L,a.M!=l.M&&(d=!0)}2r h.M=0;K f={L:a.L+2*n,M:a.M+2*n};h.M&&(o.M+=h.M),"2O"==t&&(h.M=0);K v={26:{17:o},3i:{17:f},1y:{17:a,2G:f,1g:{1p:.5*(o.M-f.M)-.5*h.M,1n:.5*(o.L-f.L)}},1r:{17:a},1F:h};"1W"==t&&(v.1F.1p=v.1y.1g.1p,h.L=1a.1V(a.L,V.2z.L));K r=$.1b({},V.2z);T"1W"==t&&(v.1T={17:{L:V.2z.L},1s:{1n:.5*(V.1E.L-V.2z.L)}}),v.W={26:{17:{L:1a.1V(o.L,r.L),M:1a.1V(o.M,r.M)}},3i:{17:f},1y:{17:{L:1a.1V(v.1y.17.L,r.L-2*n),M:1a.1V(v.1y.17.M,r.M-2*n)},1g:{1p:v.1y.1g.1p+n,1n:v.1y.1g.1n+n}}},v},35:J(){K i=$.1b({},I.1E.1x),t=3B(I.5u.15("3s-1p-L"));I.5y=t,t&&(i.L-=2*t,i.M-=2*t);K e=I.P.Q.2e;"aE"==e?e=i.L>i.M?"M":i.M>i.L?"L":"2k":e||(e="2k"),I.6P=e;K s={2k:"2S",L:"y",M:"x",2S:"2k"},n=I.P.Q.7h[s[I.6P]];I.8o=n},6Q:J(){I.4P&&(4B(I.4P),I.4P=1A)},6G:J(){I.4P&&I.2h&&!I.3C&&(I.6Q(),I.2h=!1)},2p:J(i,t){T I.3C||I.2h?(I.3C&&I.5B(i),2v 0):(t||B.1B.1I(I.P.1u)||B.3t.7F(I.P.1u)||D.1K.7I(),I.2h=!0,I.4P=4A($.Y(J(){2D(I.6Q(),I.P.11){1D"1q":K e=I.P.Q.W;B.1I(I.P.1u,{2Y:"1R"!=e},$.Y(J(s,n){U(I.P){I.1E.8p=s,I.1E.1x=s,I.3C=!0,I.2h=!1,I.35();K o=I.3U();I.1E.26=o.26.17,I.1E.1r=o.1r.17,I.1r=$("<5k>").2w({2Q:I.P.1u}).R("N-1r N-1r-1q"),I.3j.X(I.1r),"1R"==e&&I.1r.1O("8q",J(i){i.2W()});K a;I.3j.X(a=$("<12>").R("N-1r-1q-1M")),I.3k&&a.X(I.3k.5w());K r;U("1W"==I.P.Q.W&&((r=I.P.Q.3Y)&&"1C"==r||"1H-1C"==r)){K h=I.P.Q.2R;(I.1c!=V.19.1t||h)&&I.3j.X($("<12>").R("N-2N-1d N-2N-1C").1j("1d","1C")),"1H-1C"!=r||1==I.1c&&!h||I.3j.X($("<12>").R("N-2N-1d N-2N-1H").1j("1d","1H")),I.3k&&I.3j.2B(".N-2N-1d").1h($.Y(J(i,t){K e=$(t).1j("1d");$(t).3Q(I.3k.5w().1j("1d",e))},I)),I.1l.3f(".N-2N-1d","2g",J(i){K t=$(i.3c).3R(".N-2N-1d").1j("1d");V[t]()}),I.1l.3f(".N-2N-1d","8r",$.Y(J(i){K t=$(i.3c).3R(".N-2N-1d").1j("1d"),e=t&&I["2l"+t+"5C"];e&&I["2l"+t+"5C"].R("N-1d-2o-3T")},I)).3f(".N-2N-1d","8s",$.Y(J(i){K t=$(i.3c).1j("1d"),e=t&&I["2l"+t+"5C"];e&&I["2l"+t+"5C"].2L("N-1d-2o-3T")},I))}I.1l.2B(".N-6I-1q").1h($.Y(J(i,t){K e=$("<5k>").R("N-6I-1q").2w({2Q:I.P.1u}).15({aF:0}),s=$(t).1j("1d");U(q.1k&&9>q.1k){K o=3B(D.13.15("z-6R"))||0;e.15({"z-6R":o}),$(t).aG().15({"z-6R":o}),/^(x|2S)$/.53(I.P.Q.3b||"")&&e.1f()}n.2Y&&!1G.24&&e.1X(I.1r).1O("8q",$.Y(J(i){U("1R"==I.P.Q.W)T i.2W(),2v 0;K t=i.4s,e=t.aH||{};U(n.2Y&&e.8t){K s=t.4a||0,o=t.4b||0,a=I.1r.4x();s=1a.2X(s-a.1n),o=1a.2X(o-a.1p),1>n.4t&&(s*=n.4t,o*=n.4t),e.8t(n.2Y,s,o)}2r e.8u?e.8u(I.1r[0]):i.2W()},I)),s&&e.1j("1d",s),$(t).aI(e)},I)),I.5B(i,t)}},I));2Z;1D"22":K s={L:I.P.Q.L,M:I.P.Q.M};I.P.Q.22&&I.P.Q.22.7i&&(I.P.3D.aJ=s.L>7l?"7j":"aK"),I.6S(s,i);2Z;1D"1N":K s={L:I.P.Q.L,M:I.P.Q.M};B.1I(I.P.1u,$.Y(J(t){U(I.P){K e=s.L,n=s.M,o=t.L,a=t.M,r=!1;(r=e&&!n||n&&!e)||e&&n?(r&&(e&&!n?s.M=e*a/o:s.L=n*o/a),s=3q.3r(t,{2G:s})):s=t,I.6S(s,i)}},I))}},I),10),2v 0)},6S:J(i,t){I.1E.8p=i,I.1E.1x=i,I.3C=!0,I.2h=!1,I.35();K e=I.3U();I.1E.26=e.26.17,I.1E.1r=e.1r.17,I.3j.X(I.1r=$("<12>").R("N-1r N-1r-"+I.P.11)),"1R"!=I.P.Q.W||"22"!=I.P.11&&"1N"!=I.P.11||(I.1Y(),("22"==I.P.11&&16.aL||"1N"==I.P.11&&1G.6b)&&I.1i()),I.5B(t)},5B:J(i){K t=I.P.Q.W;I.1Y(),"2O"==t&&I.6K.1O("8r",$.Y(I.4Q,I)).1O("8s",$.Y(I.5D,I)),I.W&&(1G.24?I.1T.1O("2g",$.Y(J(){I.29.2I(":1P")||I.4Q(),I.4R()},I)):I.W.3f(".N-W-3i","6C",$.Y(J(){I.29.2I(":1P")||I.4Q(),I.4R()},I)));K e;V.19&&(e=V.19[V.1c-1])&&(e.P.1u==I.P.1u||"1R"==e.P.Q.W)&&D.1K.1L(),i&&i()},1Y:J(){U(I.1r){K i=I.3U(),t=I.P.Q.W;I.1E.26=i.26.17,I.1E.1r=i.1r.17,I.4h.15(1e(i.26.17)),"2O"==t&&I.6J.15(1e(i.W.26.17)),I.3j.1X(I.5u).15(1e(i.1y.17));K e=0;2D("1W"==I.P.Q.W&&i.1F.1m&&(e=i.1F.M),I.5u.15({"5E-4S":e+"1e"}),I.6H.15(1e({L:i.3i.17.L,M:i.3i.17.M+e})),i.26.17.L>("1W"==I.P.Q.W?i.1T.17.L:A.3a().L)?I.1T.R("N-8v-8w"):I.1T.2L("N-8v-8w"),t){1D"1W":I.1m&&I.1F.15(1e({L:i.1F.L}));2Z;1D"2O":I.29.1X(I.6K).1X(I.8n).15(1e(i.W.1y.17)),I.5v.15(1e(i.W.3i.17));K s=0;U(I.1m){K n=I.1l.4O("N-2P-1m"),o=I.1l.4O("N-2M-1m");I.1l.2L("N-2P-1m"),I.1l.R("N-2M-1m");K s=0;I.4J($.Y(J(){s=I.1F.aM()},I),I.29.1X(I.1m));K a=A.3a();(s>=.45*i.1y.17.M||5z>=a.M&&5A>=a.L||5z>=a.L&&5A>=a.M)&&(i.1F.1m=!1),n&&I.1l.R("N-2P-1m"),o||I.1l.2L("N-2M-1m")}}U(I.1m){K r=i.1F.1m;I.1m[r?"1i":"1f"](),I.1l[(r?"25":"1X")+"5F"]("N-2P-1m"),I.1l[(r?"1X":"25")+"5F"]("N-2M-1m")}I.6H.1X(I.5v).15(1e(i.1y.1g));K h=V.2z,d=I.1E.26;U(I.5G={y:d.M-h.M,x:d.L-h.L},I.4K="2k"!=I.P.Q.3b&&(I.5G.x>0||I.5G.y>0),V[(I.4K?"1S":"25")+"aN"](I.1c),q.1k&&8>q.1k&&"1q"==I.P.11&&I.1r.15(1e(i.1y.17)),/^(1N|22)$/.53(I.P.11)){K l=i.1y.17;I.6T?I.6T.aO(l.L,l.M):I.3E&&I.3E.2w(l)}}I.1s()},1s:J(){U(I.1r){K i=V.6D,t=V.2z,e=I.1E.26,s={1p:0,1n:0},n=I.5G;s.1p=n.y>0?0-i.y*n.y:.5*t.M-.5*e.M,s.1n=n.x>0?0-i.x*n.x:.5*t.L-.5*e.L,1G.24&&(n.y>0&&(s.1p=0),n.x>0&&(s.1n=0),I.4h.15({1s:"aP"})),I.aQ=s,I.4h.15({1p:s.1p+"1e",1n:s.1n+"1e"});K o=$.1b({},s);0>o.1p&&(o.1p=0),0>o.1n&&(o.1n=0);K a=I.P.Q.W;2D(a){1D"1W":K r=I.3U();U(I.1T.15(1e(r.1T.17)).15(1e(r.1T.1s)),I.P.1m){K h=s.1p+r.1y.1g.1p+r.1y.17.M+I.5y;h>V.2z.M-r.1F.M&&(h=V.2z.M-r.1F.M);K d=V.2J+s.1n+r.1y.1g.1n+I.5y;V.2J>d&&(d=V.2J),d+r.1F.L>V.2J+r.1T.17.L&&(d=V.2J),I.1F.15({1p:h+"1e",1n:d+"1e"})}2Z;1D"2O":I.6J.15({1n:o.1n+"1e",1p:o.1p+"1e"})}}},aR:J(i){I.17=i},8x:J(){K i=(q.1k&&8>q.1k,I.3U()),t=i.1y.17,e=$.1b({},I.P.Q.22||{}),s="4u"+(16.2H&&"4v:"==16.2H.4w?"s":"")+":",n=$.6q(e);I.1r.X(I.3E=$("<8y 8z 8A 8B>").2w({2Q:s+"//aS.22.31/5n/"+I.P.3D.3u+"?"+n,M:t.M,L:t.L,8C:0}))},8D:J(){K i=I.3U(),t=i.1y.17,e=$.1b({},I.P.Q.1N||{});"1R"==I.P.Q.W&&(e.64=0);K s="4u"+(16.2H&&"4v:"==16.2H.4w?"s":"")+":",n=z()+"1N";e.aT=n,e.5c=1;K o=$.6q(e);I.1r.X(I.3E=$("<8y 8z 8A 8B>").2w({2Q:s+"//6T.1N.31/aU/"+I.P.3D.3u+"?"+o,3u:n,M:t.M,L:t.L,8C:0}))},8E:J(){2D(I.P.11){1D"22":I.8x();2Z;1D"1N":I.8D()}},1i:J(i){U("1R"==I.P.Q.W){U(I.8F)T i&&i(),2v 0;I.8F=!0}I.8E(),V.8e(I.1c),I.1l.1L(1,0),I.W&&(I.W.1L(1,0),I.4Q(1A,!0)),I.4K&&V.8k(I.1c),I.49(1,1a.1x(I.P.Q.1v.1r.1i,q.1k&&9>q.1k?0:10),$.Y(J(){i&&i()},I))},8G:J(){I.P&&I.1r&&"1R"!=I.P.Q.W&&I.5s()},5s:J(){I.aV=!1,I.3E&&(I.3E[0].2Q="//aW:aX",I.3E.25(),I.3E=1A),("22"==I.P.11||"1N"==I.P.11)&&I.1r&&I.1r.6M("")},4c:J(i){V.6F(I.1c),V.8g(I.1c),I.8G(i)},1f:J(i){U("1R"==I.P.Q.W)T i&&i(),2v 0;K t=1a.1x(I.P.Q.1v.1r.1f||0,q.1k&&9>q.1k?0:10),e=I.P.Q.1v.1r.58?"aY":"6y";I.1l.1L(1,0).4z(t,e,$.Y(J(){I.4c(),i&&i()},I))},49:J(i,t,e){K s=I.P.Q.1v.1r.58?"aZ":"6t";I.1l.1L(1,0).3P(t||0,i,s,e)},4Q:J(i,t){I.W&&(t?(I.29.1i(),I.4R(),"J"==$.11(i)&&i()):I.29.1L(1,0).3P(t?0:I.P.Q.1v.W.1i,1,"6t",$.Y(J(){I.4R(),"J"==$.11(i)&&i()},I)))},5D:J(i,t){I.W&&"1W"!=I.P.Q.W&&(t?(I.29.1f(),"J"==$.11(i)&&i()):I.29.1L(1,0).4z(t?0:I.P.Q.1v.W.1f,"6y",J(){"J"==$.11(i)&&i()}))},5t:J(){I.4T&&(4B(I.4T),I.4T=1A)},4R:J(){I.5t(),I.4T=4A($.Y(J(){I.5D()},I),I.P.Q.1v.W.2F)},b0:J(){I.5t(),I.4T=4A($.Y(J(){I.5D()},I),I.P.Q.1v.W.2F)}}),$.1b(3X.2V,{1z:J(a){K b=1J[1]||{},d={};U("46"==$.11(a))a={1u:a};2r U(a&&1==a.7t){K c=$(a);a={13:c[0],1u:c.2w("4C"),1m:c.1j("23-1m"),4i:c.1j("23-4i"),4U:c.1j("23-4U"),11:c.1j("23-11"),Q:c.1j("23-Q")&&6U("({"+c.1j("23-Q")+"})")||{}}}U(a&&(a.4U||(a.4U=57(a.1u)),!a.11)){K d=4p(a.1u);a.3D=d,a.11=d.11}T a.3D||(a.3D=4p(a.1u)),a.Q=a&&a.Q?$.1b(!0,$.1b({},b),$.1b({},a.Q)):$.1b({},b),a.Q=C.7H(a.Q,a.11,a.3D),$.1b(I,a),I}});K F={1z:J(i){I.13=i,I.2i=[],I.1w={34:"21",1o:{M:0,L:0},1U:{M:0,L:0},14:{M:0,L:0}},I.14=I.13.2B(".N-14:3S"),I.2A(),I.6v(),I.1f(),I.3v()},2A:J(){I.14.X(I.1y=$("<12>").R("N-14-1y").X(I.6V=$("<12>").R("N-14-b1").X(I.4N=$("<12>").R("N-14-1d N-14-1d-1H").X(I.5x=$("<12>").R("N-14-1d-2o").X($("<12>").R("N-14-1d-2o-32")).X($("<12>").R("N-14-1d-2o-33")))).X(I.6W=$("<12>").R("N-14-4V").X(I.4j=$("<12>").R("N-14-3o"))).X(I.4L=$("<12>").R("N-14-1d N-14-1d-1C").X(I.4g=$("<12>").R("N-14-1d-2o").X($("<12>").R("N-14-1d-2o-32")).X($("<12>").R("N-14-1d-2o-33")))))),I.3F=$("<12>").R("N-14 N-14-21").X($("<12>").R("N-14-1d N-14-1d-1H")).X($("<12>").R("N-1o")).X($("<12>").R("N-14-1d N-14-1d-1C"))},3v:J(){I.6V.3f(".N-1o","2g",$.Y(J(i){i.3d();K t=$(i.3c).3R(".N-1o")[0],e=t&&$(t).1j("N-1s");e&&(I.6X(e),D.38(e))},I)),I.6V.1O("2g",J(i){i.3d()}),I.4N.1O("2g",$.Y(I.8H,I)),I.4L.1O("2g",$.Y(I.8I,I))},2p:J(i){U(I.2m(),I.2i=[],!(2>i.1t)){K t=!1;U($.1h(i,$.Y(J(i,e){T"1R"==e.Q.W?(t=!0,!1):2v 0},I)),!t){K e="21";$.1h(i,$.Y(J(i,t){"2y"==t.Q.14&&(e="2y")},I)),I.1w.34=e,I.8J(e),$.1h(i,$.Y(J(i,t){I.2i.2s(2j 5Z(I.4j,t,i+1))},I)),q.1k&&7>q.1k||I.1Y()}}},2m:J(){$.1h(I.2i,J(i,t){t.25()}),I.2i=[],I.1c=-1,I.3l=-1},8J:J(i){I.14.2L("N-14-21 N-14-2y").R("N-14-"+i)},8K:J(i){$.1h(i,$.Y(J(i,t){I.8L(t)},I))},8L:J(i){K t=i["1g-1n"],e=i["1g-2x"];i["1g-1n"]=0,i["1g-2x"]=0,i["1g-1p"]=t,i["1g-4S"]=e},8M:J(i){K t=i.L;i.L=i.M,i.M=t},8N:J(i){$.1h(i,$.Y(J(i,t){I.8M(t)},I))},35:J(){K i=D.13,t=D.3e,e=I.1w,s=e.34,n=A.3a(),o=i.2I(":1P");o||i.1i();K a=t.2I(":1P");a||t.1i(),I.14.5o(I.3F);K r=I.3F.2B(".N-14-1d-1H:3S"),h=I.3F.2B(".N-14-1d-1C:3S"),d=I.3F.2B(".N-1o:3S"),l=I.3F.7x(),u=3B(I.3F.15("5E-1p"))||0;$.1b(e.14,{M:l,5E:u});K p=l-2*u,c=3B(d.15("1g-1n"));$.1b(e.1o,{M:p,L:p}),$.1b(e.1U,{L:p+2*c,M:l}),e.28={1H:{17:{L:r.69(),M:l},1g:{"1g-1p":0,"1g-4S":0,"1g-1n":3B(r.15("1g-1n"))||0,"1g-2x":3B(r.15("1g-2x"))||0}},1C:{17:{L:h.69(),M:l},1g:{"1g-1p":0,"1g-4S":0,"1g-1n":3B(h.15("1g-1n"))||0,"1g-2x":3B(h.15("1g-2x"))||0}}};K m=n["21"==s?"L":"M"],f=e.1U.L,v=I.2i.1t;e.14.L=m,e.28.1Q=v*f/m>1;K w=m,g=e.28,b=g.1H,2l=g.1C,x=b.1g["1g-1n"]+b.17.L+b.1g["1g-2x"]+2l.1g["1g-1n"]+2l.17.L+2l.1g["1g-2x"];e.28.1Q&&(w-=x),w=1a.8O(w/f)*f;K y=v*f;w>y&&(w=y);K k=w+(e.28.1Q?x:0);e.3G=w/f,I.4W="5H",1>=e.3G&&(w=m,k=m,e.28.1Q=!1,I.4W="6h"),e.6Y=1a.4X(v*f/w),e.1y={L:k+1,M:l},e.4V={L:w,M:l},e.3o={L:v*f+1,M:l},"2y"==s&&(I.8N([e.14,e.1y,e.4V,e.3o,e.1U,e.1o,e.28.1H.17,e.28.1C.17]),I.8K([e.28.1H.1g,e.28.1C.1g])),I.3F.b2(),a||t.1f(),o||i.1f()},4e:J(){I.3y=!0},4E:J(){I.3y=!1},1Q:J(){T!I.3y},1i:J(){2>I.2i.1t||(I.4E(),I.14.1i(),I.3h=!0)},1f:J(){I.4e(),I.14.1f(),I.3h=!1},1P:J(){T!!I.3h},1Y:J(){I.35();K i=I.1w,t="21"==I.1w.34,e=i.14;I.14.15({L:e.L+"1e",M:e.M+"1e","1V-M":"2k","1x-M":"2k","1V-L":"2k","1x-L":"2k",5E:0}),$.1h(I.2i,J(i,t){t.1Y()}),I.4N[i.28.1Q?"1i":"1f"]().15(1e(i.28.1H.17)).15(1e(i.28.1H.1g)),I.4L[i.28.1Q?"1i":"1f"]().15(1e(i.28.1C.17)).15(1e(i.28.1C.1g)),q.1k&&9>q.1k&&(D.3x.2m("8P-8Q-14"),D.3x.1S("8P-8Q-14",$.Y(J(){I.35(),I.6W.15(1e(i.4V)),I.4j.15(1e(i.3o))},I),b3)),I.6W.15(1e(i.4V)),I.4j.15(1e(i.3o));K s=$.1b({},1e(i.1y));s["1g-"+(t?"1n":"1p")]=1a.2X(-.5*i.1y[t?"L":"M"])+"1e",s["1g-"+(t?"1p":"1n")]=0,I.1y.15(s),I.1c&&I.5I(I.1c,!0)},6Z:J(i){U(!(1>i||i>I.1w.6Y||i==I.3l)){K t=I.1w.3G*(i-1)+1;I.5I(t)}},8H:J(){I.6Z(I.3l-1)},8I:J(){I.6Z(I.3l+1)},b4:J(){K i=A.3a();T i},38:J(i){U(!(q.1k&&7>q.1k)){K t=0>I.1c;1>i&&(i=1);K e=I.2i.1t;i>e&&(i=e),I.1c=i,I.6X(i),("5H"!=I.4W||I.3l!=1a.4X(i/I.1w.3G))&&I.5I(i,t)}},5I:J(i,t){I.35();K e,s="21"==I.1w.34,n=A.3a()[s?"L":"M"],o=.5*n,a=I.1w.1U[s?"L":"M"];U("5H"==I.4W){K r=1a.4X(i/I.1w.3G);I.3l=r,e=-1*a*(I.3l-1)*I.1w.3G;K h="N-14-1d-2o-4M";I.5x[(2>r?"1X":"25")+"5F"](h),I.4g[(r>=I.1w.6Y?"1X":"25")+"5F"](h)}2r e=o+-1*(a*(i-1)+.5*a);K d=V.19&&V.19[V.1c-1],l={},u={};l[s?"1p":"1n"]=0,u[s?"1n":"1p"]=e+"1e",I.4j.1L(1,0).15(l).b5(u,t?0:d?d.P.Q.1v.14.3o:0,$.Y(J(){I.70()},I))},6v:J(){I.71=!0},7X:J(){I.71=!1,I.2i.1t>0&&I.70()},70:J(){K i=!1;I.71&&(i=!0);K t,e;U(I.1c&&I.1w.1U.L&&!(1>I.2i.1t)){U("5H"==I.4W){U(1>I.3l)T;t=(I.3l-1)*I.1w.3G+1,e=1a.1V(t-1+I.1w.3G,I.2i.1t)}2r{K s="21"==I.1w.34,n=1a.4X(I.1w.14[s?"L":"M"]/I.1w.1U[s?"L":"M"]);t=1a.1x(1a.8O(1a.1x(I.1c-.5*n,0)),1),e=1a.4X(1a.1V(I.1c+.5*n)),e>I.2i.1t&&(e=I.2i.1t)}1Z(K o=t;e>=o;o++)I.2i[o-1][i?"2A":"2p"]()}},6X:J(i){I.4j.2B(".N-1o-3T").2L("N-1o-3T");K t=i&&I.2i[i-1];t&&t.8R()},b6:J(){I.1c&&I.38(I.1c)}};$.1b(5Z.2V,{1z:J(i,t,e){I.13=i,I.P=t,I.b7={},I.1c=e,I.8S()},8S:J(){I.1o=$("<12>").R("N-1o").1j("N-1s",I.1c)},2A:J(){U(!I.1U){K i=I.P.Q;I.13.X(I.1U=$("<12>").R("N-1o-1l").X(I.1o.X(I.5J=$("<12>").R("N-1o-1y")))),"1q"==I.P.11&&I.1o.R("N-2p-1o").1j("1o",{P:I.P,2Q:i.1o||I.P.1u});K t=i.1o&&i.1o.33;t&&I.1o.X($("<12>").R("N-1o-33 N-1o-33-"+t));K e;I.1o.X(e=$("<12>").R("N-1o-1M").X($("<12>").R("N-1o-1M-32")).X(I.1K=$("<12>").R("N-1o-1K").X($("<12>").R("N-1o-1K-32")).X($("<12>").R("N-1o-1K-33"))).X($("<12>").R("N-1o-1M-3s"))),I.1o.X($("<12>").R("N-1o-b8")),I.1Y()}},25:J(){I.1U&&(I.1U.25(),I.1U=1A,I.b9=1A),I.2h=!1,I.8T=!0},2p:J(){U(!I.3C&&!I.2h&&F.1P()&&!I.8T){I.5J||I.2A(),I.2h=!0;K i=I.P.Q.1o,t=i&&"5j"==$.11(i)?I.P.1u:i||I.P.1u;U(I.4k=t,t)U("1N"==I.P.11)U(t==i)B.3K(I.4k,{11:"1q"},$.Y(I.5K,I));2r{K e="4u"+(16.2H&&"4v:"==16.2H.4w?"s":"")+":";$.7C(e+"//1N.31/5c/7D.7E?1u="+e+"//1N.31/"+I.P.3D.3u+"&42=?",$.Y(J(i){i&&i.8U?(I.4k=i.8U,B.3K(I.4k,{11:"1q"},$.Y(I.5K,I))):(I.3C=!0,I.2h=!1,I.1K.1L(1,0).2F(I.P.Q.1v.14.2F).3P(I.P.Q.1v.14.2p,0))},I))}2r B.3K(I.4k,{11:"1q"},$.Y(I.5K,I))}},5K:J(i){I.1U&&I.2h&&(I.3C=!0,I.2h=!1,I.1E=i,I.1q=$("<5k>").2w({2Q:I.4k}),I.5J.3Q(I.1q),I.1Y(),I.1K.1L(1,0).2F(I.P.Q.1v.14.2F).3P(I.P.Q.1v.14.2p,0))},1Y:J(){U(I.1U){I.1U.15(1e(F.1w.1U));K i="21"==F.1w.34;U(I.1U.15(1e({1p:i?0:F.1w.1U.M*(I.1c-1),1n:i?F.1w.1U.L*(I.1c-1):0})),I.5J){K t=F.1w.1o;U(I.1o.15(1e({L:t.L,M:t.M,"1g-1p":1a.2X(-.5*t.M),"1g-1n":1a.2X(-.5*t.L),"1g-4S":0,"1g-2x":0})),I.1q){K e,s={L:t.L,M:t.M},n=1a.1x(s.L,s.M),o=$.1b({},I.1E);U(o.L>s.L&&o.M>s.M){e=3q.3r(o,{2G:s});K a=1,r=1;e.L<s.L&&(a=s.L/e.L),e.M<s.M&&(r=s.M/e.M);K h=1a.1x(a,r);h>1&&(e.L*=h,e.M*=h),$.1h("L M".3H(" "),J(i,t){e[t]=1a.2X(e[t])})}2r e=3q.3r(o.L<s.L||o.M<s.M?{L:n,M:n}:s,{2G:I.1E});K d=1a.2X(.5*s.L-.5*e.L),l=1a.2X(.5*s.M-.5*e.M);I.1q.15(1e($.1b({},e,{1p:l,1n:d})))}}}},8R:J(){I.1o.R("N-1o-3T")}});K G={3y:!1,72:!0,1z:J(){D.1z()},1i:J(b){U(I.3y)T I.73.2u(G,2C.2b(1J)),2v 0;K c=1J[1]||{},1s=1J[2];1J[1]&&"5p"==$.11(1J[1])&&(1s=1J[1],c={});K d=[],8V;2D(8V=$.11(b)){1D"46":1D"6p":K f=2j 3X(b,c),4Y="1j-23-4i-Q";U(f.4i){U(2l.5g(b)){K g=$(\'.23[1j-23-4i="\'+$(b).1j("23-4i")+\'"]\'),h={};g.ba("["+4Y+"]").1h(J(i,a){$.1b(h,6U("({"+($(a).2w(4Y)||"")+"})"))}),g.1h(J(i,t){1s||t!=b||(1s=i+1),d.2s(2j 3X(t,$.1b({},h,c)))})}}2r{K h={};2l.5g(b)&&$(b).2I("["+4Y+"]")&&($.1b(h,6U("({"+($(b).2w(4Y)||"")+"})")),f=2j 3X(b,$.1b({},h,c))),d.2s(f)}2Z;1D"8W":$.1h(b,J(i,t){K e=2j 3X(t,c);d.2s(e)})}(!1s||1>1s)&&(1s=1),1s>d.1t&&(1s=d.1t),V.6D||V.3z({x:0,y:0}),D.2p(d,1s,{42:J(){D.1i(J(){})}})},73:J(){J i(t){K e,s=$.11(t);U("46"==s)e=t;2r U("8W"==s&&t[0])e=i(t[0]);2r U(2l.5g(t)&&$(t).2w("4C"))K e=$(t).2w("4C");2r e=t.1u?t.1u:!1;T e}T J(t){U(I.72){K e=i(t);e&&(16.2H.4C=e)}}}()};$.1b(j,{1i:J(){T G.1i.2u(G,2C.2b(1J)),I},1f:J(){T D.1f(),I},4e:J(){T G.3y=!0,I},4E:J(){T G.3y=!1,I},bb:J(i){T G.72=i,I},6o:J(i){T D.6o(i),I}}),("5p"==$.11(q.3p)&&3>q.3p||q.4q&&"5p"==$.11(q.3Z)&&7M.18>q.3Z)&&(j.1i=G.73);K H={1q:{8X:"bc bd 6c 7G 7b",4l:J(i){T $.8i(57(i),I.8X.3H(" "))>-1},1j:J(i){T I.4l()?{4U:57(i)}:!1}},22:{4l:J(i){K t=/(22\\.31|8Y\\.be)\\/bf\\?(?=.*6f?=([a-52-74-9-2l]+))(?:\\S+)?$/.5e(i);T t&&t[2]?t[2]:(t=/(22\\.31|8Y\\.be)\\/(6f?\\/|u\\/|5n\\/)?([a-52-74-9-2l]+)(?:\\S+)?$/i.5e(i),t&&t[3]?t[3]:!1)},1j:J(i){K t=I.4l(i);T t?{3u:t}:!1}},1N:{4l:J(i){K t=/(1N\\.31)\\/([a-52-74-9-2l]+)(?:\\S+)?$/i.5e(i);T t&&t[2]?t[2]:!1},1j:J(i){K t=I.4l(i);T t?{3u:t}:!1}}};T $(2c).bg(J(){G.1z()}),j});',62,699,'||||||||||||||||||||||||||||||||||||||||||||this|function|var|width|height|fr||view|options|addClass||return|if|Frames|ui|append|proxy|||type|div|element|thumbnails|css|window|dimensions||_frames|Math|extend|_position|side|px|hide|margin|each|show|data|IE|frame|caption|left|thumbnail|top|image|content|position|length|url|effects|_vars|max|wrapper|initialize|null|cache|next|case|_dimensions|info|Support|previous|get|arguments|loading|stop|overlay|vimeo|bind|visible|enabled|touch|set|box|thumbnail_frame|min|outside|add|resize|for||horizontal|youtube|fresco|mobileTouch|remove|spacer||sides|ui_wrapper|jQuery|call|document||fit|className|click|_loading|_thumbnails|new|none|_|clear|frames|button|load|close|else|push|_timeouts|apply|void|attr|right|vertical|_boxDimensions|build|find|_slice|switch|states|delay|bounds|location|is|_sideWidth|_tracking|removeClass|has|onclick|inside|no|src|loop|both|controls|indexOf|prototype|preventDefault|round|dragImage|break||com|background|icon|orientation|updateVars|||setPosition||viewport|overflow|target|stopPropagation|bubble|delegate|visibility|_visible|padder|box_wrapper|download_image|_page|deepExtendClone|move|slide|Android|Fit|within|border|preloaded|id|startObserving|queues|timeouts|_disabled|setXY|queue|parseInt|_loaded|_data|player_iframe|measure|ipp|split|onload|skins|preload|easing|track|skin|Window|fadeTo|prepend|closest|first|active|getLayout|200|Loading|View|onClick|WebKit|documentElement|style|callback|delete|defaultSkin||string|setExpression|setSkin|setOpacity|pageX|pageY|_reset|views|disable|elements|_next_button|box_spacer|group|_slide|_url|detect|in|portrait|canvas|getURIData|MobileSafari|body|originalEvent|dragScale|http|https|protocol|offset|scrollTop|fadeOut|setTimeout|clearTimeout|href|overlapping|enable|_m|keyCode|_handleTracking|getSurroundingIndexes|_whileVisible|_track|_next|disabled|_previous|hasClass|_loadTimer|showUI|startUITimer|bottom|_ui_timer|extension|thumbs|_mode|ceil|_dgo|landscape||String|zA|test|substr||deepExtend|detectExtension|sync|touchEffects|keyboard|esc|api|initialTypeOptions|exec|IEMobile|isElement|mousewheel|xhr|boolean|img|scrollLeft|_count|embed|before|number|updateDimensions|_tracking_timer|_removeVideo|clearUITimer|box_outer_border|ui_padder|clone|_previous_button|_border|320|568|afterLoad|_button|hideUI|padding|Class|overlap|page|moveTo|thumbnail_wrapper|_afterLoad|define|getOrientation|sfcc|rs|warn|console|createDragImage|Image|getContext|toDataURL|Overlay|Timeouts|States|Frame|Thumbnail|toLowerCase|version|300|250|autoplay|parseFloat|Opera|opera|Chrome|innerWidth|createElement|postMessage|jpeg|Cache|once|vi|absolute|center|draw|class|getScrollDimensions|scroll|_states|showhide|setDefaultSkin|object|param|_restoreScroll|stopQueues|easeInSine|_hide|block|after|_s|easeOutSine|fetchOptions|getKeyByKeyCode|setOrientation|mousemove|_xyp|_pos|removeTracking|clearLoad|box_padder|download|ui_spacer|ui_outer_border|info_padder|html|span|_getInfoHeight|_fit|clearLoadTimer|index|_movieLoaded|player|eval|_slider|_thumbs|setActive|pages|moveToPage|loadCurrentPage|_blocked|_fallback|showFallback|Z0|Fresco|fromCharCode|replace|100|canvasToDataUrlPNG|try|png|catch|constructor|match|base|175|spacing|hd|hd1080|1280|720|reset|IE6|AppleWebKit|Gecko|ChromeMobile|CrMo|navigator|nodeType|parentNode|wheelDelta|detail|innerHeight|prefix|toUpperCase|DocumentTouch|pointerEvents|getJSON|oembed|json|getDimensions|jpg|create|start|mobile|_noSkinClass|easeInOutSine|533|timeout_|update|skinless|hideOverlapping|wmode|value|transparent|restoreOverlapping|onShow|_show|unblock|hideAll|afterHide|onkeydown|onkeyup|_preloaded|uis|removeAttr|handleTracking|clearTrackingTimer|startTracking|stopTracking|clearLoads|afterPosition|preloadSurroundingImages|mayPrevious|mayNext|setVisible|isVisible|setHidden|grep|inArray|setXYP|setTracking|isTracking|outer|ui_toggle|_spacing|_max|dragstart|mouseenter|mouseleave|setDragImage|addElement|prevent|swipe|insertYoutubeVideo|iframe|webkitAllowFullScreen|mozallowfullscreen|allowFullScreen|frameborder|insertVimeoVideo|_preShow|_shown|_postHide|previousPage|nextPage|setOrientationClass|flipMargins|flipMargin|flipDimensions|flipMultiple|floor|ie|resizing|activate|preBuild|_removed|thumbnail_url|object_type|array|extensions|youtu|typeof|amd|jquery|114|110|111|109|toString||log|globalAlpha|drawImage|Object|400|touchCaption|slideOut|slideIn|440|180|3e3|5e3|title|byline|enablejsapi|iv_load_policy|modestbranding|rel|vq|RegExp|attachEvent|MSIE|KHTML|rv|Apple|Mobile|Safari|userAgent|Array|slice|isAttached|120|Event|trigger|isPropagationStopped|isDefaultPrevented|DOMMouseScroll|Quad|Cubic|Quart|Quint|Expo|pow|Sine|cos|PI|easeIn|easeOut|easeInOut|clientWidth|charAt|join|Webkit|Moz|ms|Khtml|ontouchstart|instanceof|prefixed|Win|Mac|Linux|platform|lifetime|3e5|inject|abort|dela|setOptions|oldIE|ltIE|currentTarget|select|name|hidden|restoreOverlappingWithinContent|fs|150|keydown|keyup|orientationchange|_touched|_noCaptions|unbind|outerWidth|_top|pn|hideAllBut|clearTracking|_scrollbarWidth|scrollbarWidth|toggle|info_background|text|smart|opacity|parents|dataTransfer|replaceWith|quality|hd720|YT|outerHeight|Tracking|setSize|relative|_style|setDimensions|www|player_id|video|_playing|about|blank|easeInQuad|easeOutQuart|hideUIDelayed|slider|detach|500|adjustToViewport|animate|refresh|_dimension|state|thumbnail_image|filter|fallback|bmp|gif||watch|ready'.split('|'),0,{}));
/*! Backstretch - v2.0.4 - 2013-06-19
* http://srobbin.com/jquery-plugins/backstretch/
* Copyright (c) 2013 Scott Robbin; Licensed MIT */
(function(a,d,p){a.fn.backstretch=function(c,b){(c===p||0===c.length)&&a.error("No images were supplied for Backstretch");0===a(d).scrollTop()&&d.scrollTo(0,0);return this.each(function(){var d=a(this),g=d.data("backstretch");if(g){if("string"==typeof c&&"function"==typeof g[c]){g[c](b);return}b=a.extend(g.options,b);g.destroy(!0)}g=new q(this,c,b);d.data("backstretch",g)})};a.backstretch=function(c,b){return a("body").backstretch(c,b).data("backstretch")};a.expr[":"].backstretch=function(c){return a(c).data("backstretch")!==p};a.fn.backstretch.defaults={centeredX:!0,centeredY:!0,duration:5E3,fade:0};var r={left:0,top:0,overflow:"hidden",margin:0,padding:0,height:"100%",width:"100%",zIndex:-999999},s={position:"absolute",display:"none",margin:0,padding:0,border:"none",width:"auto",height:"auto",maxHeight:"none",maxWidth:"none",zIndex:-999999},q=function(c,b,e){this.options=a.extend({},a.fn.backstretch.defaults,e||{});this.images=a.isArray(b)?b:[b];a.each(this.images,function(){a("<img />")[0].src=this});this.isBody=c===document.body;this.$container=a(c);this.$root=this.isBody?l?a(d):a(document):this.$container;c=this.$container.children(".backstretch").first();this.$wrap=c.length?c:a('<div class="backstretch"></div>').css(r).appendTo(this.$container);this.isBody||(c=this.$container.css("position"),b=this.$container.css("zIndex"),this.$container.css({position:"static"===c?"relative":c,zIndex:"auto"===b?0:b,background:"none"}),this.$wrap.css({zIndex:-999998}));this.$wrap.css({position:this.isBody&&l?"fixed":"absolute"});this.index=0;this.show(this.index);a(d).on("resize.backstretch",a.proxy(this.resize,this)).on("orientationchange.backstretch",a.proxy(function(){this.isBody&&0===d.pageYOffset&&(d.scrollTo(0,1),this.resize())},this))};q.prototype={resize:function(){try{var a={left:0,top:0},b=this.isBody?this.$root.width():this.$root.innerWidth(),e=b,g=this.isBody?d.innerHeight?d.innerHeight:this.$root.height():this.$root.innerHeight(),j=e/this.$img.data("ratio"),f;j>=g?(f=(j-g)/2,this.options.centeredY&&(a.top="-"+f+"px")):(j=g,e=j*this.$img.data("ratio"),f=(e-b)/2,this.options.centeredX&&(a.left="-"+f+"px"));this.$wrap.css({width:b,height:g}).find("img:not(.deleteable)").css({width:e,height:j}).css(a)}catch(h){}return this},show:function(c){if(!(Math.abs(c)>this.images.length-1)){var b=this,e=b.$wrap.find("img").addClass("deleteable"),d={relatedTarget:b.$container[0]};b.$container.trigger(a.Event("backstretch.before",d),[b,c]);this.index=c;clearInterval(b.interval);b.$img=a("<img />").css(s).bind("load",function(f){var h=this.width||a(f.target).width();f=this.height||a(f.target).height();a(this).data("ratio",h/f);a(this).fadeIn(b.options.speed||b.options.fade,function(){e.remove();b.paused||b.cycle();a(["after","show"]).each(function(){b.$container.trigger(a.Event("backstretch."+this,d),[b,c])})});b.resize()}).appendTo(b.$wrap);b.$img.attr("src",b.images[c]);return b}},next:function(){return this.show(this.index<this.images.length-1?this.index+1:0)},prev:function(){return this.show(0===this.index?this.images.length-1:this.index-1)},pause:function(){this.paused=!0;return this},resume:function(){this.paused=!1;this.next();return this},cycle:function(){1<this.images.length&&(clearInterval(this.interval),this.interval=setInterval(a.proxy(function(){this.paused||this.next()},this),this.options.duration));return this},destroy:function(c){a(d).off("resize.backstretch orientationchange.backstretch");clearInterval(this.interval);c||this.$wrap.remove();this.$container.removeData("backstretch")}};var l,f=navigator.userAgent,m=navigator.platform,e=f.match(/AppleWebKit\/([0-9]+)/),e=!!e&&e[1],h=f.match(/Fennec\/([0-9]+)/),h=!!h&&h[1],n=f.match(/Opera Mobi\/([0-9]+)/),t=!!n&&n[1],k=f.match(/MSIE ([0-9]+)/),k=!!k&&k[1];l=!((-1<m.indexOf("iPhone")||-1<m.indexOf("iPad")||-1<m.indexOf("iPod"))&&e&&534>e||d.operamini&&"[object OperaMini]"==={}.toString.call(d.operamini)||n&&7458>t||-1<f.indexOf("Android")&&e&&533>e||h&&6>h||"palmGetResource"in d&&e&&534>e||-1<f.indexOf("MeeGo")&&-1<f.indexOf("NokiaBrowser/8.5.0")||k&&6>=k)})(jQuery,window);
/**
* jQuery Form Validator
* ------------------------------------------
* Created by Victor Jonsson <http://www.victorjonsson.se>
*
* @website http://formvalidator.net/
* @license Dual licensed under the MIT or GPL Version 2 licenses
* @version 2.2.0
*/
(function($){"use strict";var $window=$(window),_applyErrorStyle=function($elem,conf){$elem.addClass(conf.errorElementClass).removeClass("valid").parent().addClass("has-error").removeClass("has-success");if(conf.borderColorOnError!==""){$elem.css("border-color",conf.borderColorOnError)}},_removeErrorStyle=function($elem,conf){$elem.each(function(){_setInlineErrorMessage($(this),"",conf,conf.errorMessagePosition);$(this).removeClass("valid").removeClass(conf.errorElementClass).css("border-color","").parent().removeClass("has-error").removeClass("has-success").find("."+conf.errorMessageClass).remove()})},_setInlineErrorMessage=function($input,mess,conf,$messageContainer){var custom=_getInlineErrorElement($input);if(custom){custom.innerHTML=mess}else if(typeof $messageContainer=="object"){var $found=false;$messageContainer.find("."+conf.errorMessageClass).each(function(){if(this.inputReferer==$input[0]){$found=$(this);return false}});if($found){if(!mess){$found.remove()}else{$found.html(mess)}}else{var $mess=$('<div class="'+conf.errorMessageClass+'">'+mess+"</div>");$mess[0].inputReferer=$input[0];$messageContainer.prepend($mess)}}else{var $mess=$input.parent().find("."+conf.errorMessageClass+".help-block");if($mess.length==0){$mess=$("<span></span>").addClass("help-block").addClass(conf.errorMessageClass);$mess.appendTo($input.parent())}$mess.html(mess)}},_getInlineErrorElement=function($input,conf){return document.getElementById($input.attr("name")+"_err_msg")},_templateMessage=function($form,title,errorMessages,conf){var messages=conf.errorMessageTemplate.messages.replace(/\{errorTitle\}/g,title);var fields=[];$.each(errorMessages,function(i,msg){fields.push(conf.errorMessageTemplate.field.replace(/\{msg\}/g,msg))});messages=messages.replace(/\{fields\}/g,fields.join(""));var container=conf.errorMessageTemplate.container.replace(/\{errorMessageClass\}/g,conf.errorMessageClass);container=container.replace(/\{messages\}/g,messages);$form.children().eq(0).before(container)};$.fn.validateOnBlur=function(language,settings){this.find("input[data-validation],textarea[data-validation],select[data-validation]").bind("blur.validation",function(){$(this).validateInputOnBlur(language,settings)});return this};$.fn.validateOnEvent=function(language,settings){this.find("input[data-validation][data-validation-event],textarea[data-validation][data-validation-event],select[data-validation][data-validation-event]").each(function(){var $el=$(this),etype=$el.attr("data-validation-event");if(etype){$el.bind(etype+".validation",function(){$(this).validateInputOnBlur(language,settings,false,etype)})}});return this};$.fn.showHelpOnFocus=function(attrName){if(!attrName){attrName="data-validation-help"}this.find(".has-help-txt").valAttr("has-keyup-event",false).valAttr("backend-valid",false).valAttr("backend-invalid",false).removeClass("has-help-txt");this.find("textarea,input").each(function(){var $elem=$(this),className="jquery_form_help_"+($elem.attr("name")||"").replace(/(:|\.|\[|\])/g,""),help=$elem.attr(attrName);if(help){$elem.addClass("has-help-txt").unbind("focus.help").bind("focus.help",function(){var $help=$elem.parent().find("."+className);if($help.length==0){$help=$("<span />").addClass(className).addClass("help").addClass("help-block").text(help).hide();$elem.after($help)}$help.fadeIn()}).unbind("blur.help").bind("blur.help",function(){$(this).parent().find("."+className).fadeOut("slow")})}});return this};$.fn.validateInputOnBlur=function(language,conf,attachKeyupEvent,eventContext){if(attachKeyupEvent===undefined)attachKeyupEvent=true;if(!eventContext)eventContext="blur";if((this.valAttr("suggestion-nr")||this.valAttr("postpone")||this.hasClass("hasDatepicker"))&&!window.postponedValidation){var _self=this,postponeTime=this.valAttr("postpone")||200;window.postponedValidation=function(){_self.validateInputOnBlur(language,conf,attachKeyupEvent);window.postponedValidation=false};setTimeout(function(){if(window.postponedValidation){window.postponedValidation()}},postponeTime);return this}language=$.extend({},$.formUtils.LANG,language||{});_removeErrorStyle(this,conf);var $elem=this,$form=$elem.closest("form"),validationRule=$elem.attr(conf.validationRuleAttribute),validation=$.formUtils.validateInput($elem,language,$.extend({},conf,{errorMessagePosition:"element"}),$form,eventContext);$elem.trigger("validation",[validation===null?null:validation===true]);if(validation===true){$elem.addClass("valid").parent().addClass("has-success")}else if(validation!==null){_applyErrorStyle($elem,conf);_setInlineErrorMessage($elem,validation,conf,conf.errorMessagePosition);if(attachKeyupEvent){$elem.bind("keyup",function(){$(this).validateInputOnBlur(language,conf,false,"keyup")})}}return this};$.fn.valAttr=function(name,val){if(val===undefined){return this.attr("data-validation-"+name)}else if(val===false||val===null){return this.removeAttr("data-validation-"+name)}else{if(name.length>0)name="-"+name;return this.attr("data-validation"+name,val)}};$.fn.isValid=function(language,conf,displayError){if($.formUtils.isLoadingModules){var $self=this;setTimeout(function(){$self.isValid(language,conf,displayError)},200);return null}conf=$.extend({},$.formUtils.defaultConfig(),conf||{});language=$.extend({},$.formUtils.LANG,language||{});displayError=displayError!==false;$.formUtils.isValidatingEntireForm=true;$.formUtils.haltValidation=false;var addErrorMessage=function(mess,$elem){if(mess!==null){if($.inArray(mess,errorMessages)<0){errorMessages.push(mess)}errorInputs.push($elem);$elem.attr("current-error",mess);if(displayError)_applyErrorStyle($elem,conf)}},errorMessages=[],errorInputs=[],$form=this,ignoreInput=function(name,type){if(type==="submit"||type==="button"||type=="reset"){return true}return $.inArray(name,conf.ignore||[])>-1};if(displayError){$form.find("."+conf.errorMessageClass+".alert").remove();_removeErrorStyle($form.find("."+conf.errorElementClass+",.valid"),conf)}$form.find("input,textarea,select").filter(':not([type="submit"],[type="button"])').each(function(){var $elem=$(this);var elementType=$elem.attr("type");if(!ignoreInput($elem.attr("name"),elementType)){var validation=$.formUtils.validateInput($elem,language,conf,$form,"submit");$elem.trigger("validation",[validation===true]);if(typeof conf.onElementValidate=="function"){conf.onElementValidate(validation===true,$elem,$form,validation)}if(validation!==true){addErrorMessage(validation,$elem)}else{$elem.valAttr("current-error",false).addClass("valid").parent().addClass("has-success")}}});if(typeof conf.onValidate=="function"){var errors=conf.onValidate($form);if($.isArray(errors)){$.each(errors,function(i,err){addErrorMessage(err.message,err.element)})}else if(errors&&errors.element&&errors.message){addErrorMessage(errors.message,errors.element)}}$.formUtils.isValidatingEntireForm=false;if(!$.formUtils.haltValidation&&errorInputs.length>0){if(displayError){if(conf.errorMessagePosition==="top"){_templateMessage($form,language.errorTitle,errorMessages,conf)}else if(conf.errorMessagePosition==="custom"){if(typeof conf.errorMessageCustom==="function"){conf.errorMessageCustom($form,language.errorTitle,errorMessages,conf)}}else{$.each(errorInputs,function(i,$input){_setInlineErrorMessage($input,$input.attr("current-error"),conf,conf.errorMessagePosition)})}if(conf.scrollToTopOnError){$window.scrollTop($form.offset().top-20)}}return false}return!$.formUtils.haltValidation};$.fn.validateForm=function(language,conf){if(window.console&&typeof window.console.warn=="function"){window.console.warn("Use of deprecated function $.validateForm, use $.isValid instead")}return this.isValid(language,conf,true)};$.fn.restrictLength=function(maxLengthElement){new $.formUtils.lengthRestriction(this,maxLengthElement);return this};$.fn.addSuggestions=function(settings){var sugs=false;this.find("input").each(function(){var $field=$(this);sugs=$.split($field.attr("data-suggestions"));if(sugs.length>0&&!$field.hasClass("has-suggestions")){$.formUtils.suggest($field,sugs,settings);$field.addClass("has-suggestions")}});return this};$.split=function(val,func,delim){if(typeof func!="function"){if(!val)return[];var values=[];$.each(val.split(func?func:","),function(i,str){str=$.trim(str);if(str.length)values.push(str)});return values}else if(val){if(!delim)delim=",";$.each(val.split(delim),function(i,str){str=$.trim(str);if(str.length)return func(str,i)})}};$.validate=function(conf){var defaultConf=$.extend($.formUtils.defaultConfig(),{form:"form",validateOnEvent:true,validateOnBlur:true,showHelpOnFocus:true,addSuggestions:true,modules:"",onModulesLoaded:null,language:false,onSuccess:false,onError:false,onElementValidate:false});conf=$.extend(defaultConf,conf||{});$(conf.form).each(function(i,form){var $form=$(form);$window.trigger("formValidationSetup",[$form]);$form.find(".has-help-txt").unbind("focus.validation").unbind("blur.validation");$form.removeClass("has-validation-callback").unbind("submit.validation").unbind("reset.validation").find("input[data-validation],textarea[data-validation]").unbind("blur.validation");$form.bind("submit.validation",function(){var $form=$(this);if($.formUtils.isLoadingModules){setTimeout(function(){$form.trigger("submit.validation")},200);return false}var valid=$form.isValid(conf.language,conf);if(valid&&typeof conf.onSuccess=="function"){var callbackResponse=conf.onSuccess($form);if(callbackResponse===false)return false}else if(!valid&&typeof conf.onError=="function"){conf.onError($form);return false}else{return valid}}).bind("reset.validation",function(){$(this).find("."+conf.errorMessageClass+".alert").remove();_removeErrorStyle($(this).find("."+conf.errorElementClass+",.valid"),conf)}).addClass("has-validation-callback");if(conf.showHelpOnFocus){$form.showHelpOnFocus()}if(conf.addSuggestions){$form.addSuggestions()}if(conf.validateOnBlur){$form.validateOnBlur(conf.language,conf);$form.bind("html5ValidationAttrsFound",function(){$form.validateOnBlur(conf.language,conf)})}if(conf.validateOnEvent){$form.validateOnEvent(conf.language,conf)}});if(conf.modules!=""){if(typeof conf.onModulesLoaded=="function"){$window.one("validatorsLoaded",conf.onModulesLoaded)}$.formUtils.loadModules(conf.modules)}};$.formUtils={defaultConfig:function(){return{ignore:[],errorElementClass:"error",borderColorOnError:"red",errorMessageClass:"form-error",validationRuleAttribute:"data-validation",validationErrorMsgAttribute:"data-validation-error-msg",errorMessagePosition:"element",errorMessageTemplate:{container:'<div class="{errorMessageClass} alert alert-danger">{messages}</div>',messages:"<strong>{errorTitle}</strong><ul>{fields}</ul>",field:"<li>{msg}</li>"},errorMessageCustom:_templateMessage,scrollToTopOnError:true,dateFormat:"yyyy-mm-dd",addValidClassOnAll:false,decimalSeparator:"."}},validators:{},_events:{load:[],valid:[],invalid:[]},haltValidation:false,isValidatingEntireForm:false,addValidator:function(validator){var name=validator.name.indexOf("validate_")===0?validator.name:"validate_"+validator.name;if(validator.validateOnKeyUp===undefined)validator.validateOnKeyUp=true;this.validators[name]=validator},isLoadingModules:false,loadedModules:{},loadModules:function(modules,path,fireEvent){if(fireEvent===undefined)fireEvent=true;if($.formUtils.isLoadingModules){setTimeout(function(){$.formUtils.loadModules(modules,path,fireEvent)});return}var hasLoadedAnyModule=false,loadModuleScripts=function(modules,path){var moduleList=$.split(modules),numModules=moduleList.length,moduleLoadedCallback=function(){numModules--;if(numModules==0){$.formUtils.isLoadingModules=false;if(fireEvent&&hasLoadedAnyModule){$window.trigger("validatorsLoaded")}}};if(numModules>0){$.formUtils.isLoadingModules=true}var cacheSuffix="?__="+(new Date).getTime(),appendToElement=document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0];$.each(moduleList,function(i,modName){modName=$.trim(modName);if(modName.length==0){moduleLoadedCallback()}else{var scriptUrl=path+modName+(modName.substr(-3)==".js"?"":".js"),script=document.createElement("SCRIPT");if(scriptUrl in $.formUtils.loadedModules){moduleLoadedCallback()}else{$.formUtils.loadedModules[scriptUrl]=1;hasLoadedAnyModule=true;script.type="text/javascript";script.onload=moduleLoadedCallback;script.src=scriptUrl+(scriptUrl.substr(-7)==".dev.js"?cacheSuffix:"");script.onreadystatechange=function(){if(this.readyState=="complete"||this.readyState=="loaded"){moduleLoadedCallback();this.onload=null;this.onreadystatechange=null}};appendToElement.appendChild(script)}}})};if(path){loadModuleScripts(modules,path)}else{var findScriptPathAndLoadModules=function(){var foundPath=false;$("script").each(function(){if(this.src){var scriptName=this.src.substr(this.src.lastIndexOf("/")+1,this.src.length);if(scriptName.indexOf("jquery.form-validator.js")>-1||scriptName.indexOf("jquery.form-validator.min.js")>-1){foundPath=this.src.substr(0,this.src.lastIndexOf("/"))+"/";if(foundPath=="/")foundPath="";return false}}});if(foundPath!==false){loadModuleScripts(modules,foundPath);return true}return false};if(!findScriptPathAndLoadModules()){$(findScriptPathAndLoadModules)}}},validateInput:function($elem,language,conf,$form,eventContext){if($elem.attr("disabled"))return null;$elem.trigger("beforeValidation");var value=$elem.val()||"",optional=$elem.valAttr("optional"),validationDependsOnCheckedInput=false,validationDependentInputIsChecked=false,validateIfCheckedElement=false,validateIfCheckedElementName=$elem.valAttr("if-checked");if(validateIfCheckedElementName!=null){validationDependsOnCheckedInput=true;validateIfCheckedElement=$form.find('input[name="'+validateIfCheckedElementName+'"]');if(validateIfCheckedElement.prop("checked")){validationDependentInputIsChecked=true}}if(!value&&optional==="true"||validationDependsOnCheckedInput&&!validationDependentInputIsChecked){return conf.addValidClassOnAll?true:null}var validationRules=$elem.attr(conf.validationRuleAttribute),validationErrorMsg=true;if(!validationRules){return conf.addValidClassOnAll?true:null}$.split(validationRules,function(rule){if(rule.indexOf("validate_")!==0){rule="validate_"+rule}var validator=$.formUtils.validators[rule];if(validator&&typeof validator["validatorFunction"]=="function"){if(rule=="validate_checkbox_group"){$elem=$("[name='"+$elem.attr("name")+"']:eq(0)")}var isValid=true;if(eventContext!="keyup"||validator.validateOnKeyUp){isValid=validator.validatorFunction(value,$elem,conf,language,$form)}if(!isValid){validationErrorMsg=$elem.attr(conf.validationErrorMsgAttribute+"-"+rule.replace("validate_",""));if(!validationErrorMsg){validationErrorMsg=$elem.attr(conf.validationErrorMsgAttribute);if(!validationErrorMsg){validationErrorMsg=language[validator.errorMessageKey];if(!validationErrorMsg)validationErrorMsg=validator.errorMessage}}return false}}else{console.warn('Using undefined validator "'+rule+'"')}}," ");if(typeof validationErrorMsg=="string"){return validationErrorMsg}else{return true}},parseDate:function(val,dateFormat){var divider=dateFormat.replace(/[a-zA-Z]/gi,"").substring(0,1),regexp="^",formatParts=dateFormat.split(divider),matches,day,month,year;$.each(formatParts,function(i,part){regexp+=(i>0?"\\"+divider:"")+"(\\d{"+part.length+"})"});regexp+="$";matches=val.match(new RegExp(regexp));if(matches===null){return false}var findDateUnit=function(unit,formatParts,matches){for(var i=0;i<formatParts.length;i++){if(formatParts[i].substring(0,1)===unit){return $.formUtils.parseDateInt(matches[i+1])}}return-1};month=findDateUnit("m",formatParts,matches);day=findDateUnit("d",formatParts,matches);year=findDateUnit("y",formatParts,matches);if(month===2&&day>28&&(year%4!==0||year%100===0&&year%400!==0)||month===2&&day>29&&(year%4===0||year%100!==0&&year%400===0)||month>12||month===0){return false}if(this.isShortMonth(month)&&day>30||!this.isShortMonth(month)&&day>31||day===0){return false}return[year,month,day]},parseDateInt:function(val){if(val.indexOf("0")===0){val=val.replace("0","")}return parseInt(val,10)},isShortMonth:function(m){return m%2===0&&m<7||m%2!==0&&m>7},lengthRestriction:function($inputElement,$maxLengthElement){var maxChars=parseInt($maxLengthElement.text(),10),charsLeft=0,countCharacters=function(){var numChars=$inputElement.val().length;if(numChars>maxChars){var currScrollTopPos=$inputElement.scrollTop();$inputElement.val($inputElement.val().substring(0,maxChars));$inputElement.scrollTop(currScrollTopPos)}charsLeft=maxChars-numChars;if(charsLeft<0)charsLeft=0;$maxLengthElement.text(charsLeft)};$($inputElement).bind("keydown keyup keypress focus blur",countCharacters).bind("cut paste",function(){setTimeout(countCharacters,100)});$(document).bind("ready",countCharacters)},numericRangeCheck:function(value,rangeAllowed){var range=$.split(rangeAllowed,"-");var minmax=parseInt(rangeAllowed.substr(3),10);if(range.length==2&&(value<parseInt(range[0],10)||value>parseInt(range[1],10))){return["out",range[0],range[1]]}else if(rangeAllowed.indexOf("min")===0&&value<minmax){return["min",minmax]}else if(rangeAllowed.indexOf("max")===0&&value>minmax){return["max",minmax]}else{return["ok"]}},_numSuggestionElements:0,_selectedSuggestion:null,_previousTypedVal:null,suggest:function($elem,suggestions,settings){var conf={css:{maxHeight:"150px",background:"#FFF",lineHeight:"150%",textDecoration:"underline",overflowX:"hidden",overflowY:"auto",border:"#CCC solid 1px",borderTop:"none",cursor:"pointer"},activeSuggestionCSS:{background:"#E9E9E9"}},setSuggsetionPosition=function($suggestionContainer,$input){var offset=$input.offset();$suggestionContainer.css({width:$input.outerWidth(),left:offset.left+"px",top:offset.top+$input.outerHeight()+"px"})};if(settings)$.extend(conf,settings);conf.css["position"]="absolute";conf.css["z-index"]=9999;$elem.attr("autocomplete","off");if(this._numSuggestionElements===0){$window.bind("resize",function(){$(".jquery-form-suggestions").each(function(){var $container=$(this),suggestID=$container.attr("data-suggest-container");setSuggsetionPosition($container,$(".suggestions-"+suggestID).eq(0))})})}this._numSuggestionElements++;var onSelectSuggestion=function($el){var suggestionId=$el.valAttr("suggestion-nr");$.formUtils._selectedSuggestion=null;$.formUtils._previousTypedVal=null;$(".jquery-form-suggestion-"+suggestionId).fadeOut("fast")};$elem.data("suggestions",suggestions).valAttr("suggestion-nr",this._numSuggestionElements).unbind("focus.suggest").bind("focus.suggest",function(){$(this).trigger("keyup");$.formUtils._selectedSuggestion=null}).unbind("keyup.suggest").bind("keyup.suggest",function(){var $input=$(this),foundSuggestions=[],val=$.trim($input.val()).toLocaleLowerCase();if(val==$.formUtils._previousTypedVal){return}else{$.formUtils._previousTypedVal=val}var hasTypedSuggestion=false,suggestionId=$input.valAttr("suggestion-nr"),$suggestionContainer=$(".jquery-form-suggestion-"+suggestionId);$suggestionContainer.scrollTop(0);if(val!=""){var findPartial=val.length>2;$.each($input.data("suggestions"),function(i,suggestion){var lowerCaseVal=suggestion.toLocaleLowerCase();if(lowerCaseVal==val){foundSuggestions.push("<strong>"+suggestion+"</strong>");hasTypedSuggestion=true;return false}else if(lowerCaseVal.indexOf(val)===0||findPartial&&lowerCaseVal.indexOf(val)>-1){foundSuggestions.push(suggestion.replace(new RegExp(val,"gi"),"<strong>$&</strong>"))}})}if(hasTypedSuggestion||foundSuggestions.length==0&&$suggestionContainer.length>0){$suggestionContainer.hide()}else if(foundSuggestions.length>0&&$suggestionContainer.length==0){$suggestionContainer=$("<div></div>").css(conf.css).appendTo("body");$elem.addClass("suggestions-"+suggestionId);$suggestionContainer.attr("data-suggest-container",suggestionId).addClass("jquery-form-suggestions").addClass("jquery-form-suggestion-"+suggestionId)}else if(foundSuggestions.length>0&&!$suggestionContainer.is(":visible")){$suggestionContainer.show()}if(foundSuggestions.length>0&&val.length!=foundSuggestions[0].length){setSuggsetionPosition($suggestionContainer,$input);$suggestionContainer.html("");$.each(foundSuggestions,function(i,text){$("<div></div>").append(text).css({overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",padding:"5px"}).addClass("form-suggest-element").appendTo($suggestionContainer).click(function(){$input.focus();$input.val($(this).text());onSelectSuggestion($input)})})}}).unbind("keydown.validation").bind("keydown.validation",function(e){var code=e.keyCode?e.keyCode:e.which,suggestionId,$suggestionContainer,$input=$(this);if(code==13&&$.formUtils._selectedSuggestion!==null){suggestionId=$input.valAttr("suggestion-nr");$suggestionContainer=$(".jquery-form-suggestion-"+suggestionId);if($suggestionContainer.length>0){var newText=$suggestionContainer.find("div").eq($.formUtils._selectedSuggestion).text();$input.val(newText);onSelectSuggestion($input);e.preventDefault()}}else{suggestionId=$input.valAttr("suggestion-nr");$suggestionContainer=$(".jquery-form-suggestion-"+suggestionId);var $suggestions=$suggestionContainer.children();if($suggestions.length>0&&$.inArray(code,[38,40])>-1){if(code==38){if($.formUtils._selectedSuggestion===null)$.formUtils._selectedSuggestion=$suggestions.length-1;else $.formUtils._selectedSuggestion--;if($.formUtils._selectedSuggestion<0)$.formUtils._selectedSuggestion=$suggestions.length-1}else if(code==40){if($.formUtils._selectedSuggestion===null)$.formUtils._selectedSuggestion=0;else $.formUtils._selectedSuggestion++;if($.formUtils._selectedSuggestion>$suggestions.length-1)$.formUtils._selectedSuggestion=0}var containerInnerHeight=$suggestionContainer.innerHeight(),containerScrollTop=$suggestionContainer.scrollTop(),suggestionHeight=$suggestionContainer.children().eq(0).outerHeight(),activeSuggestionPosY=suggestionHeight*$.formUtils._selectedSuggestion;if(activeSuggestionPosY<containerScrollTop||activeSuggestionPosY>containerScrollTop+containerInnerHeight){$suggestionContainer.scrollTop(activeSuggestionPosY)}$suggestions.removeClass("active-suggestion").css("background","none").eq($.formUtils._selectedSuggestion).addClass("active-suggestion").css(conf.activeSuggestionCSS);e.preventDefault();return false}}}).unbind("blur.suggest").bind("blur.suggest",function(){onSelectSuggestion($(this))});return $elem},LANG:{errorTitle:"Form submission failed!",requiredFields:"You have not answered all required fields",badTime:"You have not given a correct time",badEmail:"You have not given a correct e-mail address",badTelephone:"You have not given a correct phone number",badSecurityAnswer:"You have not given a correct answer to the security question",badDate:"You have not given a correct date",lengthBadStart:"The input value must be between ",lengthBadEnd:" characters",lengthTooLongStart:"The input value is longer than ",lengthTooShortStart:"The input value is shorter than ",notConfirmed:"Input values could not be confirmed",badDomain:"Incorrect domain value",badUrl:"The input value is not a correct URL",badCustomVal:"The input value is incorrect",badInt:"The input value was not a correct number",badSecurityNumber:"Your social security number was incorrect",badUKVatAnswer:"Incorrect UK VAT Number",badStrength:"The password isn't strong enough",badNumberOfSelectedOptionsStart:"You have to choose at least ",badNumberOfSelectedOptionsEnd:" answers",badAlphaNumeric:"The input value can only contain alphanumeric characters ",badAlphaNumericExtra:" and ",wrongFileSize:"The file you are trying to upload is too large",wrongFileType:"The file you are trying to upload is of wrong type",groupCheckedRangeStart:"Please choose between ",groupCheckedTooFewStart:"Please choose at least ",groupCheckedTooManyStart:"Please choose a maximum of ",groupCheckedEnd:" item(s)",badCreditCard:"The credit card number is not correct",badCVV:"The CVV number was not correct"}};$.formUtils.addValidator({name:"email",validatorFunction:function(email){var emailParts=email.toLowerCase().split("@");if(emailParts.length==2){return $.formUtils.validators.validate_domain.validatorFunction(emailParts[1])&&!/[^\w\+\.\-]/.test(emailParts[0])}return false},errorMessage:"",errorMessageKey:"badEmail"});$.formUtils.addValidator({name:"domain",validatorFunction:function(val,$input){var topDomains=[".ac",".ad",".ae",".aero",".af",".ag",".ai",".al",".am",".an",".ao",".aq",".ar",".arpa",".as",".asia",".at",".au",".aw",".ax",".az",".ba",".bb",".bd",".be",".bf",".bg",".bh",".bi",".bike",".biz",".bj",".bm",".bn",".bo",".br",".bs",".bt",".bv",".bw",".by",".bz",".ca",".camera",".cat",".cc",".cd",".cf",".cg",".ch",".ci",".ck",".cl",".clothing",".cm",".cn",".co",".com",".construction",".contractors",".coop",".cr",".cu",".cv",".cw",".cx",".cy",".cz",".de",".diamonds",".directory",".dj",".dk",".dm",".do",".dz",".ec",".edu",".ee",".eg",".enterprises",".equipment",".er",".es",".estate",".et",".eu",".fi",".fj",".fk",".fm",".fo",".fr",".ga",".gallery",".gb",".gd",".ge",".gf",".gg",".gh",".gi",".gl",".gm",".gn",".gov",".gp",".gq",".gr",".graphics",".gs",".gt",".gu",".guru",".gw",".gy",".hk",".hm",".hn",".holdings",".hr",".ht",".hu",".id",".ie",".il",".im",".in",".info",".int",".io",".iq",".ir",".is",".it",".je",".jm",".jo",".jobs",".jp",".ke",".kg",".kh",".ki",".kitchen",".km",".kn",".kp",".kr",".kw",".ky",".kz",".la",".land",".lb",".lc",".li",".lighting",".lk",".lr",".ls",".lt",".lu",".lv",".ly",".ma",".mc",".md",".me",".menu",".mg",".mh",".mil",".mk",".ml",".mm",".mn",".mo",".mobi",".mp",".mq",".mr",".ms",".mt",".mu",".museum",".mv",".mw",".mx",".my",".mz",".na",".name",".nc",".ne",".net",".nf",".ng",".ni",".nl",".no",".np",".nr",".nu",".nz",".om",".org",".pa",".pe",".pf",".pg",".ph",".photography",".pk",".pl",".plumbing",".pm",".pn",".post",".pr",".pro",".ps",".pt",".pw",".py",".qa",".re",".ro",".rs",".ru",".rw",".sa",".sb",".sc",".sd",".se",".sexy",".sg",".sh",".si",".singles",".sj",".sk",".sl",".sm",".sn",".so",".sr",".st",".su",".sv",".sx",".sy",".sz",".tattoo",".tc",".td",".technology",".tel",".tf",".tg",".th",".tips",".tj",".tk",".tl",".tm",".tn",".to",".today",".tp",".tr",".travel",".tt",".tv",".tw",".tz",".ua",".ug",".uk",".uno",".us",".uy",".uz",".va",".vc",".ve",".ventures",".vg",".vi",".vn",".voyage",".vu",".wf",".ws",".xn--3e0b707e",".xn--45brj9c",".xn--80ao21a",".xn--80asehdb",".xn--80aswg",".xn--90a3ac",".xn--clchc0ea0b2g2a9gcd",".xn--fiqs8s",".xn--fiqz9s",".xn--fpcrj9c3d",".xn--fzc2c9e2c",".xn--gecrj9c",".xn--h2brj9c",".xn--j1amh",".xn--j6w193g",".xn--kprw13d",".xn--kpry57d",".xn--l1acc",".xn--lgbbat1ad8j",".xn--mgb9awbf",".xn--mgba3a4f16a",".xn--mgbaam7a8h",".xn--mgbayh7gpa",".xn--mgbbh1a71e",".xn--mgbc0a9azcg",".xn--mgberp4a5d4ar",".xn--mgbx4cd0ab",".xn--ngbc5azd",".xn--o3cw4h",".xn--ogbpf8fl",".xn--p1ai",".xn--pgbs0dh",".xn--q9jyb4c",".xn--s9brj9c",".xn--unup4y",".xn--wgbh1c",".xn--wgbl6a",".xn--xkc2al3hye2a",".xn--xkc2dl3a5ee0h",".xn--yfro4i67o",".xn--ygbi2ammx",".xxx",".ye",".yt",".za",".zm",".zw"],ukTopDomains=["co","me","ac","gov","judiciary","ltd","mod","net","nhs","nic","org","parliament","plc","police","sch","bl","british-library","jet","nls"],dot=val.lastIndexOf("."),domain=val.substring(0,dot),ext=val.substring(dot,val.length),hasTopDomain=false;for(var i=0;i<topDomains.length;i++){if(topDomains[i]===ext){if(ext===".uk"){var domainParts=val.split(".");var tld2=domainParts[domainParts.length-2];for(var j=0;j<ukTopDomains.length;j++){if(ukTopDomains[j]===tld2){hasTopDomain=true;break}}if(hasTopDomain)break}else{hasTopDomain=true;break}}}if(!hasTopDomain){return false}else if(dot<2||dot>57){return $.inArray(val,["i.net","q.com","q.net","x.com","x.org","z.com","w.org"])>-1}else{var firstChar=domain.substring(0,1),lastChar=domain.substring(domain.length-1,domain.length);if(firstChar==="-"||firstChar==="."||lastChar==="-"||lastChar==="."){return false}if(domain.split("..").length>1){return false}if(domain.replace(/[-\da-z\.]/g,"")!==""){return false}}if(typeof $input!=="undefined"){$input.val(val)}return true},errorMessage:"",errorMessageKey:"badDomain"});$.formUtils.addValidator({name:"required",validatorFunction:function(val,$el,config,language,$form){switch($el.attr("type")){case"checkbox":return $el.is(":checked");case"radio":return $form.find('input[name="'+$el.attr("name")+'"]').filter(":checked").length>0;default:return $.trim(val)!==""}},errorMessage:"",errorMessageKey:"requiredFields"});$.formUtils.addValidator({name:"length",validatorFunction:function(val,$el,conf,lang){var lengthAllowed=$el.valAttr("length"),type=$el.attr("type");if(lengthAllowed==undefined){var elementType=$el.get(0).nodeName;alert('Please add attribute "data-validation-length" to '+elementType+" named "+$el.attr("name"));return true}var len=type=="file"&&$el.get(0).files!==undefined?$el.get(0).files.length:val.length,lengthCheckResults=$.formUtils.numericRangeCheck(len,lengthAllowed),checkResult;switch(lengthCheckResults[0]){case"out":this.errorMessage=lang.lengthBadStart+lengthAllowed+lang.lengthBadEnd;checkResult=false;break;case"min":this.errorMessage=lang.lengthTooShortStart+lengthCheckResults[1]+lang.lengthBadEnd;checkResult=false;break;case"max":this.errorMessage=lang.lengthTooLongStart+lengthCheckResults[1]+lang.lengthBadEnd;checkResult=false;break;default:checkResult=true}return checkResult},errorMessage:"",errorMessageKey:""});$.formUtils.addValidator({name:"url",validatorFunction:function(url){var urlFilter=/^(https?|ftp):\/\/((((\w|-|\.|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])(\w|-|\.|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])(\w|-|\.|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/(((\w|-|\.|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/((\w|-|\.|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|\[|\]|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#(((\w|-|\.|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i;if(urlFilter.test(url)){var domain=url.split("://")[1];var domainSlashPos=domain.indexOf("/");if(domainSlashPos>-1)domain=domain.substr(0,domainSlashPos);return $.formUtils.validators.validate_domain.validatorFunction(domain)}return false},errorMessage:"",errorMessageKey:"badUrl"});$.formUtils.addValidator({name:"number",validatorFunction:function(val,$el,conf){if(val!==""){var allowing=$el.valAttr("allowing")||"",decimalSeparator=$el.valAttr("decimal-separator")||conf.decimalSeparator,allowsRange=false,begin,end;if(allowing.indexOf("number")==-1)allowing+=",number";if(allowing.indexOf("negative")>-1&&val.indexOf("-")===0){val=val.substr(1)}if(allowing.indexOf("range")>-1){begin=parseFloat(allowing.substring(allowing.indexOf("[")+1,allowing.indexOf(";")));end=parseFloat(allowing.substring(allowing.indexOf(";")+1,allowing.indexOf("]")));allowsRange=true}if(decimalSeparator==","){if(val.indexOf(".")>-1){return false}val=val.replace(",",".")}if(allowing.indexOf("number")>-1&&val.replace(/[0-9]/g,"")===""&&(!allowsRange||val>=begin&&val<=end)){return true}if(allowing.indexOf("float")>-1&&val.match(new RegExp("^([0-9]+)\\.([0-9]+)$"))!==null&&(!allowsRange||val>=begin&&val<=end)){return true}}return false},errorMessage:"",errorMessageKey:"badInt"});$.formUtils.addValidator({name:"alphanumeric",validatorFunction:function(val,$el,conf,language){var patternStart="^([a-zA-Z0-9",patternEnd="]+)$",additionalChars=$el.attr("data-validation-allowing"),pattern="";if(additionalChars){pattern=patternStart+additionalChars+patternEnd;
var extra=additionalChars.replace(/\\/g,"");if(extra.indexOf(" ")>-1){extra=extra.replace(" ","");extra+=" and spaces "}this.errorMessage=language.badAlphaNumeric+language.badAlphaNumericExtra+extra}else{pattern=patternStart+patternEnd;this.errorMessage=language.badAlphaNumeric}return new RegExp(pattern).test(val)},errorMessage:"",errorMessageKey:""});$.formUtils.addValidator({name:"custom",validatorFunction:function(val,$el,conf){var regexp=new RegExp($el.valAttr("regexp"));return regexp.test(val)},errorMessage:"",errorMessageKey:"badCustomVal"});$.formUtils.addValidator({name:"date",validatorFunction:function(date,$el,conf){var dateFormat="yyyy-mm-dd";if($el.valAttr("format")){dateFormat=$el.valAttr("format")}else if(conf.dateFormat){dateFormat=conf.dateFormat}return $.formUtils.parseDate(date,dateFormat)!==false},errorMessage:"",errorMessageKey:"badDate"});$.formUtils.addValidator({name:"checkbox_group",validatorFunction:function(val,$el,conf,lang,$form){var checkResult=true;var elname=$el.attr("name");var checkedCount=$("input[type=checkbox][name^='"+elname+"']:checked",$form).length;var qtyAllowed=$el.valAttr("qty");if(qtyAllowed==undefined){var elementType=$el.get(0).nodeName;alert('Attribute "data-validation-qty" is missing from '+elementType+" named "+$el.attr("name"))}var qtyCheckResults=$.formUtils.numericRangeCheck(checkedCount,qtyAllowed);switch(qtyCheckResults[0]){case"out":this.errorMessage=lang.groupCheckedRangeStart+qtyAllowed+lang.groupCheckedEnd;checkResult=false;break;case"min":this.errorMessage=lang.groupCheckedTooFewStart+qtyCheckResults[1]+lang.groupCheckedEnd;checkResult=false;break;case"max":this.errorMessage=lang.groupCheckedTooManyStart+qtyCheckResults[1]+lang.groupCheckedEnd;checkResult=false;break;default:checkResult=true}return checkResult}})})(jQuery);
(function($){$.formUtils.addValidator({name:"time",validatorFunction:function(time){if(time.match(/^(\d{2}):(\d{2})$/)===null){return false}else{var hours=parseInt(time.split(":")[0],10);var minutes=parseInt(time.split(":")[1],10);if(hours>23||minutes>59){return false}}return true},errorMessage:"",errorMessageKey:"badTime"});$.formUtils.addValidator({name:"birthdate",validatorFunction:function(val,$el,conf){var dateFormat="yyyy-mm-dd";if($el.valAttr("format")){dateFormat=$el.valAttr("format")}else if(typeof conf.dateFormat!="undefined"){dateFormat=conf.dateFormat}var inputDate=$.formUtils.parseDate(val,dateFormat);if(!inputDate){return false}var d=new Date;var currentYear=d.getFullYear();var year=inputDate[0];var month=inputDate[1];var day=inputDate[2];if(year===currentYear){var currentMonth=d.getMonth()+1;if(month===currentMonth){var currentDay=d.getDate();return day<=currentDay}else{return month<currentMonth}}else{return year<currentYear&&year>currentYear-124}},errorMessage:"",errorMessageKey:"badDate"})})(jQuery);
(function($,window){"use strict";$.formUtils.addValidator({name:"spamcheck",validatorFunction:function(val,$el,config){var attr=$el.valAttr("captcha");return attr===val},errorMessage:"",errorMessageKey:"badSecurityAnswer"});$.formUtils.addValidator({name:"confirmation",validatorFunction:function(value,$el,config,language,$form){var conf="",confInputName=$el.valAttr("confirm")||$el.attr("name")+"_confirmation",confInput=$form.find('input[name="'+confInputName+'"]').eq(0);if(confInput){conf=confInput.val()}else{console.warn('Could not find an input with name "'+confInputName+'"')}return value===conf},errorMessage:"",errorMessageKey:"notConfirmed"});$.formUtils.addValidator({name:"creditcard",validatorFunction:function(value,$el,config,language,$form){var cards={amex:[15,15],diners_club:[14,14],cjb:[16,16],laser:[16,19],visa:[16,16],mastercard:[16,16],maestro:[12,19],discover:[16,16]},allowing=$.split($el.valAttr("allowing")||"");if(allowing.length>0){var hasValidLength=false;$.each(allowing,function(i,cardName){if(cardName in cards){if(value.length>=cards[cardName][0]&&value.length<=cards[cardName][1]){hasValidLength=true;return false}}else{console.warn('Use of unknown credit card "'+cardName+'"')}});if(!hasValidLength)return false}if(value.replace(new RegExp("[0-9]","g"),"")!==""){return false}var checkSum=0;$.each(value.split("").reverse(),function(i,digit){digit=parseInt(digit,10);if(i%2===0){checkSum+=digit}else{digit*=2;if(digit<10){checkSum+=digit}else{checkSum+=digit-9}}});return checkSum%10===0},errorMessage:"",errorMessageKey:"badCreditCard"});$.formUtils.addValidator({name:"cvv",validatorFunction:function(val){return val.replace(/[0-9]/g,"")===""&&(val+"").length==3},errorMessage:"",errorMessageKey:"badCVV"});$.formUtils.addValidator({name:"strength",validatorFunction:function(val,$el,conf){var requiredStrength=$el.valAttr("strength");if(requiredStrength&&requiredStrength>3)requiredStrength=3;return $.formUtils.validators.validate_strength.calculatePasswordStrength(val)>=requiredStrength},errorMessage:"",errorMessageKey:"badStrength",calculatePasswordStrength:function(password){if(password.length<4){return 0}var score=0;var checkRepetition=function(pLen,str){var res="";for(var i=0;i<str.length;i++){var repeated=true;for(var j=0;j<pLen&&j+i+pLen<str.length;j++){repeated=repeated&&str.charAt(j+i)==str.charAt(j+i+pLen)}if(j<pLen){repeated=false}if(repeated){i+=pLen-1;repeated=false}else{res+=str.charAt(i)}}return res};score+=password.length*4;score+=(checkRepetition(1,password).length-password.length)*1;score+=(checkRepetition(2,password).length-password.length)*1;score+=(checkRepetition(3,password).length-password.length)*1;score+=(checkRepetition(4,password).length-password.length)*1;if(password.match(/(.*[0-9].*[0-9].*[0-9])/)){score+=5}if(password.match(/(.*[!,@,#,$,%,^,&,*,?,_,~].*[!,@,#,$,%,^,&,*,?,_,~])/)){score+=5}if(password.match(/([a-z].*[A-Z])|([A-Z].*[a-z])/)){score+=10}if(password.match(/([a-zA-Z])/)&&password.match(/([0-9])/)){score+=15}if(password.match(/([!,@,#,$,%,^,&,*,?,_,~])/)&&password.match(/([0-9])/)){score+=15}if(password.match(/([!,@,#,$,%,^,&,*,?,_,~])/)&&password.match(/([a-zA-Z])/)){score+=15}if(password.match(/^\w+$/)||password.match(/^\d+$/)){score-=10}if(score<0){score=0}if(score>100){score=100}if(score<20){return 0}else if(score<40){return 1}else if(score<=60){return 2}else{return 3}},strengthDisplay:function($el,options){var config={fontSize:"12pt",padding:"4px",bad:"Very bad",weak:"Weak",good:"Good",strong:"Strong"};if(options){$.extend(config,options)}$el.bind("keyup",function(){var val=$(this).val();var $parent=typeof config.parent=="undefined"?$(this).parent():$(config.parent);var $displayContainer=$parent.find(".strength-meter");if($displayContainer.length==0){$displayContainer=$("<span></span>");$displayContainer.addClass("strength-meter").appendTo($parent)}if(!val){$displayContainer.hide()}else{$displayContainer.show()}var strength=$.formUtils.validators.validate_strength.calculatePasswordStrength(val);var css={background:"pink",color:"#FF0000",fontWeight:"bold",border:"red solid 1px",borderWidth:"0px 0px 4px",display:"inline-block",fontSize:config.fontSize,padding:config.padding};var text=config.bad;if(strength==1){text=config.weak}else if(strength==2){css.background="lightyellow";css.borderColor="yellow";css.color="goldenrod";text=config.good}else if(strength>=3){css.background="lightgreen";css.borderColor="darkgreen";css.color="darkgreen";text=config.strong}$displayContainer.css(css).text(text)})}});var requestServer=function(serverURL,$element,val,conf,callback){$.ajax({url:serverURL,type:"POST",cache:false,data:$element.attr("name")+"="+val,dataType:"json",error:function(error){alert("Server validation failed due to: "+error.statusText);if(window.JSON&&window.JSON.stringify){alert(window.JSON.stringify(error))}},success:function(response){if(response.valid){$element.valAttr("backend-valid","true")}else{$element.valAttr("backend-invalid","true");if(response.message)$element.attr(conf.validationErrorMsgAttribute,response.message);else $element.removeAttr(conf.validationErrorMsgAttribute)}if(!$element.valAttr("has-keyup-event")){$element.valAttr("has-keyup-event","1").bind("keyup",function(evt){if(evt.keyCode!=9&&evt.keyCode!=16){$(this).valAttr("backend-valid",false).valAttr("backend-invalid",false).removeAttr(conf.validationErrorMsgAttribute)}})}callback()}})},disableFormSubmit=function(){return false};$.formUtils.addValidator({name:"server",validatorFunction:function(val,$el,conf,lang,$form){var backendValid=$el.valAttr("backend-valid"),backendInvalid=$el.valAttr("backend-invalid"),serverURL=document.location.href;if($el.valAttr("url")){serverURL=$el.valAttr("url")}else if("serverURL"in conf){serverURL=conf.backendUrl}if(backendValid)return true;else if(backendInvalid)return false;if($.formUtils.isValidatingEntireForm){$form.bind("submit",disableFormSubmit).addClass("validating-server-side").addClass("on-blur");$el.addClass("validating-server-side");requestServer(serverURL,$el,val,conf,function(){$form.removeClass("validating-server-side").removeClass("on-blur").get(0).onsubmit=function(){};$form.unbind("submit",disableFormSubmit);$el.removeClass("validating-server-side");$form.trigger("submit")});$.formUtils.haltValidation=true;return false}else{$form.addClass("validating-server-side");$el.addClass("validating-server-side");requestServer(serverURL,$el,val,conf,function(){$form.removeClass("validating-server-side");$el.removeClass("validating-server-side");$el.trigger("blur")});return true}},errorMessage:"",errorMessageKey:"badBackend",validateOnKeyUp:false});$.fn.displayPasswordStrength=function(conf){new $.formUtils.validators.validate_strength.strengthDisplay(this,conf);return this}})(jQuery,window);
// VERSION: 2.3 LAST UPDATE: 11.07.2013
/* 
 * Licensed under the MIT license: http://www.opensource.org/licenses/mit-license.php
 * 
 * Made by Wilq32, wilq32@gmail.com, Wroclaw, Poland, 01.2009
 * Website: http://code.google.com/p/jqueryrotate/ 
 */
(function(k){for(var d,f,l=document.getElementsByTagName("head")[0].style,h=["transformProperty","WebkitTransform","OTransform","msTransform","MozTransform"],g=0;g<h.length;g++)void 0!==l[h[g]]&&(d=h[g]);d&&(f=d.replace(/[tT]ransform/,"TransformOrigin"),"T"==f[0]&&(f[0]="t"));eval('IE = "v"=="\v"');jQuery.fn.extend({rotate:function(a){if(0!==this.length&&"undefined"!=typeof a){"number"==typeof a&&(a={angle:a});for(var b=[],c=0,d=this.length;c<d;c++){var e=this.get(c);if(e.Wilq32&&e.Wilq32.PhotoEffect)e.Wilq32.PhotoEffect._handleRotation(a);
else{var f=k.extend(!0,{},a),e=(new Wilq32.PhotoEffect(e,f))._rootObj;b.push(k(e))}}return b}},getRotateAngle:function(){for(var a=[],b=0,c=this.length;b<c;b++){var d=this.get(b);d.Wilq32&&d.Wilq32.PhotoEffect&&(a[b]=d.Wilq32.PhotoEffect._angle)}return a},stopRotate:function(){for(var a=0,b=this.length;a<b;a++){var c=this.get(a);c.Wilq32&&c.Wilq32.PhotoEffect&&clearTimeout(c.Wilq32.PhotoEffect._timer)}}});Wilq32=window.Wilq32||{};Wilq32.PhotoEffect=function(){return d?function(a,b){a.Wilq32={PhotoEffect:this};
this._img=this._rootObj=this._eventObj=a;this._handleRotation(b)}:function(a,b){this._img=a;this._onLoadDelegate=[b];this._rootObj=document.createElement("span");this._rootObj.style.display="inline-block";this._rootObj.Wilq32={PhotoEffect:this};a.parentNode.insertBefore(this._rootObj,a);if(a.complete)this._Loader();else{var c=this;jQuery(this._img).bind("load",function(){c._Loader()})}}}();Wilq32.PhotoEffect.prototype={_setupParameters:function(a){this._parameters=this._parameters||{};"number"!==
typeof this._angle&&(this._angle=0);"number"===typeof a.angle&&(this._angle=a.angle);this._parameters.animateTo="number"===typeof a.animateTo?a.animateTo:this._angle;this._parameters.step=a.step||this._parameters.step||null;this._parameters.easing=a.easing||this._parameters.easing||this._defaultEasing;this._parameters.duration=a.duration||this._parameters.duration||1E3;this._parameters.callback=a.callback||this._parameters.callback||this._emptyFunction;this._parameters.center=a.center||this._parameters.center||
["50%","50%"];this._rotationCenterX="string"==typeof this._parameters.center[0]?parseInt(this._parameters.center[0],10)/100*this._imgWidth*this._aspectW:this._parameters.center[0];this._rotationCenterY="string"==typeof this._parameters.center[1]?parseInt(this._parameters.center[1],10)/100*this._imgHeight*this._aspectH:this._parameters.center[1];a.bind&&a.bind!=this._parameters.bind&&this._BindEvents(a.bind)},_emptyFunction:function(){},_defaultEasing:function(a,b,c,d,e){return-d*((b=b/e-1)*b*b*b-
1)+c},_handleRotation:function(a,b){d||this._img.complete||b?(this._setupParameters(a),this._angle==this._parameters.animateTo?this._rotate(this._angle):this._animateStart()):this._onLoadDelegate.push(a)},_BindEvents:function(a){if(a&&this._eventObj){if(this._parameters.bind){var b=this._parameters.bind,c;for(c in b)b.hasOwnProperty(c)&&jQuery(this._eventObj).unbind(c,b[c])}this._parameters.bind=a;for(c in a)a.hasOwnProperty(c)&&jQuery(this._eventObj).bind(c,a[c])}},_Loader:function(){return IE?function(){var a=
this._img.width,b=this._img.height;this._imgWidth=a;this._imgHeight=b;this._img.parentNode.removeChild(this._img);this._vimage=this.createVMLNode("image");this._vimage.src=this._img.src;this._vimage.style.height=b+"px";this._vimage.style.width=a+"px";this._vimage.style.position="absolute";this._vimage.style.top="0px";this._vimage.style.left="0px";this._aspectW=this._aspectH=1;this._container=this.createVMLNode("group");this._container.style.width=a;this._container.style.height=b;this._container.style.position=
"absolute";this._container.style.top="0px";this._container.style.left="0px";this._container.setAttribute("coordsize",a-1+","+(b-1));this._container.appendChild(this._vimage);this._rootObj.appendChild(this._container);this._rootObj.style.position="relative";this._rootObj.style.width=a+"px";this._rootObj.style.height=b+"px";this._rootObj.setAttribute("id",this._img.getAttribute("id"));this._rootObj.className=this._img.className;for(this._eventObj=this._rootObj;a=this._onLoadDelegate.shift();)this._handleRotation(a,
!0)}:function(){this._rootObj.setAttribute("id",this._img.getAttribute("id"));this._rootObj.className=this._img.className;this._imgWidth=this._img.naturalWidth;this._imgHeight=this._img.naturalHeight;var a=Math.sqrt(this._imgHeight*this._imgHeight+this._imgWidth*this._imgWidth);this._width=3*a;this._height=3*a;this._aspectW=this._img.offsetWidth/this._img.naturalWidth;this._aspectH=this._img.offsetHeight/this._img.naturalHeight;this._img.parentNode.removeChild(this._img);this._canvas=document.createElement("canvas");
this._canvas.setAttribute("width",this._width);this._canvas.style.position="relative";this._canvas.style.left=-this._img.height*this._aspectW+"px";this._canvas.style.top=-this._img.width*this._aspectH+"px";this._canvas.Wilq32=this._rootObj.Wilq32;this._rootObj.appendChild(this._canvas);this._rootObj.style.width=this._img.width*this._aspectW+"px";this._rootObj.style.height=this._img.height*this._aspectH+"px";this._eventObj=this._canvas;for(this._cnv=this._canvas.getContext("2d");a=this._onLoadDelegate.shift();)this._handleRotation(a,
!0)}}(),_animateStart:function(){this._timer&&clearTimeout(this._timer);this._animateStartTime=+new Date;this._animateStartAngle=this._angle;this._animate()},_animate:function(){var a=+new Date,b=a-this._animateStartTime>this._parameters.duration;if(b&&!this._parameters.animatedGif)clearTimeout(this._timer);else{if(this._canvas||this._vimage||this._img)a=this._parameters.easing(0,a-this._animateStartTime,this._animateStartAngle,this._parameters.animateTo-this._animateStartAngle,this._parameters.duration),
this._rotate(~~(10*a)/10);this._parameters.step&&this._parameters.step(this._angle);var c=this;this._timer=setTimeout(function(){c._animate.call(c)},10)}this._parameters.callback&&b&&(this._angle=this._parameters.animateTo,this._rotate(this._angle),this._parameters.callback.call(this._rootObj))},_rotate:function(){var a=Math.PI/180;return IE?function(a){this._angle=a;this._container.style.rotation=a%360+"deg";this._vimage.style.top=-(this._rotationCenterY-this._imgHeight/2)+"px";this._vimage.style.left=
-(this._rotationCenterX-this._imgWidth/2)+"px";this._container.style.top=this._rotationCenterY-this._imgHeight/2+"px";this._container.style.left=this._rotationCenterX-this._imgWidth/2+"px"}:d?function(a){this._angle=a;this._img.style[d]="rotate("+a%360+"deg)";this._img.style[f]=this._parameters.center.join(" ")}:function(b){this._angle=b;b=b%360*a;this._canvas.width=this._width;this._canvas.height=this._height;this._cnv.translate(this._imgWidth*this._aspectW,this._imgHeight*this._aspectH);this._cnv.translate(this._rotationCenterX,
this._rotationCenterY);this._cnv.rotate(b);this._cnv.translate(-this._rotationCenterX,-this._rotationCenterY);this._cnv.scale(this._aspectW,this._aspectH);this._cnv.drawImage(this._img,0,0)}}()};IE&&(Wilq32.PhotoEffect.prototype.createVMLNode=function(){document.createStyleSheet().addRule(".rvml","behavior:url(#default#VML)");try{return!document.namespaces.rvml&&document.namespaces.add("rvml","urn:schemas-microsoft-com:vml"),function(a){return document.createElement("<rvml:"+a+' class="rvml">')}}catch(a){return function(a){return document.createElement("<"+
a+' xmlns="urn:schemas-microsoft.com:vml" class="rvml">')}}}())})(jQuery);

!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var f;"undefined"!=typeof window?f=window:"undefined"!=typeof global?f=global:"undefined"!=typeof self&&(f=self),f.io=e()}}(function(){var define,module,exports;return function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);throw new Error("Cannot find module '"+o+"'")}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return s(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s}({1:[function(_dereq_,module,exports){module.exports=_dereq_("./lib/")},{"./lib/":2}],2:[function(_dereq_,module,exports){var url=_dereq_("./url");var parser=_dereq_("socket.io-parser");var Manager=_dereq_("./manager");var debug=_dereq_("debug")("socket.io-client");module.exports=exports=lookup;var cache=exports.managers={};function lookup(uri,opts){if(typeof uri=="object"){opts=uri;uri=undefined}opts=opts||{};var parsed=url(uri);var source=parsed.source;var id=parsed.id;var io;if(opts.forceNew||opts["force new connection"]||false===opts.multiplex){debug("ignoring socket cache for %s",source);io=Manager(source,opts)}else{if(!cache[id]){debug("new io instance for %s",source);cache[id]=Manager(source,opts)}io=cache[id]}return io.socket(parsed.path)}exports.protocol=parser.protocol;exports.connect=lookup;exports.Manager=_dereq_("./manager");exports.Socket=_dereq_("./socket")},{"./manager":3,"./socket":5,"./url":6,debug:10,"socket.io-parser":46}],3:[function(_dereq_,module,exports){var url=_dereq_("./url");var eio=_dereq_("engine.io-client");var Socket=_dereq_("./socket");var Emitter=_dereq_("component-emitter");var parser=_dereq_("socket.io-parser");var on=_dereq_("./on");var bind=_dereq_("component-bind");var object=_dereq_("object-component");var debug=_dereq_("debug")("socket.io-client:manager");var indexOf=_dereq_("indexof");var Backoff=_dereq_("backo2");module.exports=Manager;function Manager(uri,opts){if(!(this instanceof Manager))return new Manager(uri,opts);if(uri&&"object"==typeof uri){opts=uri;uri=undefined}opts=opts||{};opts.path=opts.path||"/socket.io";this.nsps={};this.subs=[];this.opts=opts;this.reconnection(opts.reconnection!==false);this.reconnectionAttempts(opts.reconnectionAttempts||Infinity);this.reconnectionDelay(opts.reconnectionDelay||1e3);this.reconnectionDelayMax(opts.reconnectionDelayMax||5e3);this.randomizationFactor(opts.randomizationFactor||.5);this.backoff=new Backoff({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()});this.timeout(null==opts.timeout?2e4:opts.timeout);this.readyState="closed";this.uri=uri;this.connected=[];this.encoding=false;this.packetBuffer=[];this.encoder=new parser.Encoder;this.decoder=new parser.Decoder;this.autoConnect=opts.autoConnect!==false;if(this.autoConnect)this.open()}Manager.prototype.emitAll=function(){this.emit.apply(this,arguments);for(var nsp in this.nsps){this.nsps[nsp].emit.apply(this.nsps[nsp],arguments)}};Manager.prototype.updateSocketIds=function(){for(var nsp in this.nsps){this.nsps[nsp].id=this.engine.id}};Emitter(Manager.prototype);Manager.prototype.reconnection=function(v){if(!arguments.length)return this._reconnection;this._reconnection=!!v;return this};Manager.prototype.reconnectionAttempts=function(v){if(!arguments.length)return this._reconnectionAttempts;this._reconnectionAttempts=v;return this};Manager.prototype.reconnectionDelay=function(v){if(!arguments.length)return this._reconnectionDelay;this._reconnectionDelay=v;this.backoff&&this.backoff.setMin(v);return this};Manager.prototype.randomizationFactor=function(v){if(!arguments.length)return this._randomizationFactor;this._randomizationFactor=v;this.backoff&&this.backoff.setJitter(v);return this};Manager.prototype.reconnectionDelayMax=function(v){if(!arguments.length)return this._reconnectionDelayMax;this._reconnectionDelayMax=v;this.backoff&&this.backoff.setMax(v);return this};Manager.prototype.timeout=function(v){if(!arguments.length)return this._timeout;this._timeout=v;return this};Manager.prototype.maybeReconnectOnOpen=function(){if(!this.reconnecting&&this._reconnection&&this.backoff.attempts===0){this.reconnect()}};Manager.prototype.open=Manager.prototype.connect=function(fn){debug("readyState %s",this.readyState);if(~this.readyState.indexOf("open"))return this;debug("opening %s",this.uri);this.engine=eio(this.uri,this.opts);var socket=this.engine;var self=this;this.readyState="opening";this.skipReconnect=false;var openSub=on(socket,"open",function(){self.onopen();fn&&fn()});var errorSub=on(socket,"error",function(data){debug("connect_error");self.cleanup();self.readyState="closed";self.emitAll("connect_error",data);if(fn){var err=new Error("Connection error");err.data=data;fn(err)}else{self.maybeReconnectOnOpen()}});if(false!==this._timeout){var timeout=this._timeout;debug("connect attempt will timeout after %d",timeout);var timer=setTimeout(function(){debug("connect attempt timed out after %d",timeout);openSub.destroy();socket.close();socket.emit("error","timeout");self.emitAll("connect_timeout",timeout)},timeout);this.subs.push({destroy:function(){clearTimeout(timer)}})}this.subs.push(openSub);this.subs.push(errorSub);return this};Manager.prototype.onopen=function(){debug("open");this.cleanup();this.readyState="open";this.emit("open");var socket=this.engine;this.subs.push(on(socket,"data",bind(this,"ondata")));this.subs.push(on(this.decoder,"decoded",bind(this,"ondecoded")));this.subs.push(on(socket,"error",bind(this,"onerror")));this.subs.push(on(socket,"close",bind(this,"onclose")))};Manager.prototype.ondata=function(data){this.decoder.add(data)};Manager.prototype.ondecoded=function(packet){this.emit("packet",packet)};Manager.prototype.onerror=function(err){debug("error",err);this.emitAll("error",err)};Manager.prototype.socket=function(nsp){var socket=this.nsps[nsp];if(!socket){socket=new Socket(this,nsp);this.nsps[nsp]=socket;var self=this;socket.on("connect",function(){socket.id=self.engine.id;if(!~indexOf(self.connected,socket)){self.connected.push(socket)}})}return socket};Manager.prototype.destroy=function(socket){var index=indexOf(this.connected,socket);if(~index)this.connected.splice(index,1);if(this.connected.length)return;this.close()};Manager.prototype.packet=function(packet){debug("writing packet %j",packet);var self=this;if(!self.encoding){self.encoding=true;this.encoder.encode(packet,function(encodedPackets){for(var i=0;i<encodedPackets.length;i++){self.engine.write(encodedPackets[i])}self.encoding=false;self.processPacketQueue()})}else{self.packetBuffer.push(packet)}};Manager.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var pack=this.packetBuffer.shift();this.packet(pack)}};Manager.prototype.cleanup=function(){var sub;while(sub=this.subs.shift())sub.destroy();this.packetBuffer=[];this.encoding=false;this.decoder.destroy()};Manager.prototype.close=Manager.prototype.disconnect=function(){this.skipReconnect=true;this.backoff.reset();this.readyState="closed";this.engine&&this.engine.close()};Manager.prototype.onclose=function(reason){debug("close");this.cleanup();this.backoff.reset();this.readyState="closed";this.emit("close",reason);if(this._reconnection&&!this.skipReconnect){this.reconnect()}};Manager.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var self=this;if(this.backoff.attempts>=this._reconnectionAttempts){debug("reconnect failed");this.backoff.reset();this.emitAll("reconnect_failed");this.reconnecting=false}else{var delay=this.backoff.duration();debug("will wait %dms before reconnect attempt",delay);this.reconnecting=true;var timer=setTimeout(function(){if(self.skipReconnect)return;debug("attempting reconnect");self.emitAll("reconnect_attempt",self.backoff.attempts);self.emitAll("reconnecting",self.backoff.attempts);if(self.skipReconnect)return;self.open(function(err){if(err){debug("reconnect attempt error");self.reconnecting=false;self.reconnect();self.emitAll("reconnect_error",err.data)}else{debug("reconnect success");self.onreconnect()}})},delay);this.subs.push({destroy:function(){clearTimeout(timer)}})}};Manager.prototype.onreconnect=function(){var attempt=this.backoff.attempts;this.reconnecting=false;this.backoff.reset();this.updateSocketIds();this.emitAll("reconnect",attempt)}},{"./on":4,"./socket":5,"./url":6,backo2:7,"component-bind":8,"component-emitter":9,debug:10,"engine.io-client":11,indexof:42,"object-component":43,"socket.io-parser":46}],4:[function(_dereq_,module,exports){module.exports=on;function on(obj,ev,fn){obj.on(ev,fn);return{destroy:function(){obj.removeListener(ev,fn)}}}},{}],5:[function(_dereq_,module,exports){var parser=_dereq_("socket.io-parser");var Emitter=_dereq_("component-emitter");var toArray=_dereq_("to-array");var on=_dereq_("./on");var bind=_dereq_("component-bind");var debug=_dereq_("debug")("socket.io-client:socket");var hasBin=_dereq_("has-binary");module.exports=exports=Socket;var events={connect:1,connect_error:1,connect_timeout:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1};var emit=Emitter.prototype.emit;function Socket(io,nsp){this.io=io;this.nsp=nsp;this.json=this;this.ids=0;this.acks={};if(this.io.autoConnect)this.open();this.receiveBuffer=[];this.sendBuffer=[];this.connected=false;this.disconnected=true}Emitter(Socket.prototype);Socket.prototype.subEvents=function(){if(this.subs)return;var io=this.io;this.subs=[on(io,"open",bind(this,"onopen")),on(io,"packet",bind(this,"onpacket")),on(io,"close",bind(this,"onclose"))]};Socket.prototype.open=Socket.prototype.connect=function(){if(this.connected)return this;this.subEvents();this.io.open();if("open"==this.io.readyState)this.onopen();return this};Socket.prototype.send=function(){var args=toArray(arguments);args.unshift("message");this.emit.apply(this,args);return this};Socket.prototype.emit=function(ev){if(events.hasOwnProperty(ev)){emit.apply(this,arguments);return this}var args=toArray(arguments);var parserType=parser.EVENT;if(hasBin(args)){parserType=parser.BINARY_EVENT}var packet={type:parserType,data:args};if("function"==typeof args[args.length-1]){debug("emitting packet with ack id %d",this.ids);this.acks[this.ids]=args.pop();packet.id=this.ids++}if(this.connected){this.packet(packet)}else{this.sendBuffer.push(packet)}return this};Socket.prototype.packet=function(packet){packet.nsp=this.nsp;this.io.packet(packet)};Socket.prototype.onopen=function(){debug("transport is open - connecting");if("/"!=this.nsp){this.packet({type:parser.CONNECT})}};Socket.prototype.onclose=function(reason){debug("close (%s)",reason);this.connected=false;this.disconnected=true;delete this.id;this.emit("disconnect",reason)};Socket.prototype.onpacket=function(packet){if(packet.nsp!=this.nsp)return;switch(packet.type){case parser.CONNECT:this.onconnect();break;case parser.EVENT:this.onevent(packet);break;case parser.BINARY_EVENT:this.onevent(packet);break;case parser.ACK:this.onack(packet);break;case parser.BINARY_ACK:this.onack(packet);break;case parser.DISCONNECT:this.ondisconnect();break;case parser.ERROR:this.emit("error",packet.data);break}};Socket.prototype.onevent=function(packet){var args=packet.data||[];debug("emitting event %j",args);if(null!=packet.id){debug("attaching ack callback to event");args.push(this.ack(packet.id))}if(this.connected){emit.apply(this,args)}else{this.receiveBuffer.push(args)}};Socket.prototype.ack=function(id){var self=this;var sent=false;return function(){if(sent)return;sent=true;var args=toArray(arguments);debug("sending ack %j",args);var type=hasBin(args)?parser.BINARY_ACK:parser.ACK;self.packet({type:type,id:id,data:args})}};Socket.prototype.onack=function(packet){debug("calling ack %s with %j",packet.id,packet.data);var fn=this.acks[packet.id];fn.apply(this,packet.data);delete this.acks[packet.id]};Socket.prototype.onconnect=function(){this.connected=true;this.disconnected=false;this.emit("connect");this.emitBuffered()};Socket.prototype.emitBuffered=function(){var i;for(i=0;i<this.receiveBuffer.length;i++){emit.apply(this,this.receiveBuffer[i])}this.receiveBuffer=[];for(i=0;i<this.sendBuffer.length;i++){this.packet(this.sendBuffer[i])}this.sendBuffer=[]};Socket.prototype.ondisconnect=function(){debug("server disconnect (%s)",this.nsp);this.destroy();this.onclose("io server disconnect")};Socket.prototype.destroy=function(){if(this.subs){for(var i=0;i<this.subs.length;i++){this.subs[i].destroy()}this.subs=null}this.io.destroy(this)};Socket.prototype.close=Socket.prototype.disconnect=function(){if(this.connected){debug("performing disconnect (%s)",this.nsp);this.packet({type:parser.DISCONNECT})}this.destroy();if(this.connected){this.onclose("io client disconnect")}return this}},{"./on":4,"component-bind":8,"component-emitter":9,debug:10,"has-binary":38,"socket.io-parser":46,"to-array":50}],6:[function(_dereq_,module,exports){(function(global){var parseuri=_dereq_("parseuri");var debug=_dereq_("debug")("socket.io-client:url");module.exports=url;function url(uri,loc){var obj=uri;var loc=loc||global.location;if(null==uri)uri=loc.protocol+"//"+loc.host;if("string"==typeof uri){if("/"==uri.charAt(0)){if("/"==uri.charAt(1)){uri=loc.protocol+uri}else{uri=loc.hostname+uri}}if(!/^(https?|wss?):\/\//.test(uri)){debug("protocol-less url %s",uri);if("undefined"!=typeof loc){uri=loc.protocol+"//"+uri}else{uri="https://"+uri}}debug("parse %s",uri);obj=parseuri(uri)}if(!obj.port){if(/^(http|ws)$/.test(obj.protocol)){obj.port="80"}else if(/^(http|ws)s$/.test(obj.protocol)){obj.port="443"}}obj.path=obj.path||"/";obj.id=obj.protocol+"://"+obj.host+":"+obj.port;obj.href=obj.protocol+"://"+obj.host+(loc&&loc.port==obj.port?"":":"+obj.port);return obj}}).call(this,typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{debug:10,parseuri:44}],7:[function(_dereq_,module,exports){module.exports=Backoff;function Backoff(opts){opts=opts||{};this.ms=opts.min||100;this.max=opts.max||1e4;this.factor=opts.factor||2;this.jitter=opts.jitter>0&&opts.jitter<=1?opts.jitter:0;this.attempts=0}Backoff.prototype.duration=function(){var ms=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var rand=Math.random();var deviation=Math.floor(rand*this.jitter*ms);ms=(Math.floor(rand*10)&1)==0?ms-deviation:ms+deviation}return Math.min(ms,this.max)|0};Backoff.prototype.reset=function(){this.attempts=0};Backoff.prototype.setMin=function(min){this.ms=min};Backoff.prototype.setMax=function(max){this.max=max};Backoff.prototype.setJitter=function(jitter){this.jitter=jitter}},{}],8:[function(_dereq_,module,exports){var slice=[].slice;module.exports=function(obj,fn){if("string"==typeof fn)fn=obj[fn];if("function"!=typeof fn)throw new Error("bind() requires a function");var args=slice.call(arguments,2);return function(){return fn.apply(obj,args.concat(slice.call(arguments)))}}},{}],9:[function(_dereq_,module,exports){module.exports=Emitter;function Emitter(obj){if(obj)return mixin(obj)}function mixin(obj){for(var key in Emitter.prototype){obj[key]=Emitter.prototype[key]}return obj}Emitter.prototype.on=Emitter.prototype.addEventListener=function(event,fn){this._callbacks=this._callbacks||{};(this._callbacks[event]=this._callbacks[event]||[]).push(fn);return this};Emitter.prototype.once=function(event,fn){var self=this;this._callbacks=this._callbacks||{};function on(){self.off(event,on);fn.apply(this,arguments)}on.fn=fn;this.on(event,on);return this};Emitter.prototype.off=Emitter.prototype.removeListener=Emitter.prototype.removeAllListeners=Emitter.prototype.removeEventListener=function(event,fn){this._callbacks=this._callbacks||{};if(0==arguments.length){this._callbacks={};return this}var callbacks=this._callbacks[event];if(!callbacks)return this;if(1==arguments.length){delete this._callbacks[event];return this}var cb;for(var i=0;i<callbacks.length;i++){cb=callbacks[i];if(cb===fn||cb.fn===fn){callbacks.splice(i,1);break}}return this};Emitter.prototype.emit=function(event){this._callbacks=this._callbacks||{};var args=[].slice.call(arguments,1),callbacks=this._callbacks[event];if(callbacks){callbacks=callbacks.slice(0);for(var i=0,len=callbacks.length;i<len;++i){callbacks[i].apply(this,args)}}return this};Emitter.prototype.listeners=function(event){this._callbacks=this._callbacks||{};return this._callbacks[event]||[]};Emitter.prototype.hasListeners=function(event){return!!this.listeners(event).length}},{}],10:[function(_dereq_,module,exports){module.exports=debug;function debug(name){if(!debug.enabled(name))return function(){};return function(fmt){fmt=coerce(fmt);var curr=new Date;var ms=curr-(debug[name]||curr);debug[name]=curr;fmt=name+" "+fmt+" +"+debug.humanize(ms);window.console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}}debug.names=[];debug.skips=[];debug.enable=function(name){try{localStorage.debug=name}catch(e){}var split=(name||"").split(/[\s,]+/),len=split.length;for(var i=0;i<len;i++){name=split[i].replace("*",".*?");if(name[0]==="-"){debug.skips.push(new RegExp("^"+name.substr(1)+"$"))}else{debug.names.push(new RegExp("^"+name+"$"))}}};debug.disable=function(){debug.enable("")};debug.humanize=function(ms){var sec=1e3,min=60*1e3,hour=60*min;if(ms>=hour)return(ms/hour).toFixed(1)+"h";if(ms>=min)return(ms/min).toFixed(1)+"m";if(ms>=sec)return(ms/sec|0)+"s";return ms+"ms"};debug.enabled=function(name){for(var i=0,len=debug.skips.length;i<len;i++){if(debug.skips[i].test(name)){return false}}for(var i=0,len=debug.names.length;i<len;i++){if(debug.names[i].test(name)){return true}}return false};function coerce(val){if(val instanceof Error)return val.stack||val.message;return val}try{if(window.localStorage)debug.enable(localStorage.debug)}catch(e){}},{}],11:[function(_dereq_,module,exports){module.exports=_dereq_("./lib/")},{"./lib/":12}],12:[function(_dereq_,module,exports){module.exports=_dereq_("./socket");module.exports.parser=_dereq_("engine.io-parser")},{"./socket":13,"engine.io-parser":25}],13:[function(_dereq_,module,exports){(function(global){var transports=_dereq_("./transports");var Emitter=_dereq_("component-emitter");var debug=_dereq_("debug")("engine.io-client:socket");var index=_dereq_("indexof");var parser=_dereq_("engine.io-parser");var parseuri=_dereq_("parseuri");var parsejson=_dereq_("parsejson");var parseqs=_dereq_("parseqs");module.exports=Socket;function noop(){}function Socket(uri,opts){if(!(this instanceof Socket))return new Socket(uri,opts);opts=opts||{};if(uri&&"object"==typeof uri){opts=uri;uri=null}if(uri){uri=parseuri(uri);opts.host=uri.host;opts.secure=uri.protocol=="https"||uri.protocol=="wss";opts.port=uri.port;if(uri.query)opts.query=uri.query}this.secure=null!=opts.secure?opts.secure:global.location&&"https:"==location.protocol;if(opts.host){var pieces=opts.host.split(":");opts.hostname=pieces.shift();if(pieces.length){opts.port=pieces.pop()}else if(!opts.port){opts.port=this.secure?"443":"80"}}this.agent=opts.agent||false;this.hostname=opts.hostname||(global.location?location.hostname:"localhost");this.port=opts.port||(global.location&&location.port?location.port:this.secure?443:80);this.query=opts.query||{};if("string"==typeof this.query)this.query=parseqs.decode(this.query);this.upgrade=false!==opts.upgrade;this.path=(opts.path||"/engine.io").replace(/\/$/,"")+"/";this.forceJSONP=!!opts.forceJSONP;this.jsonp=false!==opts.jsonp;this.forceBase64=!!opts.forceBase64;this.enablesXDR=!!opts.enablesXDR;this.timestampParam=opts.timestampParam||"t";this.timestampRequests=opts.timestampRequests;this.transports=opts.transports||["polling","websocket"];this.readyState="";this.writeBuffer=[];this.callbackBuffer=[];this.policyPort=opts.policyPort||843;this.rememberUpgrade=opts.rememberUpgrade||false;this.binaryType=null;this.onlyBinaryUpgrades=opts.onlyBinaryUpgrades;this.pfx=opts.pfx||null;this.key=opts.key||null;this.passphrase=opts.passphrase||null;this.cert=opts.cert||null;this.ca=opts.ca||null;this.ciphers=opts.ciphers||null;this.rejectUnauthorized=opts.rejectUnauthorized||null;this.open()}Socket.priorWebsocketSuccess=false;Emitter(Socket.prototype);Socket.protocol=parser.protocol;Socket.Socket=Socket;Socket.Transport=_dereq_("./transport");Socket.transports=_dereq_("./transports");Socket.parser=_dereq_("engine.io-parser");Socket.prototype.createTransport=function(name){debug('creating transport "%s"',name);var query=clone(this.query);query.EIO=parser.protocol;query.transport=name;if(this.id)query.sid=this.id;var transport=new transports[name]({agent:this.agent,hostname:this.hostname,port:this.port,secure:this.secure,path:this.path,query:query,forceJSONP:this.forceJSONP,jsonp:this.jsonp,forceBase64:this.forceBase64,enablesXDR:this.enablesXDR,timestampRequests:this.timestampRequests,timestampParam:this.timestampParam,policyPort:this.policyPort,socket:this,pfx:this.pfx,key:this.key,passphrase:this.passphrase,cert:this.cert,ca:this.ca,ciphers:this.ciphers,rejectUnauthorized:this.rejectUnauthorized});return transport};function clone(obj){var o={};for(var i in obj){if(obj.hasOwnProperty(i)){o[i]=obj[i]}}return o}Socket.prototype.open=function(){var transport;if(this.rememberUpgrade&&Socket.priorWebsocketSuccess&&this.transports.indexOf("websocket")!=-1){transport="websocket"}else if(0==this.transports.length){var self=this;setTimeout(function(){self.emit("error","No transports available")},0);return}else{transport=this.transports[0]}this.readyState="opening";var transport;try{transport=this.createTransport(transport)}catch(e){this.transports.shift();this.open();return}transport.open();this.setTransport(transport)};Socket.prototype.setTransport=function(transport){debug("setting transport %s",transport.name);var self=this;if(this.transport){debug("clearing existing transport %s",this.transport.name);this.transport.removeAllListeners()}this.transport=transport;transport.on("drain",function(){self.onDrain()}).on("packet",function(packet){self.onPacket(packet)}).on("error",function(e){self.onError(e)}).on("close",function(){self.onClose("transport close")})};Socket.prototype.probe=function(name){debug('probing transport "%s"',name);var transport=this.createTransport(name,{probe:1}),failed=false,self=this;Socket.priorWebsocketSuccess=false;function onTransportOpen(){if(self.onlyBinaryUpgrades){var upgradeLosesBinary=!this.supportsBinary&&self.transport.supportsBinary;failed=failed||upgradeLosesBinary}if(failed)return;debug('probe transport "%s" opened',name);transport.send([{type:"ping",data:"probe"}]);transport.once("packet",function(msg){if(failed)return;if("pong"==msg.type&&"probe"==msg.data){debug('probe transport "%s" pong',name);self.upgrading=true;self.emit("upgrading",transport);if(!transport)return;Socket.priorWebsocketSuccess="websocket"==transport.name;debug('pausing current transport "%s"',self.transport.name);self.transport.pause(function(){if(failed)return;if("closed"==self.readyState)return;debug("changing transport and sending upgrade packet");cleanup();self.setTransport(transport);transport.send([{type:"upgrade"}]);self.emit("upgrade",transport);transport=null;self.upgrading=false;self.flush()})}else{debug('probe transport "%s" failed',name);var err=new Error("probe error");err.transport=transport.name;self.emit("upgradeError",err)}})}function freezeTransport(){if(failed)return;failed=true;cleanup();transport.close();transport=null}function onerror(err){var error=new Error("probe error: "+err);error.transport=transport.name;freezeTransport();debug('probe transport "%s" failed because of error: %s',name,err);self.emit("upgradeError",error)}function onTransportClose(){onerror("transport closed")}function onclose(){onerror("socket closed")}function onupgrade(to){if(transport&&to.name!=transport.name){debug('"%s" works - aborting "%s"',to.name,transport.name);freezeTransport()}}function cleanup(){transport.removeListener("open",onTransportOpen);transport.removeListener("error",onerror);transport.removeListener("close",onTransportClose);self.removeListener("close",onclose);self.removeListener("upgrading",onupgrade)}transport.once("open",onTransportOpen);transport.once("error",onerror);transport.once("close",onTransportClose);this.once("close",onclose);this.once("upgrading",onupgrade);transport.open()};Socket.prototype.onOpen=function(){debug("socket open");this.readyState="open";Socket.priorWebsocketSuccess="websocket"==this.transport.name;this.emit("open");this.flush();if("open"==this.readyState&&this.upgrade&&this.transport.pause){debug("starting upgrade probes");for(var i=0,l=this.upgrades.length;i<l;i++){this.probe(this.upgrades[i])}}};Socket.prototype.onPacket=function(packet){if("opening"==this.readyState||"open"==this.readyState){debug('socket receive: type "%s", data "%s"',packet.type,packet.data);this.emit("packet",packet);this.emit("heartbeat");switch(packet.type){case"open":this.onHandshake(parsejson(packet.data));break;case"pong":this.setPing();break;case"error":var err=new Error("server error");err.code=packet.data;this.emit("error",err);break;case"message":this.emit("data",packet.data);this.emit("message",packet.data);break}}else{debug('packet received with socket readyState "%s"',this.readyState)}};Socket.prototype.onHandshake=function(data){this.emit("handshake",data);this.id=data.sid;this.transport.query.sid=data.sid;this.upgrades=this.filterUpgrades(data.upgrades);this.pingInterval=data.pingInterval;this.pingTimeout=data.pingTimeout;this.onOpen();if("closed"==this.readyState)return;this.setPing();this.removeListener("heartbeat",this.onHeartbeat);this.on("heartbeat",this.onHeartbeat)};Socket.prototype.onHeartbeat=function(timeout){clearTimeout(this.pingTimeoutTimer);var self=this;self.pingTimeoutTimer=setTimeout(function(){if("closed"==self.readyState)return;self.onClose("ping timeout")},timeout||self.pingInterval+self.pingTimeout)};Socket.prototype.setPing=function(){var self=this;clearTimeout(self.pingIntervalTimer);self.pingIntervalTimer=setTimeout(function(){debug("writing ping packet - expecting pong within %sms",self.pingTimeout);self.ping();self.onHeartbeat(self.pingTimeout)},self.pingInterval)};Socket.prototype.ping=function(){this.sendPacket("ping")};Socket.prototype.onDrain=function(){for(var i=0;i<this.prevBufferLen;i++){if(this.callbackBuffer[i]){this.callbackBuffer[i]()}}this.writeBuffer.splice(0,this.prevBufferLen);this.callbackBuffer.splice(0,this.prevBufferLen);this.prevBufferLen=0;if(this.writeBuffer.length==0){this.emit("drain")}else{this.flush()}};Socket.prototype.flush=function(){if("closed"!=this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){debug("flushing %d packets in socket",this.writeBuffer.length);this.transport.send(this.writeBuffer);this.prevBufferLen=this.writeBuffer.length;this.emit("flush")}};Socket.prototype.write=Socket.prototype.send=function(msg,fn){this.sendPacket("message",msg,fn);return this};Socket.prototype.sendPacket=function(type,data,fn){if("closing"==this.readyState||"closed"==this.readyState){return}var packet={type:type,data:data};this.emit("packetCreate",packet);this.writeBuffer.push(packet);this.callbackBuffer.push(fn);this.flush()};Socket.prototype.close=function(){if("opening"==this.readyState||"open"==this.readyState){this.readyState="closing";var self=this;function close(){self.onClose("forced close");debug("socket closing - telling transport to close");self.transport.close()}function cleanupAndClose(){self.removeListener("upgrade",cleanupAndClose);self.removeListener("upgradeError",cleanupAndClose);close()}function waitForUpgrade(){self.once("upgrade",cleanupAndClose);self.once("upgradeError",cleanupAndClose)}if(this.writeBuffer.length){this.once("drain",function(){if(this.upgrading){waitForUpgrade()}else{close()}})}else if(this.upgrading){waitForUpgrade()}else{close()}}return this};Socket.prototype.onError=function(err){debug("socket error %j",err);Socket.priorWebsocketSuccess=false;this.emit("error",err);this.onClose("transport error",err)};Socket.prototype.onClose=function(reason,desc){if("opening"==this.readyState||"open"==this.readyState||"closing"==this.readyState){debug('socket close with reason: "%s"',reason);var self=this;clearTimeout(this.pingIntervalTimer);clearTimeout(this.pingTimeoutTimer);setTimeout(function(){self.writeBuffer=[];self.callbackBuffer=[];self.prevBufferLen=0},0);this.transport.removeAllListeners("close");this.transport.close();this.transport.removeAllListeners();this.readyState="closed";this.id=null;this.emit("close",reason,desc)}};Socket.prototype.filterUpgrades=function(upgrades){var filteredUpgrades=[];for(var i=0,j=upgrades.length;i<j;i++){if(~index(this.transports,upgrades[i]))filteredUpgrades.push(upgrades[i])}return filteredUpgrades}}).call(this,typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./transport":14,"./transports":15,"component-emitter":9,debug:22,"engine.io-parser":25,indexof:42,parsejson:34,parseqs:35,parseuri:36}],14:[function(_dereq_,module,exports){var parser=_dereq_("engine.io-parser");var Emitter=_dereq_("component-emitter");module.exports=Transport;function Transport(opts){this.path=opts.path;this.hostname=opts.hostname;this.port=opts.port;this.secure=opts.secure;this.query=opts.query;this.timestampParam=opts.timestampParam;this.timestampRequests=opts.timestampRequests;this.readyState="";this.agent=opts.agent||false;this.socket=opts.socket;this.enablesXDR=opts.enablesXDR;this.pfx=opts.pfx;this.key=opts.key;this.passphrase=opts.passphrase;this.cert=opts.cert;this.ca=opts.ca;this.ciphers=opts.ciphers;this.rejectUnauthorized=opts.rejectUnauthorized}Emitter(Transport.prototype);Transport.timestamps=0;Transport.prototype.onError=function(msg,desc){var err=new Error(msg);err.type="TransportError";err.description=desc;this.emit("error",err);return this};Transport.prototype.open=function(){if("closed"==this.readyState||""==this.readyState){this.readyState="opening";this.doOpen()}return this};Transport.prototype.close=function(){if("opening"==this.readyState||"open"==this.readyState){this.doClose();this.onClose()}return this};Transport.prototype.send=function(packets){if("open"==this.readyState){this.write(packets)}else{throw new Error("Transport not open")}};Transport.prototype.onOpen=function(){this.readyState="open";this.writable=true;this.emit("open")};Transport.prototype.onData=function(data){var packet=parser.decodePacket(data,this.socket.binaryType);this.onPacket(packet)};Transport.prototype.onPacket=function(packet){this.emit("packet",packet)};Transport.prototype.onClose=function(){this.readyState="closed";this.emit("close")}},{"component-emitter":9,"engine.io-parser":25}],15:[function(_dereq_,module,exports){(function(global){var XMLHttpRequest=_dereq_("xmlhttprequest");var XHR=_dereq_("./polling-xhr");var JSONP=_dereq_("./polling-jsonp");var websocket=_dereq_("./websocket");exports.polling=polling;exports.websocket=websocket;function polling(opts){var xhr;var xd=false;var xs=false;var jsonp=false!==opts.jsonp;if(global.location){var isSSL="https:"==location.protocol;var port=location.port;if(!port){port=isSSL?443:80}xd=opts.hostname!=location.hostname||port!=opts.port;xs=opts.secure!=isSSL}opts.xdomain=xd;opts.xscheme=xs;xhr=new XMLHttpRequest(opts);if("open"in xhr&&!opts.forceJSONP){return new XHR(opts)}else{if(!jsonp)throw new Error("JSONP disabled");return new JSONP(opts)}}}).call(this,typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./polling-jsonp":16,"./polling-xhr":17,"./websocket":19,xmlhttprequest:20}],16:[function(_dereq_,module,exports){(function(global){var Polling=_dereq_("./polling");var inherit=_dereq_("component-inherit");module.exports=JSONPPolling;var rNewline=/\n/g;var rEscapedNewline=/\\n/g;var callbacks;var index=0;function empty(){}function JSONPPolling(opts){Polling.call(this,opts);
this.query=this.query||{};if(!callbacks){if(!global.___eio)global.___eio=[];callbacks=global.___eio}this.index=callbacks.length;var self=this;callbacks.push(function(msg){self.onData(msg)});this.query.j=this.index;if(global.document&&global.addEventListener){global.addEventListener("beforeunload",function(){if(self.script)self.script.onerror=empty},false)}}inherit(JSONPPolling,Polling);JSONPPolling.prototype.supportsBinary=false;JSONPPolling.prototype.doClose=function(){if(this.script){this.script.parentNode.removeChild(this.script);this.script=null}if(this.form){this.form.parentNode.removeChild(this.form);this.form=null;this.iframe=null}Polling.prototype.doClose.call(this)};JSONPPolling.prototype.doPoll=function(){var self=this;var script=document.createElement("script");if(this.script){this.script.parentNode.removeChild(this.script);this.script=null}script.async=true;script.src=this.uri();script.onerror=function(e){self.onError("jsonp poll error",e)};var insertAt=document.getElementsByTagName("script")[0];insertAt.parentNode.insertBefore(script,insertAt);this.script=script;var isUAgecko="undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent);if(isUAgecko){setTimeout(function(){var iframe=document.createElement("iframe");document.body.appendChild(iframe);document.body.removeChild(iframe)},100)}};JSONPPolling.prototype.doWrite=function(data,fn){var self=this;if(!this.form){var form=document.createElement("form");var area=document.createElement("textarea");var id=this.iframeId="eio_iframe_"+this.index;var iframe;form.className="socketio";form.style.position="absolute";form.style.top="-1000px";form.style.left="-1000px";form.target=id;form.method="POST";form.setAttribute("accept-charset","utf-8");area.name="d";form.appendChild(area);document.body.appendChild(form);this.form=form;this.area=area}this.form.action=this.uri();function complete(){initIframe();fn()}function initIframe(){if(self.iframe){try{self.form.removeChild(self.iframe)}catch(e){self.onError("jsonp polling iframe removal error",e)}}try{var html='<iframe src="javascript:0" name="'+self.iframeId+'">';iframe=document.createElement(html)}catch(e){iframe=document.createElement("iframe");iframe.name=self.iframeId;iframe.src="javascript:0"}iframe.id=self.iframeId;self.form.appendChild(iframe);self.iframe=iframe}initIframe();data=data.replace(rEscapedNewline,"\\\n");this.area.value=data.replace(rNewline,"\\n");try{this.form.submit()}catch(e){}if(this.iframe.attachEvent){this.iframe.onreadystatechange=function(){if(self.iframe.readyState=="complete"){complete()}}}else{this.iframe.onload=complete}}}).call(this,typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./polling":18,"component-inherit":21}],17:[function(_dereq_,module,exports){(function(global){var XMLHttpRequest=_dereq_("xmlhttprequest");var Polling=_dereq_("./polling");var Emitter=_dereq_("component-emitter");var inherit=_dereq_("component-inherit");var debug=_dereq_("debug")("engine.io-client:polling-xhr");module.exports=XHR;module.exports.Request=Request;function empty(){}function XHR(opts){Polling.call(this,opts);if(global.location){var isSSL="https:"==location.protocol;var port=location.port;if(!port){port=isSSL?443:80}this.xd=opts.hostname!=global.location.hostname||port!=opts.port;this.xs=opts.secure!=isSSL}}inherit(XHR,Polling);XHR.prototype.supportsBinary=true;XHR.prototype.request=function(opts){opts=opts||{};opts.uri=this.uri();opts.xd=this.xd;opts.xs=this.xs;opts.agent=this.agent||false;opts.supportsBinary=this.supportsBinary;opts.enablesXDR=this.enablesXDR;opts.pfx=this.pfx;opts.key=this.key;opts.passphrase=this.passphrase;opts.cert=this.cert;opts.ca=this.ca;opts.ciphers=this.ciphers;opts.rejectUnauthorized=this.rejectUnauthorized;return new Request(opts)};XHR.prototype.doWrite=function(data,fn){var isBinary=typeof data!=="string"&&data!==undefined;var req=this.request({method:"POST",data:data,isBinary:isBinary});var self=this;req.on("success",fn);req.on("error",function(err){self.onError("xhr post error",err)});this.sendXhr=req};XHR.prototype.doPoll=function(){debug("xhr poll");var req=this.request();var self=this;req.on("data",function(data){self.onData(data)});req.on("error",function(err){self.onError("xhr poll error",err)});this.pollXhr=req};function Request(opts){this.method=opts.method||"GET";this.uri=opts.uri;this.xd=!!opts.xd;this.xs=!!opts.xs;this.async=false!==opts.async;this.data=undefined!=opts.data?opts.data:null;this.agent=opts.agent;this.isBinary=opts.isBinary;this.supportsBinary=opts.supportsBinary;this.enablesXDR=opts.enablesXDR;this.pfx=opts.pfx;this.key=opts.key;this.passphrase=opts.passphrase;this.cert=opts.cert;this.ca=opts.ca;this.ciphers=opts.ciphers;this.rejectUnauthorized=opts.rejectUnauthorized;this.create()}Emitter(Request.prototype);Request.prototype.create=function(){var opts={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};opts.pfx=this.pfx;opts.key=this.key;opts.passphrase=this.passphrase;opts.cert=this.cert;opts.ca=this.ca;opts.ciphers=this.ciphers;opts.rejectUnauthorized=this.rejectUnauthorized;var xhr=this.xhr=new XMLHttpRequest(opts);var self=this;try{debug("xhr open %s: %s",this.method,this.uri);xhr.open(this.method,this.uri,this.async);if(this.supportsBinary){xhr.responseType="arraybuffer"}if("POST"==this.method){try{if(this.isBinary){xhr.setRequestHeader("Content-type","application/octet-stream")}else{xhr.setRequestHeader("Content-type","text/plain;charset=UTF-8")}}catch(e){}}if("withCredentials"in xhr){xhr.withCredentials=true}if(this.hasXDR()){xhr.onload=function(){self.onLoad()};xhr.onerror=function(){self.onError(xhr.responseText)}}else{xhr.onreadystatechange=function(){if(4!=xhr.readyState)return;if(200==xhr.status||1223==xhr.status){self.onLoad()}else{setTimeout(function(){self.onError(xhr.status)},0)}}}debug("xhr data %s",this.data);xhr.send(this.data)}catch(e){setTimeout(function(){self.onError(e)},0);return}if(global.document){this.index=Request.requestsCount++;Request.requests[this.index]=this}};Request.prototype.onSuccess=function(){this.emit("success");this.cleanup()};Request.prototype.onData=function(data){this.emit("data",data);this.onSuccess()};Request.prototype.onError=function(err){this.emit("error",err);this.cleanup(true)};Request.prototype.cleanup=function(fromError){if("undefined"==typeof this.xhr||null===this.xhr){return}if(this.hasXDR()){this.xhr.onload=this.xhr.onerror=empty}else{this.xhr.onreadystatechange=empty}if(fromError){try{this.xhr.abort()}catch(e){}}if(global.document){delete Request.requests[this.index]}this.xhr=null};Request.prototype.onLoad=function(){var data;try{var contentType;try{contentType=this.xhr.getResponseHeader("Content-Type").split(";")[0]}catch(e){}if(contentType==="application/octet-stream"){data=this.xhr.response}else{if(!this.supportsBinary){data=this.xhr.responseText}else{data="ok"}}}catch(e){this.onError(e)}if(null!=data){this.onData(data)}};Request.prototype.hasXDR=function(){return"undefined"!==typeof global.XDomainRequest&&!this.xs&&this.enablesXDR};Request.prototype.abort=function(){this.cleanup()};if(global.document){Request.requestsCount=0;Request.requests={};if(global.attachEvent){global.attachEvent("onunload",unloadHandler)}else if(global.addEventListener){global.addEventListener("beforeunload",unloadHandler,false)}}function unloadHandler(){for(var i in Request.requests){if(Request.requests.hasOwnProperty(i)){Request.requests[i].abort()}}}}).call(this,typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./polling":18,"component-emitter":9,"component-inherit":21,debug:22,xmlhttprequest:20}],18:[function(_dereq_,module,exports){var Transport=_dereq_("../transport");var parseqs=_dereq_("parseqs");var parser=_dereq_("engine.io-parser");var inherit=_dereq_("component-inherit");var debug=_dereq_("debug")("engine.io-client:polling");module.exports=Polling;var hasXHR2=function(){var XMLHttpRequest=_dereq_("xmlhttprequest");var xhr=new XMLHttpRequest({xdomain:false});return null!=xhr.responseType}();function Polling(opts){var forceBase64=opts&&opts.forceBase64;if(!hasXHR2||forceBase64){this.supportsBinary=false}Transport.call(this,opts)}inherit(Polling,Transport);Polling.prototype.name="polling";Polling.prototype.doOpen=function(){this.poll()};Polling.prototype.pause=function(onPause){var pending=0;var self=this;this.readyState="pausing";function pause(){debug("paused");self.readyState="paused";onPause()}if(this.polling||!this.writable){var total=0;if(this.polling){debug("we are currently polling - waiting to pause");total++;this.once("pollComplete",function(){debug("pre-pause polling complete");--total||pause()})}if(!this.writable){debug("we are currently writing - waiting to pause");total++;this.once("drain",function(){debug("pre-pause writing complete");--total||pause()})}}else{pause()}};Polling.prototype.poll=function(){debug("polling");this.polling=true;this.doPoll();this.emit("poll")};Polling.prototype.onData=function(data){var self=this;debug("polling got data %s",data);var callback=function(packet,index,total){if("opening"==self.readyState){self.onOpen()}if("close"==packet.type){self.onClose();return false}self.onPacket(packet)};parser.decodePayload(data,this.socket.binaryType,callback);if("closed"!=this.readyState){this.polling=false;this.emit("pollComplete");if("open"==this.readyState){this.poll()}else{debug('ignoring poll - transport state "%s"',this.readyState)}}};Polling.prototype.doClose=function(){var self=this;function close(){debug("writing close packet");self.write([{type:"close"}])}if("open"==this.readyState){debug("transport open - closing");close()}else{debug("transport not open - deferring close");this.once("open",close)}};Polling.prototype.write=function(packets){var self=this;this.writable=false;var callbackfn=function(){self.writable=true;self.emit("drain")};var self=this;parser.encodePayload(packets,this.supportsBinary,function(data){self.doWrite(data,callbackfn)})};Polling.prototype.uri=function(){var query=this.query||{};var schema=this.secure?"https":"http";var port="";if(false!==this.timestampRequests){query[this.timestampParam]=+new Date+"-"+Transport.timestamps++}if(!this.supportsBinary&&!query.sid){query.b64=1}query=parseqs.encode(query);if(this.port&&("https"==schema&&this.port!=443||"http"==schema&&this.port!=80)){port=":"+this.port}if(query.length){query="?"+query}return schema+"://"+this.hostname+port+this.path+query}},{"../transport":14,"component-inherit":21,debug:22,"engine.io-parser":25,parseqs:35,xmlhttprequest:20}],19:[function(_dereq_,module,exports){var Transport=_dereq_("../transport");var parser=_dereq_("engine.io-parser");var parseqs=_dereq_("parseqs");var inherit=_dereq_("component-inherit");var debug=_dereq_("debug")("engine.io-client:websocket");var WebSocket=_dereq_("ws");module.exports=WS;function WS(opts){var forceBase64=opts&&opts.forceBase64;if(forceBase64){this.supportsBinary=false}Transport.call(this,opts)}inherit(WS,Transport);WS.prototype.name="websocket";WS.prototype.supportsBinary=true;WS.prototype.doOpen=function(){if(!this.check()){return}var self=this;var uri=this.uri();var protocols=void 0;var opts={agent:this.agent};opts.pfx=this.pfx;opts.key=this.key;opts.passphrase=this.passphrase;opts.cert=this.cert;opts.ca=this.ca;opts.ciphers=this.ciphers;opts.rejectUnauthorized=this.rejectUnauthorized;this.ws=new WebSocket(uri,protocols,opts);if(this.ws.binaryType===undefined){this.supportsBinary=false}this.ws.binaryType="arraybuffer";this.addEventListeners()};WS.prototype.addEventListeners=function(){var self=this;this.ws.onopen=function(){self.onOpen()};this.ws.onclose=function(){self.onClose()};this.ws.onmessage=function(ev){self.onData(ev.data)};this.ws.onerror=function(e){self.onError("websocket error",e)}};if("undefined"!=typeof navigator&&/iPad|iPhone|iPod/i.test(navigator.userAgent)){WS.prototype.onData=function(data){var self=this;setTimeout(function(){Transport.prototype.onData.call(self,data)},0)}}WS.prototype.write=function(packets){var self=this;this.writable=false;for(var i=0,l=packets.length;i<l;i++){parser.encodePacket(packets[i],this.supportsBinary,function(data){try{self.ws.send(data)}catch(e){debug("websocket closed before onclose event")}})}function ondrain(){self.writable=true;self.emit("drain")}setTimeout(ondrain,0)};WS.prototype.onClose=function(){Transport.prototype.onClose.call(this)};WS.prototype.doClose=function(){if(typeof this.ws!=="undefined"){this.ws.close()}};WS.prototype.uri=function(){var query=this.query||{};var schema=this.secure?"wss":"ws";var port="";if(this.port&&("wss"==schema&&this.port!=443||"ws"==schema&&this.port!=80)){port=":"+this.port}if(this.timestampRequests){query[this.timestampParam]=+new Date}if(!this.supportsBinary){query.b64=1}query=parseqs.encode(query);if(query.length){query="?"+query}return schema+"://"+this.hostname+port+this.path+query};WS.prototype.check=function(){return!!WebSocket&&!("__initialize"in WebSocket&&this.name===WS.prototype.name)}},{"../transport":14,"component-inherit":21,debug:22,"engine.io-parser":25,parseqs:35,ws:37}],20:[function(_dereq_,module,exports){var hasCORS=_dereq_("has-cors");module.exports=function(opts){var xdomain=opts.xdomain;var xscheme=opts.xscheme;var enablesXDR=opts.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&(!xdomain||hasCORS)){return new XMLHttpRequest}}catch(e){}try{if("undefined"!=typeof XDomainRequest&&!xscheme&&enablesXDR){return new XDomainRequest}}catch(e){}if(!xdomain){try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}}},{"has-cors":40}],21:[function(_dereq_,module,exports){module.exports=function(a,b){var fn=function(){};fn.prototype=b.prototype;a.prototype=new fn;a.prototype.constructor=a}},{}],22:[function(_dereq_,module,exports){exports=module.exports=_dereq_("./debug");exports.log=log;exports.formatArgs=formatArgs;exports.save=save;exports.load=load;exports.useColors=useColors;exports.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"];function useColors(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31}exports.formatters.j=function(v){return JSON.stringify(v)};function formatArgs(){var args=arguments;var useColors=this.useColors;args[0]=(useColors?"%c":"")+this.namespace+(useColors?" %c":" ")+args[0]+(useColors?"%c ":" ")+"+"+exports.humanize(this.diff);if(!useColors)return args;var c="color: "+this.color;args=[args[0],c,"color: inherit"].concat(Array.prototype.slice.call(args,1));var index=0;var lastC=0;args[0].replace(/%[a-z%]/g,function(match){if("%"===match)return;index++;if("%c"===match){lastC=index}});args.splice(lastC,0,c);return args}function log(){return"object"==typeof console&&"function"==typeof console.log&&Function.prototype.apply.call(console.log,console,arguments)}function save(namespaces){try{if(null==namespaces){localStorage.removeItem("debug")}else{localStorage.debug=namespaces}}catch(e){}}function load(){var r;try{r=localStorage.debug}catch(e){}return r}exports.enable(load())},{"./debug":23}],23:[function(_dereq_,module,exports){exports=module.exports=debug;exports.coerce=coerce;exports.disable=disable;exports.enable=enable;exports.enabled=enabled;exports.humanize=_dereq_("ms");exports.names=[];exports.skips=[];exports.formatters={};var prevColor=0;var prevTime;function selectColor(){return exports.colors[prevColor++%exports.colors.length]}function debug(namespace){function disabled(){}disabled.enabled=false;function enabled(){var self=enabled;var curr=+new Date;var ms=curr-(prevTime||curr);self.diff=ms;self.prev=prevTime;self.curr=curr;prevTime=curr;if(null==self.useColors)self.useColors=exports.useColors();if(null==self.color&&self.useColors)self.color=selectColor();var args=Array.prototype.slice.call(arguments);args[0]=exports.coerce(args[0]);if("string"!==typeof args[0]){args=["%o"].concat(args)}var index=0;args[0]=args[0].replace(/%([a-z%])/g,function(match,format){if(match==="%")return match;index++;var formatter=exports.formatters[format];if("function"===typeof formatter){var val=args[index];match=formatter.call(self,val);args.splice(index,1);index--}return match});if("function"===typeof exports.formatArgs){args=exports.formatArgs.apply(self,args)}var logFn=enabled.log||exports.log||console.log.bind(console);logFn.apply(self,args)}enabled.enabled=true;var fn=exports.enabled(namespace)?enabled:disabled;fn.namespace=namespace;return fn}function enable(namespaces){exports.save(namespaces);var split=(namespaces||"").split(/[\s,]+/);var len=split.length;for(var i=0;i<len;i++){if(!split[i])continue;namespaces=split[i].replace(/\*/g,".*?");if(namespaces[0]==="-"){exports.skips.push(new RegExp("^"+namespaces.substr(1)+"$"))}else{exports.names.push(new RegExp("^"+namespaces+"$"))}}}function disable(){exports.enable("")}function enabled(name){var i,len;for(i=0,len=exports.skips.length;i<len;i++){if(exports.skips[i].test(name)){return false}}for(i=0,len=exports.names.length;i<len;i++){if(exports.names[i].test(name)){return true}}return false}function coerce(val){if(val instanceof Error)return val.stack||val.message;return val}},{ms:24}],24:[function(_dereq_,module,exports){var s=1e3;var m=s*60;var h=m*60;var d=h*24;var y=d*365.25;module.exports=function(val,options){options=options||{};if("string"==typeof val)return parse(val);return options.long?long(val):short(val)};function parse(str){var match=/^((?:\d+)?\.?\d+) *(ms|seconds?|s|minutes?|m|hours?|h|days?|d|years?|y)?$/i.exec(str);if(!match)return;var n=parseFloat(match[1]);var type=(match[2]||"ms").toLowerCase();switch(type){case"years":case"year":case"y":return n*y;case"days":case"day":case"d":return n*d;case"hours":case"hour":case"h":return n*h;case"minutes":case"minute":case"m":return n*m;case"seconds":case"second":case"s":return n*s;case"ms":return n}}function short(ms){if(ms>=d)return Math.round(ms/d)+"d";if(ms>=h)return Math.round(ms/h)+"h";if(ms>=m)return Math.round(ms/m)+"m";if(ms>=s)return Math.round(ms/s)+"s";return ms+"ms"}function long(ms){return plural(ms,d,"day")||plural(ms,h,"hour")||plural(ms,m,"minute")||plural(ms,s,"second")||ms+" ms"}function plural(ms,n,name){if(ms<n)return;if(ms<n*1.5)return Math.floor(ms/n)+" "+name;return Math.ceil(ms/n)+" "+name+"s"}},{}],25:[function(_dereq_,module,exports){(function(global){var keys=_dereq_("./keys");var hasBinary=_dereq_("has-binary");var sliceBuffer=_dereq_("arraybuffer.slice");var base64encoder=_dereq_("base64-arraybuffer");var after=_dereq_("after");var utf8=_dereq_("utf8");var isAndroid=navigator.userAgent.match(/Android/i);var isPhantomJS=/PhantomJS/i.test(navigator.userAgent);var dontSendBlobs=isAndroid||isPhantomJS;exports.protocol=3;var packets=exports.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6};var packetslist=keys(packets);var err={type:"error",data:"parser error"};var Blob=_dereq_("blob");exports.encodePacket=function(packet,supportsBinary,utf8encode,callback){if("function"==typeof supportsBinary){callback=supportsBinary;supportsBinary=false}if("function"==typeof utf8encode){callback=utf8encode;utf8encode=null}var data=packet.data===undefined?undefined:packet.data.buffer||packet.data;if(global.ArrayBuffer&&data instanceof ArrayBuffer){return encodeArrayBuffer(packet,supportsBinary,callback)}else if(Blob&&data instanceof global.Blob){return encodeBlob(packet,supportsBinary,callback)}if(data&&data.base64){return encodeBase64Object(packet,callback)}var encoded=packets[packet.type];if(undefined!==packet.data){encoded+=utf8encode?utf8.encode(String(packet.data)):String(packet.data)}return callback(""+encoded)};function encodeBase64Object(packet,callback){var message="b"+exports.packets[packet.type]+packet.data.data;return callback(message)}function encodeArrayBuffer(packet,supportsBinary,callback){if(!supportsBinary){return exports.encodeBase64Packet(packet,callback)}var data=packet.data;var contentArray=new Uint8Array(data);var resultBuffer=new Uint8Array(1+data.byteLength);resultBuffer[0]=packets[packet.type];for(var i=0;i<contentArray.length;i++){resultBuffer[i+1]=contentArray[i]}return callback(resultBuffer.buffer)}function encodeBlobAsArrayBuffer(packet,supportsBinary,callback){if(!supportsBinary){return exports.encodeBase64Packet(packet,callback)}var fr=new FileReader;fr.onload=function(){packet.data=fr.result;exports.encodePacket(packet,supportsBinary,true,callback)};return fr.readAsArrayBuffer(packet.data)}function encodeBlob(packet,supportsBinary,callback){if(!supportsBinary){return exports.encodeBase64Packet(packet,callback)}if(dontSendBlobs){return encodeBlobAsArrayBuffer(packet,supportsBinary,callback)}var length=new Uint8Array(1);length[0]=packets[packet.type];var blob=new Blob([length.buffer,packet.data]);return callback(blob)}exports.encodeBase64Packet=function(packet,callback){var message="b"+exports.packets[packet.type];if(Blob&&packet.data instanceof Blob){var fr=new FileReader;fr.onload=function(){var b64=fr.result.split(",")[1];callback(message+b64)};return fr.readAsDataURL(packet.data)}var b64data;try{b64data=String.fromCharCode.apply(null,new Uint8Array(packet.data))}catch(e){var typed=new Uint8Array(packet.data);var basic=new Array(typed.length);for(var i=0;i<typed.length;i++){basic[i]=typed[i]}b64data=String.fromCharCode.apply(null,basic)}message+=global.btoa(b64data);return callback(message)};exports.decodePacket=function(data,binaryType,utf8decode){if(typeof data=="string"||data===undefined){if(data.charAt(0)=="b"){return exports.decodeBase64Packet(data.substr(1),binaryType)}if(utf8decode){try{data=utf8.decode(data)}catch(e){return err}}var type=data.charAt(0);if(Number(type)!=type||!packetslist[type]){return err}if(data.length>1){return{type:packetslist[type],data:data.substring(1)}}else{return{type:packetslist[type]}}}var asArray=new Uint8Array(data);var type=asArray[0];var rest=sliceBuffer(data,1);if(Blob&&binaryType==="blob"){rest=new Blob([rest])}return{type:packetslist[type],data:rest}};exports.decodeBase64Packet=function(msg,binaryType){var type=packetslist[msg.charAt(0)];if(!global.ArrayBuffer){return{type:type,data:{base64:true,data:msg.substr(1)}}}var data=base64encoder.decode(msg.substr(1));if(binaryType==="blob"&&Blob){data=new Blob([data])}return{type:type,data:data}};exports.encodePayload=function(packets,supportsBinary,callback){if(typeof supportsBinary=="function"){callback=supportsBinary;supportsBinary=null}var isBinary=hasBinary(packets);if(supportsBinary&&isBinary){if(Blob&&!dontSendBlobs){return exports.encodePayloadAsBlob(packets,callback)}return exports.encodePayloadAsArrayBuffer(packets,callback)}if(!packets.length){return callback("0:")}function setLengthHeader(message){return message.length+":"+message}function encodeOne(packet,doneCallback){exports.encodePacket(packet,!isBinary?false:supportsBinary,true,function(message){doneCallback(null,setLengthHeader(message))})}map(packets,encodeOne,function(err,results){return callback(results.join(""))})};function map(ary,each,done){var result=new Array(ary.length);var next=after(ary.length,done);var eachWithIndex=function(i,el,cb){each(el,function(error,msg){result[i]=msg;cb(error,result)})};for(var i=0;i<ary.length;i++){eachWithIndex(i,ary[i],next)}}exports.decodePayload=function(data,binaryType,callback){if(typeof data!="string"){return exports.decodePayloadAsBinary(data,binaryType,callback)}if(typeof binaryType==="function"){callback=binaryType;binaryType=null}var packet;if(data==""){return callback(err,0,1)}var length="",n,msg;for(var i=0,l=data.length;i<l;i++){var chr=data.charAt(i);if(":"!=chr){length+=chr}else{if(""==length||length!=(n=Number(length))){return callback(err,0,1)}msg=data.substr(i+1,n);if(length!=msg.length){return callback(err,0,1)}if(msg.length){packet=exports.decodePacket(msg,binaryType,true);if(err.type==packet.type&&err.data==packet.data){return callback(err,0,1)}var ret=callback(packet,i+n,l);if(false===ret)return}i+=n;length=""}}if(length!=""){return callback(err,0,1)}};exports.encodePayloadAsArrayBuffer=function(packets,callback){if(!packets.length){return callback(new ArrayBuffer(0))}function encodeOne(packet,doneCallback){exports.encodePacket(packet,true,true,function(data){return doneCallback(null,data)})}map(packets,encodeOne,function(err,encodedPackets){var totalLength=encodedPackets.reduce(function(acc,p){var len;if(typeof p==="string"){len=p.length}else{len=p.byteLength}return acc+len.toString().length+len+2},0);var resultArray=new Uint8Array(totalLength);var bufferIndex=0;encodedPackets.forEach(function(p){var isString=typeof p==="string";var ab=p;if(isString){var view=new Uint8Array(p.length);for(var i=0;i<p.length;i++){view[i]=p.charCodeAt(i)}ab=view.buffer}if(isString){resultArray[bufferIndex++]=0}else{resultArray[bufferIndex++]=1}var lenStr=ab.byteLength.toString();for(var i=0;i<lenStr.length;i++){resultArray[bufferIndex++]=parseInt(lenStr[i])}resultArray[bufferIndex++]=255;var view=new Uint8Array(ab);for(var i=0;i<view.length;i++){resultArray[bufferIndex++]=view[i]}});return callback(resultArray.buffer)})};exports.encodePayloadAsBlob=function(packets,callback){function encodeOne(packet,doneCallback){exports.encodePacket(packet,true,true,function(encoded){var binaryIdentifier=new Uint8Array(1);binaryIdentifier[0]=1;if(typeof encoded==="string"){var view=new Uint8Array(encoded.length);for(var i=0;i<encoded.length;i++){view[i]=encoded.charCodeAt(i)}encoded=view.buffer;binaryIdentifier[0]=0}var len=encoded instanceof ArrayBuffer?encoded.byteLength:encoded.size;var lenStr=len.toString();var lengthAry=new Uint8Array(lenStr.length+1);for(var i=0;i<lenStr.length;i++){lengthAry[i]=parseInt(lenStr[i])}lengthAry[lenStr.length]=255;if(Blob){var blob=new Blob([binaryIdentifier.buffer,lengthAry.buffer,encoded]);doneCallback(null,blob)}})}map(packets,encodeOne,function(err,results){return callback(new Blob(results))})};exports.decodePayloadAsBinary=function(data,binaryType,callback){if(typeof binaryType==="function"){callback=binaryType;binaryType=null}var bufferTail=data;var buffers=[];var numberTooLong=false;while(bufferTail.byteLength>0){var tailArray=new Uint8Array(bufferTail);var isString=tailArray[0]===0;var msgLength="";for(var i=1;;i++){if(tailArray[i]==255)break;if(msgLength.length>310){numberTooLong=true;break}msgLength+=tailArray[i]}if(numberTooLong)return callback(err,0,1);bufferTail=sliceBuffer(bufferTail,2+msgLength.length);msgLength=parseInt(msgLength);var msg=sliceBuffer(bufferTail,0,msgLength);if(isString){try{msg=String.fromCharCode.apply(null,new Uint8Array(msg))}catch(e){var typed=new Uint8Array(msg);msg="";for(var i=0;i<typed.length;i++){msg+=String.fromCharCode(typed[i])}}}buffers.push(msg);bufferTail=sliceBuffer(bufferTail,msgLength)}var total=buffers.length;buffers.forEach(function(buffer,i){callback(exports.decodePacket(buffer,binaryType,true),i,total)})}}).call(this,typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./keys":26,after:27,"arraybuffer.slice":28,"base64-arraybuffer":29,blob:30,"has-binary":31,utf8:33}],26:[function(_dereq_,module,exports){module.exports=Object.keys||function keys(obj){var arr=[];var has=Object.prototype.hasOwnProperty;for(var i in obj){if(has.call(obj,i)){arr.push(i)}}return arr}},{}],27:[function(_dereq_,module,exports){module.exports=after;function after(count,callback,err_cb){var bail=false;err_cb=err_cb||noop;proxy.count=count;return count===0?callback():proxy;function proxy(err,result){if(proxy.count<=0){throw new Error("after called too many times")}--proxy.count;if(err){bail=true;callback(err);callback=err_cb}else if(proxy.count===0&&!bail){callback(null,result)}}}function noop(){}},{}],28:[function(_dereq_,module,exports){module.exports=function(arraybuffer,start,end){var bytes=arraybuffer.byteLength;start=start||0;end=end||bytes;if(arraybuffer.slice){return arraybuffer.slice(start,end)}if(start<0){start+=bytes}if(end<0){end+=bytes}if(end>bytes){end=bytes}if(start>=bytes||start>=end||bytes===0){return new ArrayBuffer(0)}var abv=new Uint8Array(arraybuffer);var result=new Uint8Array(end-start);for(var i=start,ii=0;i<end;i++,ii++){result[ii]=abv[i]}return result.buffer}},{}],29:[function(_dereq_,module,exports){(function(chars){"use strict";exports.encode=function(arraybuffer){var bytes=new Uint8Array(arraybuffer),i,len=bytes.length,base64="";for(i=0;i<len;i+=3){base64+=chars[bytes[i]>>2];base64+=chars[(bytes[i]&3)<<4|bytes[i+1]>>4];base64+=chars[(bytes[i+1]&15)<<2|bytes[i+2]>>6];base64+=chars[bytes[i+2]&63]}if(len%3===2){base64=base64.substring(0,base64.length-1)+"="}else if(len%3===1){base64=base64.substring(0,base64.length-2)+"=="}return base64};exports.decode=function(base64){var bufferLength=base64.length*.75,len=base64.length,i,p=0,encoded1,encoded2,encoded3,encoded4;if(base64[base64.length-1]==="="){bufferLength--;if(base64[base64.length-2]==="="){bufferLength--}}var arraybuffer=new ArrayBuffer(bufferLength),bytes=new Uint8Array(arraybuffer);for(i=0;i<len;i+=4){encoded1=chars.indexOf(base64[i]);encoded2=chars.indexOf(base64[i+1]);encoded3=chars.indexOf(base64[i+2]);encoded4=chars.indexOf(base64[i+3]);bytes[p++]=encoded1<<2|encoded2>>4;bytes[p++]=(encoded2&15)<<4|encoded3>>2;bytes[p++]=(encoded3&3)<<6|encoded4&63}return arraybuffer}})("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/")},{}],30:[function(_dereq_,module,exports){(function(global){var BlobBuilder=global.BlobBuilder||global.WebKitBlobBuilder||global.MSBlobBuilder||global.MozBlobBuilder;var blobSupported=function(){try{var b=new Blob(["hi"]);return b.size==2}catch(e){return false}}();var blobBuilderSupported=BlobBuilder&&BlobBuilder.prototype.append&&BlobBuilder.prototype.getBlob;function BlobBuilderConstructor(ary,options){options=options||{};var bb=new BlobBuilder;for(var i=0;i<ary.length;i++){bb.append(ary[i])}return options.type?bb.getBlob(options.type):bb.getBlob()}module.exports=function(){if(blobSupported){return global.Blob}else if(blobBuilderSupported){return BlobBuilderConstructor}else{return undefined}}()}).call(this,typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],31:[function(_dereq_,module,exports){(function(global){var isArray=_dereq_("isarray");module.exports=hasBinary;function hasBinary(data){function _hasBinary(obj){if(!obj)return false;if(global.Buffer&&global.Buffer.isBuffer(obj)||global.ArrayBuffer&&obj instanceof ArrayBuffer||global.Blob&&obj instanceof Blob||global.File&&obj instanceof File){return true}if(isArray(obj)){for(var i=0;i<obj.length;i++){if(_hasBinary(obj[i])){return true}}}else if(obj&&"object"==typeof obj){if(obj.toJSON){obj=obj.toJSON()}for(var key in obj){if(obj.hasOwnProperty(key)&&_hasBinary(obj[key])){return true}}}return false}return _hasBinary(data)}}).call(this,typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{isarray:32}],32:[function(_dereq_,module,exports){module.exports=Array.isArray||function(arr){return Object.prototype.toString.call(arr)=="[object Array]"}},{}],33:[function(_dereq_,module,exports){(function(global){(function(root){var freeExports=typeof exports=="object"&&exports;var freeModule=typeof module=="object"&&module&&module.exports==freeExports&&module;var freeGlobal=typeof global=="object"&&global;if(freeGlobal.global===freeGlobal||freeGlobal.window===freeGlobal){root=freeGlobal}var stringFromCharCode=String.fromCharCode;function ucs2decode(string){var output=[];var counter=0;var length=string.length;var value;var extra;while(counter<length){value=string.charCodeAt(counter++);if(value>=55296&&value<=56319&&counter<length){extra=string.charCodeAt(counter++);if((extra&64512)==56320){output.push(((value&1023)<<10)+(extra&1023)+65536)}else{output.push(value);counter--}}else{output.push(value)}}return output}function ucs2encode(array){var length=array.length;var index=-1;var value;var output="";while(++index<length){value=array[index];if(value>65535){value-=65536;
output+=stringFromCharCode(value>>>10&1023|55296);value=56320|value&1023}output+=stringFromCharCode(value)}return output}function createByte(codePoint,shift){return stringFromCharCode(codePoint>>shift&63|128)}function encodeCodePoint(codePoint){if((codePoint&4294967168)==0){return stringFromCharCode(codePoint)}var symbol="";if((codePoint&4294965248)==0){symbol=stringFromCharCode(codePoint>>6&31|192)}else if((codePoint&4294901760)==0){symbol=stringFromCharCode(codePoint>>12&15|224);symbol+=createByte(codePoint,6)}else if((codePoint&4292870144)==0){symbol=stringFromCharCode(codePoint>>18&7|240);symbol+=createByte(codePoint,12);symbol+=createByte(codePoint,6)}symbol+=stringFromCharCode(codePoint&63|128);return symbol}function utf8encode(string){var codePoints=ucs2decode(string);var length=codePoints.length;var index=-1;var codePoint;var byteString="";while(++index<length){codePoint=codePoints[index];byteString+=encodeCodePoint(codePoint)}return byteString}function readContinuationByte(){if(byteIndex>=byteCount){throw Error("Invalid byte index")}var continuationByte=byteArray[byteIndex]&255;byteIndex++;if((continuationByte&192)==128){return continuationByte&63}throw Error("Invalid continuation byte")}function decodeSymbol(){var byte1;var byte2;var byte3;var byte4;var codePoint;if(byteIndex>byteCount){throw Error("Invalid byte index")}if(byteIndex==byteCount){return false}byte1=byteArray[byteIndex]&255;byteIndex++;if((byte1&128)==0){return byte1}if((byte1&224)==192){var byte2=readContinuationByte();codePoint=(byte1&31)<<6|byte2;if(codePoint>=128){return codePoint}else{throw Error("Invalid continuation byte")}}if((byte1&240)==224){byte2=readContinuationByte();byte3=readContinuationByte();codePoint=(byte1&15)<<12|byte2<<6|byte3;if(codePoint>=2048){return codePoint}else{throw Error("Invalid continuation byte")}}if((byte1&248)==240){byte2=readContinuationByte();byte3=readContinuationByte();byte4=readContinuationByte();codePoint=(byte1&15)<<18|byte2<<12|byte3<<6|byte4;if(codePoint>=65536&&codePoint<=1114111){return codePoint}}throw Error("Invalid UTF-8 detected")}var byteArray;var byteCount;var byteIndex;function utf8decode(byteString){byteArray=ucs2decode(byteString);byteCount=byteArray.length;byteIndex=0;var codePoints=[];var tmp;while((tmp=decodeSymbol())!==false){codePoints.push(tmp)}return ucs2encode(codePoints)}var utf8={version:"2.0.0",encode:utf8encode,decode:utf8decode};if(typeof define=="function"&&typeof define.amd=="object"&&define.amd){define(function(){return utf8})}else if(freeExports&&!freeExports.nodeType){if(freeModule){freeModule.exports=utf8}else{var object={};var hasOwnProperty=object.hasOwnProperty;for(var key in utf8){hasOwnProperty.call(utf8,key)&&(freeExports[key]=utf8[key])}}}else{root.utf8=utf8}})(this)}).call(this,typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],34:[function(_dereq_,module,exports){(function(global){var rvalidchars=/^[\],:{}\s]*$/;var rvalidescape=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g;var rvalidtokens=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g;var rvalidbraces=/(?:^|:|,)(?:\s*\[)+/g;var rtrimLeft=/^\s+/;var rtrimRight=/\s+$/;module.exports=function parsejson(data){if("string"!=typeof data||!data){return null}data=data.replace(rtrimLeft,"").replace(rtrimRight,"");if(global.JSON&&JSON.parse){return JSON.parse(data)}if(rvalidchars.test(data.replace(rvalidescape,"@").replace(rvalidtokens,"]").replace(rvalidbraces,""))){return new Function("return "+data)()}}}).call(this,typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],35:[function(_dereq_,module,exports){exports.encode=function(obj){var str="";for(var i in obj){if(obj.hasOwnProperty(i)){if(str.length)str+="&";str+=encodeURIComponent(i)+"="+encodeURIComponent(obj[i])}}return str};exports.decode=function(qs){var qry={};var pairs=qs.split("&");for(var i=0,l=pairs.length;i<l;i++){var pair=pairs[i].split("=");qry[decodeURIComponent(pair[0])]=decodeURIComponent(pair[1])}return qry}},{}],36:[function(_dereq_,module,exports){var re=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/;var parts=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];module.exports=function parseuri(str){var src=str,b=str.indexOf("["),e=str.indexOf("]");if(b!=-1&&e!=-1){str=str.substring(0,b)+str.substring(b,e).replace(/:/g,";")+str.substring(e,str.length)}var m=re.exec(str||""),uri={},i=14;while(i--){uri[parts[i]]=m[i]||""}if(b!=-1&&e!=-1){uri.source=src;uri.host=uri.host.substring(1,uri.host.length-1).replace(/;/g,":");uri.authority=uri.authority.replace("[","").replace("]","").replace(/;/g,":");uri.ipv6uri=true}return uri}},{}],37:[function(_dereq_,module,exports){var global=function(){return this}();var WebSocket=global.WebSocket||global.MozWebSocket;module.exports=WebSocket?ws:null;function ws(uri,protocols,opts){var instance;if(protocols){instance=new WebSocket(uri,protocols)}else{instance=new WebSocket(uri)}return instance}if(WebSocket)ws.prototype=WebSocket.prototype},{}],38:[function(_dereq_,module,exports){(function(global){var isArray=_dereq_("isarray");module.exports=hasBinary;function hasBinary(data){function _hasBinary(obj){if(!obj)return false;if(global.Buffer&&global.Buffer.isBuffer(obj)||global.ArrayBuffer&&obj instanceof ArrayBuffer||global.Blob&&obj instanceof Blob||global.File&&obj instanceof File){return true}if(isArray(obj)){for(var i=0;i<obj.length;i++){if(_hasBinary(obj[i])){return true}}}else if(obj&&"object"==typeof obj){if(obj.toJSON){obj=obj.toJSON()}for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)&&_hasBinary(obj[key])){return true}}}return false}return _hasBinary(data)}}).call(this,typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{isarray:39}],39:[function(_dereq_,module,exports){module.exports=_dereq_(32)},{}],40:[function(_dereq_,module,exports){var global=_dereq_("global");try{module.exports="XMLHttpRequest"in global&&"withCredentials"in new global.XMLHttpRequest}catch(err){module.exports=false}},{global:41}],41:[function(_dereq_,module,exports){module.exports=function(){return this}()},{}],42:[function(_dereq_,module,exports){var indexOf=[].indexOf;module.exports=function(arr,obj){if(indexOf)return arr.indexOf(obj);for(var i=0;i<arr.length;++i){if(arr[i]===obj)return i}return-1}},{}],43:[function(_dereq_,module,exports){var has=Object.prototype.hasOwnProperty;exports.keys=Object.keys||function(obj){var keys=[];for(var key in obj){if(has.call(obj,key)){keys.push(key)}}return keys};exports.values=function(obj){var vals=[];for(var key in obj){if(has.call(obj,key)){vals.push(obj[key])}}return vals};exports.merge=function(a,b){for(var key in b){if(has.call(b,key)){a[key]=b[key]}}return a};exports.length=function(obj){return exports.keys(obj).length};exports.isEmpty=function(obj){return 0==exports.length(obj)}},{}],44:[function(_dereq_,module,exports){var re=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/;var parts=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];module.exports=function parseuri(str){var m=re.exec(str||""),uri={},i=14;while(i--){uri[parts[i]]=m[i]||""}return uri}},{}],45:[function(_dereq_,module,exports){(function(global){var isArray=_dereq_("isarray");var isBuf=_dereq_("./is-buffer");exports.deconstructPacket=function(packet){var buffers=[];var packetData=packet.data;function _deconstructPacket(data){if(!data)return data;if(isBuf(data)){var placeholder={_placeholder:true,num:buffers.length};buffers.push(data);return placeholder}else if(isArray(data)){var newData=new Array(data.length);for(var i=0;i<data.length;i++){newData[i]=_deconstructPacket(data[i])}return newData}else if("object"==typeof data&&!(data instanceof Date)){var newData={};for(var key in data){newData[key]=_deconstructPacket(data[key])}return newData}return data}var pack=packet;pack.data=_deconstructPacket(packetData);pack.attachments=buffers.length;return{packet:pack,buffers:buffers}};exports.reconstructPacket=function(packet,buffers){var curPlaceHolder=0;function _reconstructPacket(data){if(data&&data._placeholder){var buf=buffers[data.num];return buf}else if(isArray(data)){for(var i=0;i<data.length;i++){data[i]=_reconstructPacket(data[i])}return data}else if(data&&"object"==typeof data){for(var key in data){data[key]=_reconstructPacket(data[key])}return data}return data}packet.data=_reconstructPacket(packet.data);packet.attachments=undefined;return packet};exports.removeBlobs=function(data,callback){function _removeBlobs(obj,curKey,containingObject){if(!obj)return obj;if(global.Blob&&obj instanceof Blob||global.File&&obj instanceof File){pendingBlobs++;var fileReader=new FileReader;fileReader.onload=function(){if(containingObject){containingObject[curKey]=this.result}else{bloblessData=this.result}if(!--pendingBlobs){callback(bloblessData)}};fileReader.readAsArrayBuffer(obj)}else if(isArray(obj)){for(var i=0;i<obj.length;i++){_removeBlobs(obj[i],i,obj)}}else if(obj&&"object"==typeof obj&&!isBuf(obj)){for(var key in obj){_removeBlobs(obj[key],key,obj)}}}var pendingBlobs=0;var bloblessData=data;_removeBlobs(bloblessData);if(!pendingBlobs){callback(bloblessData)}}}).call(this,typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./is-buffer":47,isarray:48}],46:[function(_dereq_,module,exports){var debug=_dereq_("debug")("socket.io-parser");var json=_dereq_("json3");var isArray=_dereq_("isarray");var Emitter=_dereq_("component-emitter");var binary=_dereq_("./binary");var isBuf=_dereq_("./is-buffer");exports.protocol=4;exports.types=["CONNECT","DISCONNECT","EVENT","BINARY_EVENT","ACK","BINARY_ACK","ERROR"];exports.CONNECT=0;exports.DISCONNECT=1;exports.EVENT=2;exports.ACK=3;exports.ERROR=4;exports.BINARY_EVENT=5;exports.BINARY_ACK=6;exports.Encoder=Encoder;exports.Decoder=Decoder;function Encoder(){}Encoder.prototype.encode=function(obj,callback){debug("encoding packet %j",obj);if(exports.BINARY_EVENT==obj.type||exports.BINARY_ACK==obj.type){encodeAsBinary(obj,callback)}else{var encoding=encodeAsString(obj);callback([encoding])}};function encodeAsString(obj){var str="";var nsp=false;str+=obj.type;if(exports.BINARY_EVENT==obj.type||exports.BINARY_ACK==obj.type){str+=obj.attachments;str+="-"}if(obj.nsp&&"/"!=obj.nsp){nsp=true;str+=obj.nsp}if(null!=obj.id){if(nsp){str+=",";nsp=false}str+=obj.id}if(null!=obj.data){if(nsp)str+=",";str+=json.stringify(obj.data)}debug("encoded %j as %s",obj,str);return str}function encodeAsBinary(obj,callback){function writeEncoding(bloblessData){var deconstruction=binary.deconstructPacket(bloblessData);var pack=encodeAsString(deconstruction.packet);var buffers=deconstruction.buffers;buffers.unshift(pack);callback(buffers)}binary.removeBlobs(obj,writeEncoding)}function Decoder(){this.reconstructor=null}Emitter(Decoder.prototype);Decoder.prototype.add=function(obj){var packet;if("string"==typeof obj){packet=decodeString(obj);if(exports.BINARY_EVENT==packet.type||exports.BINARY_ACK==packet.type){this.reconstructor=new BinaryReconstructor(packet);if(this.reconstructor.reconPack.attachments===0){this.emit("decoded",packet)}}else{this.emit("decoded",packet)}}else if(isBuf(obj)||obj.base64){if(!this.reconstructor){throw new Error("got binary data when not reconstructing a packet")}else{packet=this.reconstructor.takeBinaryData(obj);if(packet){this.reconstructor=null;this.emit("decoded",packet)}}}else{throw new Error("Unknown type: "+obj)}};function decodeString(str){var p={};var i=0;p.type=Number(str.charAt(0));if(null==exports.types[p.type])return error();if(exports.BINARY_EVENT==p.type||exports.BINARY_ACK==p.type){var buf="";while(str.charAt(++i)!="-"){buf+=str.charAt(i);if(i+1==str.length)break}if(buf!=Number(buf)||str.charAt(i)!="-"){throw new Error("Illegal attachments")}p.attachments=Number(buf)}if("/"==str.charAt(i+1)){p.nsp="";while(++i){var c=str.charAt(i);if(","==c)break;p.nsp+=c;if(i+1==str.length)break}}else{p.nsp="/"}var next=str.charAt(i+1);if(""!==next&&Number(next)==next){p.id="";while(++i){var c=str.charAt(i);if(null==c||Number(c)!=c){--i;break}p.id+=str.charAt(i);if(i+1==str.length)break}p.id=Number(p.id)}if(str.charAt(++i)){try{p.data=json.parse(str.substr(i))}catch(e){return error()}}debug("decoded %s as %j",str,p);return p}Decoder.prototype.destroy=function(){if(this.reconstructor){this.reconstructor.finishedReconstruction()}};function BinaryReconstructor(packet){this.reconPack=packet;this.buffers=[]}BinaryReconstructor.prototype.takeBinaryData=function(binData){this.buffers.push(binData);if(this.buffers.length==this.reconPack.attachments){var packet=binary.reconstructPacket(this.reconPack,this.buffers);this.finishedReconstruction();return packet}return null};BinaryReconstructor.prototype.finishedReconstruction=function(){this.reconPack=null;this.buffers=[]};function error(data){return{type:exports.ERROR,data:"parser error"}}},{"./binary":45,"./is-buffer":47,"component-emitter":9,debug:10,isarray:48,json3:49}],47:[function(_dereq_,module,exports){(function(global){module.exports=isBuf;function isBuf(obj){return global.Buffer&&global.Buffer.isBuffer(obj)||global.ArrayBuffer&&obj instanceof ArrayBuffer}}).call(this,typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],48:[function(_dereq_,module,exports){module.exports=_dereq_(32)},{}],49:[function(_dereq_,module,exports){(function(window){var getClass={}.toString,isProperty,forEach,undef;var isLoader=typeof define==="function"&&define.amd;var nativeJSON=typeof JSON=="object"&&JSON;var JSON3=typeof exports=="object"&&exports&&!exports.nodeType&&exports;if(JSON3&&nativeJSON){JSON3.stringify=nativeJSON.stringify;JSON3.parse=nativeJSON.parse}else{JSON3=window.JSON=nativeJSON||{}}var isExtended=new Date(-0xc782b5b800cec);try{isExtended=isExtended.getUTCFullYear()==-109252&&isExtended.getUTCMonth()===0&&isExtended.getUTCDate()===1&&isExtended.getUTCHours()==10&&isExtended.getUTCMinutes()==37&&isExtended.getUTCSeconds()==6&&isExtended.getUTCMilliseconds()==708}catch(exception){}function has(name){if(has[name]!==undef){return has[name]}var isSupported;if(name=="bug-string-char-index"){isSupported="a"[0]!="a"}else if(name=="json"){isSupported=has("json-stringify")&&has("json-parse")}else{var value,serialized='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if(name=="json-stringify"){var stringify=JSON3.stringify,stringifySupported=typeof stringify=="function"&&isExtended;if(stringifySupported){(value=function(){return 1}).toJSON=value;try{stringifySupported=stringify(0)==="0"&&stringify(new Number)==="0"&&stringify(new String)=='""'&&stringify(getClass)===undef&&stringify(undef)===undef&&stringify()===undef&&stringify(value)==="1"&&stringify([value])=="[1]"&&stringify([undef])=="[null]"&&stringify(null)=="null"&&stringify([undef,getClass,null])=="[null,null,null]"&&stringify({a:[value,true,false,null,"\x00\b\n\f\r	"]})==serialized&&stringify(null,value)==="1"&&stringify([1,2],null,1)=="[\n 1,\n 2\n]"&&stringify(new Date(-864e13))=='"-271821-04-20T00:00:00.000Z"'&&stringify(new Date(864e13))=='"+275760-09-13T00:00:00.000Z"'&&stringify(new Date(-621987552e5))=='"-000001-01-01T00:00:00.000Z"'&&stringify(new Date(-1))=='"1969-12-31T23:59:59.999Z"'}catch(exception){stringifySupported=false}}isSupported=stringifySupported}if(name=="json-parse"){var parse=JSON3.parse;if(typeof parse=="function"){try{if(parse("0")===0&&!parse(false)){value=parse(serialized);var parseSupported=value["a"].length==5&&value["a"][0]===1;if(parseSupported){try{parseSupported=!parse('"	"')}catch(exception){}if(parseSupported){try{parseSupported=parse("01")!==1}catch(exception){}}if(parseSupported){try{parseSupported=parse("1.")!==1}catch(exception){}}}}}catch(exception){parseSupported=false}}isSupported=parseSupported}}return has[name]=!!isSupported}if(!has("json")){var functionClass="[object Function]";var dateClass="[object Date]";var numberClass="[object Number]";var stringClass="[object String]";var arrayClass="[object Array]";var booleanClass="[object Boolean]";var charIndexBuggy=has("bug-string-char-index");if(!isExtended){var floor=Math.floor;var Months=[0,31,59,90,120,151,181,212,243,273,304,334];var getDay=function(year,month){return Months[month]+365*(year-1970)+floor((year-1969+(month=+(month>1)))/4)-floor((year-1901+month)/100)+floor((year-1601+month)/400)}}if(!(isProperty={}.hasOwnProperty)){isProperty=function(property){var members={},constructor;if((members.__proto__=null,members.__proto__={toString:1},members).toString!=getClass){isProperty=function(property){var original=this.__proto__,result=property in(this.__proto__=null,this);this.__proto__=original;return result}}else{constructor=members.constructor;isProperty=function(property){var parent=(this.constructor||constructor).prototype;return property in this&&!(property in parent&&this[property]===parent[property])}}members=null;return isProperty.call(this,property)}}var PrimitiveTypes={"boolean":1,number:1,string:1,undefined:1};var isHostType=function(object,property){var type=typeof object[property];return type=="object"?!!object[property]:!PrimitiveTypes[type]};forEach=function(object,callback){var size=0,Properties,members,property;(Properties=function(){this.valueOf=0}).prototype.valueOf=0;members=new Properties;for(property in members){if(isProperty.call(members,property)){size++}}Properties=members=null;if(!size){members=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"];forEach=function(object,callback){var isFunction=getClass.call(object)==functionClass,property,length;var hasProperty=!isFunction&&typeof object.constructor!="function"&&isHostType(object,"hasOwnProperty")?object.hasOwnProperty:isProperty;for(property in object){if(!(isFunction&&property=="prototype")&&hasProperty.call(object,property)){callback(property)}}for(length=members.length;property=members[--length];hasProperty.call(object,property)&&callback(property));}}else if(size==2){forEach=function(object,callback){var members={},isFunction=getClass.call(object)==functionClass,property;for(property in object){if(!(isFunction&&property=="prototype")&&!isProperty.call(members,property)&&(members[property]=1)&&isProperty.call(object,property)){callback(property)}}}}else{forEach=function(object,callback){var isFunction=getClass.call(object)==functionClass,property,isConstructor;for(property in object){if(!(isFunction&&property=="prototype")&&isProperty.call(object,property)&&!(isConstructor=property==="constructor")){callback(property)}}if(isConstructor||isProperty.call(object,property="constructor")){callback(property)}}}return forEach(object,callback)};if(!has("json-stringify")){var Escapes={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"};var leadingZeroes="000000";var toPaddedString=function(width,value){return(leadingZeroes+(value||0)).slice(-width)};var unicodePrefix="\\u00";var quote=function(value){var result='"',index=0,length=value.length,isLarge=length>10&&charIndexBuggy,symbols;if(isLarge){symbols=value.split("")}for(;index<length;index++){var charCode=value.charCodeAt(index);switch(charCode){case 8:case 9:case 10:case 12:case 13:case 34:case 92:result+=Escapes[charCode];break;default:if(charCode<32){result+=unicodePrefix+toPaddedString(2,charCode.toString(16));break}result+=isLarge?symbols[index]:charIndexBuggy?value.charAt(index):value[index]}}return result+'"'};var serialize=function(property,object,callback,properties,whitespace,indentation,stack){var value,className,year,month,date,time,hours,minutes,seconds,milliseconds,results,element,index,length,prefix,result;try{value=object[property]}catch(exception){}if(typeof value=="object"&&value){className=getClass.call(value);if(className==dateClass&&!isProperty.call(value,"toJSON")){if(value>-1/0&&value<1/0){if(getDay){date=floor(value/864e5);for(year=floor(date/365.2425)+1970-1;getDay(year+1,0)<=date;year++);for(month=floor((date-getDay(year,0))/30.42);getDay(year,month+1)<=date;month++);date=1+date-getDay(year,month);time=(value%864e5+864e5)%864e5;hours=floor(time/36e5)%24;minutes=floor(time/6e4)%60;seconds=floor(time/1e3)%60;milliseconds=time%1e3}else{year=value.getUTCFullYear();month=value.getUTCMonth();date=value.getUTCDate();hours=value.getUTCHours();minutes=value.getUTCMinutes();seconds=value.getUTCSeconds();milliseconds=value.getUTCMilliseconds()}value=(year<=0||year>=1e4?(year<0?"-":"+")+toPaddedString(6,year<0?-year:year):toPaddedString(4,year))+"-"+toPaddedString(2,month+1)+"-"+toPaddedString(2,date)+"T"+toPaddedString(2,hours)+":"+toPaddedString(2,minutes)+":"+toPaddedString(2,seconds)+"."+toPaddedString(3,milliseconds)+"Z"}else{value=null}}else if(typeof value.toJSON=="function"&&(className!=numberClass&&className!=stringClass&&className!=arrayClass||isProperty.call(value,"toJSON"))){value=value.toJSON(property)}}if(callback){value=callback.call(object,property,value)}if(value===null){return"null"}className=getClass.call(value);if(className==booleanClass){return""+value}else if(className==numberClass){return value>-1/0&&value<1/0?""+value:"null"}else if(className==stringClass){return quote(""+value)}if(typeof value=="object"){for(length=stack.length;length--;){if(stack[length]===value){throw TypeError()}}stack.push(value);results=[];prefix=indentation;indentation+=whitespace;if(className==arrayClass){for(index=0,length=value.length;index<length;index++){element=serialize(index,value,callback,properties,whitespace,indentation,stack);results.push(element===undef?"null":element)}result=results.length?whitespace?"[\n"+indentation+results.join(",\n"+indentation)+"\n"+prefix+"]":"["+results.join(",")+"]":"[]"}else{forEach(properties||value,function(property){var element=serialize(property,value,callback,properties,whitespace,indentation,stack);if(element!==undef){results.push(quote(property)+":"+(whitespace?" ":"")+element)}});result=results.length?whitespace?"{\n"+indentation+results.join(",\n"+indentation)+"\n"+prefix+"}":"{"+results.join(",")+"}":"{}"}stack.pop();return result}};JSON3.stringify=function(source,filter,width){var whitespace,callback,properties,className;if(typeof filter=="function"||typeof filter=="object"&&filter){if((className=getClass.call(filter))==functionClass){callback=filter}else if(className==arrayClass){properties={};for(var index=0,length=filter.length,value;index<length;value=filter[index++],(className=getClass.call(value),className==stringClass||className==numberClass)&&(properties[value]=1));}}if(width){if((className=getClass.call(width))==numberClass){if((width-=width%1)>0){for(whitespace="",width>10&&(width=10);whitespace.length<width;whitespace+=" ");}}else if(className==stringClass){whitespace=width.length<=10?width:width.slice(0,10)}}return serialize("",(value={},value[""]=source,value),callback,properties,whitespace,"",[])}}if(!has("json-parse")){var fromCharCode=String.fromCharCode;var Unescapes={92:"\\",34:'"',47:"/",98:"\b",116:"	",110:"\n",102:"\f",114:"\r"};var Index,Source;var abort=function(){Index=Source=null;throw SyntaxError()};var lex=function(){var source=Source,length=source.length,value,begin,position,isSigned,charCode;while(Index<length){charCode=source.charCodeAt(Index);switch(charCode){case 9:case 10:case 13:case 32:Index++;break;case 123:case 125:case 91:case 93:case 58:case 44:value=charIndexBuggy?source.charAt(Index):source[Index];Index++;return value;case 34:for(value="@",Index++;Index<length;){charCode=source.charCodeAt(Index);if(charCode<32){abort()}else if(charCode==92){charCode=source.charCodeAt(++Index);switch(charCode){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:value+=Unescapes[charCode];Index++;break;case 117:begin=++Index;for(position=Index+4;Index<position;Index++){charCode=source.charCodeAt(Index);if(!(charCode>=48&&charCode<=57||charCode>=97&&charCode<=102||charCode>=65&&charCode<=70)){abort()}}value+=fromCharCode("0x"+source.slice(begin,Index));break;default:abort()}}else{if(charCode==34){break}charCode=source.charCodeAt(Index);begin=Index;while(charCode>=32&&charCode!=92&&charCode!=34){charCode=source.charCodeAt(++Index)}value+=source.slice(begin,Index)}}if(source.charCodeAt(Index)==34){Index++;return value}abort();default:begin=Index;if(charCode==45){isSigned=true;charCode=source.charCodeAt(++Index)}if(charCode>=48&&charCode<=57){if(charCode==48&&(charCode=source.charCodeAt(Index+1),charCode>=48&&charCode<=57)){abort()}isSigned=false;for(;Index<length&&(charCode=source.charCodeAt(Index),charCode>=48&&charCode<=57);Index++);if(source.charCodeAt(Index)==46){position=++Index;for(;position<length&&(charCode=source.charCodeAt(position),charCode>=48&&charCode<=57);position++);if(position==Index){abort()}Index=position}charCode=source.charCodeAt(Index);if(charCode==101||charCode==69){charCode=source.charCodeAt(++Index);if(charCode==43||charCode==45){Index++}for(position=Index;position<length&&(charCode=source.charCodeAt(position),charCode>=48&&charCode<=57);position++);if(position==Index){abort()}Index=position}return+source.slice(begin,Index)}if(isSigned){abort()}if(source.slice(Index,Index+4)=="true"){Index+=4;return true}else if(source.slice(Index,Index+5)=="false"){Index+=5;return false}else if(source.slice(Index,Index+4)=="null"){Index+=4;return null}abort()}}return"$"};var get=function(value){var results,hasMembers;if(value=="$"){abort()}if(typeof value=="string"){if((charIndexBuggy?value.charAt(0):value[0])=="@"){return value.slice(1)}if(value=="["){results=[];for(;;hasMembers||(hasMembers=true)){value=lex();if(value=="]"){break}if(hasMembers){if(value==","){value=lex();if(value=="]"){abort()}}else{abort()}}if(value==","){abort()}results.push(get(value))}return results}else if(value=="{"){results={};for(;;hasMembers||(hasMembers=true)){value=lex();if(value=="}"){break}if(hasMembers){if(value==","){value=lex();if(value=="}"){abort()}}else{abort()}}if(value==","||typeof value!="string"||(charIndexBuggy?value.charAt(0):value[0])!="@"||lex()!=":"){abort()}results[value.slice(1)]=get(lex())}return results}abort()}return value};var update=function(source,property,callback){var element=walk(source,property,callback);if(element===undef){delete source[property]}else{source[property]=element}};var walk=function(source,property,callback){var value=source[property],length;if(typeof value=="object"&&value){if(getClass.call(value)==arrayClass){for(length=value.length;length--;){update(value,length,callback)}}else{forEach(value,function(property){update(value,property,callback)})}}return callback.call(source,property,value)};JSON3.parse=function(source,callback){var result,value;Index=0;Source=""+source;result=get(lex());if(lex()!="$"){abort()}Index=Source=null;return callback&&getClass.call(callback)==functionClass?walk((value={},value[""]=result,value),"",callback):result}}}if(isLoader){define(function(){return JSON3})}})(this)},{}],50:[function(_dereq_,module,exports){module.exports=toArray;function toArray(list,index){var array=[];index=index||0;for(var i=index||0;i<list.length;i++){array[i-index]=list[i]}return array}},{}]},{},[1])(1)});